\hypertarget{maap__tests_8cpp}{}\section{daemons/maap/tests/maap\+\_\+tests.cpp 파일 참조}
\label{maap__tests_8cpp}\index{daemons/maap/tests/maap\+\_\+tests.\+cpp@{daemons/maap/tests/maap\+\_\+tests.\+cpp}}
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include \char`\"{}Cpp\+U\+Test/\+Test\+Harness.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}maap.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}maap\+\_\+packet.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../test/maap\+\_\+log\+\_\+dummy.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../test/maap\+\_\+timer\+\_\+dummy.\+h\char`\"{}}\\*
maap\+\_\+tests.\+cpp에 대한 include 의존 그래프
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{maap__tests_8cpp__incl}
\end{center}
\end{figure}
\subsection*{매크로}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{T\+E\+S\+T\+\_\+\+D\+E\+S\+T\+\_\+\+A\+D\+DR}~0x91\+E0\+F000\+F\+F00
\item 
\#define \hyperlink{maap__tests_8cpp_a63329935c6eb8edf3f3af5e11a4e1ec8}{T\+E\+S\+T\+\_\+\+S\+R\+C\+\_\+\+A\+D\+DR}~0x123456789abc
\item 
\#define \hyperlink{maap__tests_8cpp_a3e8161597923401b934507d7565c93d8}{T\+E\+S\+T\+\_\+\+R\+E\+M\+O\+T\+E\+\_\+\+A\+D\+D\+R\+\_\+\+L\+O\+W\+ER}~0x777777777777 /$\ast$ Remote address that we should defer to $\ast$/
\item 
\#define \hyperlink{maap__tests_8cpp_a963c488aaeabc0c167b60b01b334dce5}{T\+E\+S\+T\+\_\+\+R\+E\+M\+O\+T\+E\+\_\+\+A\+D\+D\+R\+\_\+\+H\+I\+G\+H\+ER}~0x1111111111ee /$\ast$ Remote address that we should ignore $\ast$/
\item 
\#define \hyperlink{maap__tests_8cpp_a58d3d99c3a186771d115e1f90e3d6867}{num\+\_\+reservations}~10
\end{DoxyCompactItemize}
\subsection*{함수}
\begin{DoxyCompactItemize}
\item 
static void \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\+\_\+sent\+\_\+packets} (\hyperlink{struct_maap___client}{Maap\+\_\+\+Client} $\ast$p\+\_\+mc, \hyperlink{struct_maap___notify}{Maap\+\_\+\+Notify} $\ast$p\+\_\+mn, const void $\ast$$\ast$p\+\_\+sender\+\_\+out, int $\ast$p\+\_\+probe\+\_\+packets\+\_\+detected, int $\ast$p\+\_\+announce\+\_\+packets\+\_\+detected, int \hyperlink{maap_8c_a3518a5176c421f589c9720bee301c977}{send\+\_\+probe}, int \hyperlink{maap_8c_a347a548120a8564100386c1937b9bf0c}{send\+\_\+announce}, int \hyperlink{maap_8c_a2f736d2d0d06de43bfcf25347618481b}{send\+\_\+defend}, \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t} remote\+\_\+addr, int stop\+\_\+after\+\_\+probe)
\item 
\hyperlink{maap__tests_8cpp_aad77ac96b1e35e25ad82156e7b532622}{T\+E\+S\+T\+\_\+\+G\+R\+O\+UP} (maap\+\_\+group)
\item 
\hyperlink{maap__tests_8cpp_ac2e28e85a926e59e3dc9300270fe31ff}{T\+E\+ST} (maap\+\_\+group, Init)
\item 
\hyperlink{maap__tests_8cpp_a48e0a53be0d8b5901c7f2970ed489ae4}{T\+E\+ST} (maap\+\_\+group, Reserve\+\_\+\+Release)
\item 
\hyperlink{maap__tests_8cpp_aa4c6d5bd521395b615cde85870846a23}{T\+E\+ST} (maap\+\_\+group, Probing\+\_\+vs\+\_\+\+Probes)
\item 
\hyperlink{maap__tests_8cpp_a63028acba0f0926bf78f39748180dcc5}{T\+E\+ST} (maap\+\_\+group, Probing\+\_\+vs\+\_\+\+Announces)
\item 
\hyperlink{maap__tests_8cpp_a1657279d4cfdbcb6caf87e01c920a36d}{T\+E\+ST} (maap\+\_\+group, Probing\+\_\+vs\+\_\+\+Defends)
\item 
\hyperlink{maap__tests_8cpp_a3135bbc68e3af121520c961b2054a38e}{T\+E\+ST} (maap\+\_\+group, Defending\+\_\+vs\+\_\+\+Probes)
\item 
\hyperlink{maap__tests_8cpp_a50e969486d3685760ff25bbd2d2212c0}{T\+E\+ST} (maap\+\_\+group, Defending\+\_\+vs\+\_\+\+Announces)
\item 
\hyperlink{maap__tests_8cpp_ab99859655cd5ea772f38354201682cc0}{T\+E\+ST} (maap\+\_\+group, Defending\+\_\+vs\+\_\+\+Defends)
\item 
\hyperlink{maap__tests_8cpp_a136de25c07c7e766542ba937cb81b190}{T\+E\+ST} (maap\+\_\+group, Verify\+\_\+\+Timing)
\item 
\hyperlink{maap__tests_8cpp_a74643984fd6005682b6576a3fc8417c4}{T\+E\+ST} (maap\+\_\+group, Ignore\+\_\+\+Versioning)
\item 
\hyperlink{maap__tests_8cpp_afe4e3de7a3c4cb0b8abe9671504687d4}{T\+E\+ST} (maap\+\_\+group, Multiple\+\_\+\+Conflicts\+\_\+\+Defend)
\end{DoxyCompactItemize}


\subsection{매크로 문서화}
\index{maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}!num\+\_\+reservations@{num\+\_\+reservations}}
\index{num\+\_\+reservations@{num\+\_\+reservations}!maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}}
\subsubsection[{\texorpdfstring{num\+\_\+reservations}{num_reservations}}]{\setlength{\rightskip}{0pt plus 5cm}\#define num\+\_\+reservations~10}\hypertarget{maap__tests_8cpp_a58d3d99c3a186771d115e1f90e3d6867}{}\label{maap__tests_8cpp_a58d3d99c3a186771d115e1f90e3d6867}
\index{maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}!T\+E\+S\+T\+\_\+\+D\+E\+S\+T\+\_\+\+A\+D\+DR@{T\+E\+S\+T\+\_\+\+D\+E\+S\+T\+\_\+\+A\+D\+DR}}
\index{T\+E\+S\+T\+\_\+\+D\+E\+S\+T\+\_\+\+A\+D\+DR@{T\+E\+S\+T\+\_\+\+D\+E\+S\+T\+\_\+\+A\+D\+DR}!maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}}
\subsubsection[{\texorpdfstring{T\+E\+S\+T\+\_\+\+D\+E\+S\+T\+\_\+\+A\+D\+DR}{TEST_DEST_ADDR}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+E\+S\+T\+\_\+\+D\+E\+S\+T\+\_\+\+A\+D\+DR~0x91\+E0\+F000\+F\+F00}\hypertarget{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{}\label{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}


maap\+\_\+tests.\+cpp 파일의 19 번째 라인에서 정의되었습니다.

\index{maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}!T\+E\+S\+T\+\_\+\+R\+E\+M\+O\+T\+E\+\_\+\+A\+D\+D\+R\+\_\+\+H\+I\+G\+H\+ER@{T\+E\+S\+T\+\_\+\+R\+E\+M\+O\+T\+E\+\_\+\+A\+D\+D\+R\+\_\+\+H\+I\+G\+H\+ER}}
\index{T\+E\+S\+T\+\_\+\+R\+E\+M\+O\+T\+E\+\_\+\+A\+D\+D\+R\+\_\+\+H\+I\+G\+H\+ER@{T\+E\+S\+T\+\_\+\+R\+E\+M\+O\+T\+E\+\_\+\+A\+D\+D\+R\+\_\+\+H\+I\+G\+H\+ER}!maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}}
\subsubsection[{\texorpdfstring{T\+E\+S\+T\+\_\+\+R\+E\+M\+O\+T\+E\+\_\+\+A\+D\+D\+R\+\_\+\+H\+I\+G\+H\+ER}{TEST_REMOTE_ADDR_HIGHER}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+E\+S\+T\+\_\+\+R\+E\+M\+O\+T\+E\+\_\+\+A\+D\+D\+R\+\_\+\+H\+I\+G\+H\+ER~0x1111111111ee /$\ast$ Remote address that we should ignore $\ast$/}\hypertarget{maap__tests_8cpp_a963c488aaeabc0c167b60b01b334dce5}{}\label{maap__tests_8cpp_a963c488aaeabc0c167b60b01b334dce5}


maap\+\_\+tests.\+cpp 파일의 23 번째 라인에서 정의되었습니다.

\index{maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}!T\+E\+S\+T\+\_\+\+R\+E\+M\+O\+T\+E\+\_\+\+A\+D\+D\+R\+\_\+\+L\+O\+W\+ER@{T\+E\+S\+T\+\_\+\+R\+E\+M\+O\+T\+E\+\_\+\+A\+D\+D\+R\+\_\+\+L\+O\+W\+ER}}
\index{T\+E\+S\+T\+\_\+\+R\+E\+M\+O\+T\+E\+\_\+\+A\+D\+D\+R\+\_\+\+L\+O\+W\+ER@{T\+E\+S\+T\+\_\+\+R\+E\+M\+O\+T\+E\+\_\+\+A\+D\+D\+R\+\_\+\+L\+O\+W\+ER}!maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}}
\subsubsection[{\texorpdfstring{T\+E\+S\+T\+\_\+\+R\+E\+M\+O\+T\+E\+\_\+\+A\+D\+D\+R\+\_\+\+L\+O\+W\+ER}{TEST_REMOTE_ADDR_LOWER}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+E\+S\+T\+\_\+\+R\+E\+M\+O\+T\+E\+\_\+\+A\+D\+D\+R\+\_\+\+L\+O\+W\+ER~0x777777777777 /$\ast$ Remote address that we should defer to $\ast$/}\hypertarget{maap__tests_8cpp_a3e8161597923401b934507d7565c93d8}{}\label{maap__tests_8cpp_a3e8161597923401b934507d7565c93d8}


maap\+\_\+tests.\+cpp 파일의 22 번째 라인에서 정의되었습니다.

\index{maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}!T\+E\+S\+T\+\_\+\+S\+R\+C\+\_\+\+A\+D\+DR@{T\+E\+S\+T\+\_\+\+S\+R\+C\+\_\+\+A\+D\+DR}}
\index{T\+E\+S\+T\+\_\+\+S\+R\+C\+\_\+\+A\+D\+DR@{T\+E\+S\+T\+\_\+\+S\+R\+C\+\_\+\+A\+D\+DR}!maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}}
\subsubsection[{\texorpdfstring{T\+E\+S\+T\+\_\+\+S\+R\+C\+\_\+\+A\+D\+DR}{TEST_SRC_ADDR}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+E\+S\+T\+\_\+\+S\+R\+C\+\_\+\+A\+D\+DR~0x123456789abc}\hypertarget{maap__tests_8cpp_a63329935c6eb8edf3f3af5e11a4e1ec8}{}\label{maap__tests_8cpp_a63329935c6eb8edf3f3af5e11a4e1ec8}


maap\+\_\+tests.\+cpp 파일의 20 번째 라인에서 정의되었습니다.



\subsection{함수 문서화}
\index{maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}}
\subsubsection[{\texorpdfstring{T\+E\+S\+T(maap\+\_\+group, Init)}{TEST(maap_group, Init)}}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{maap\+\_\+group}]{, }
\item[{Init}]{}
\end{DoxyParamCaption}
)}\hypertarget{maap__tests_8cpp_ac2e28e85a926e59e3dc9300270fe31ff}{}\label{maap__tests_8cpp_ac2e28e85a926e59e3dc9300270fe31ff}


maap\+\_\+tests.\+cpp 파일의 44 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
45 \{
46     \textcolor{keyword}{const} \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t} range\_base\_addr = \hyperlink{maap_8h_ae6263079f02d6fcdb18350e93b5e8fd9}{MAAP\_DYNAMIC\_POOL\_BASE} + 0x1000;
47     \textcolor{keyword}{const} \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\_t} range\_size = \hyperlink{maap_8h_a27db04878ffebe92dbbcbae7e7c5d447}{MAAP\_DYNAMIC\_POOL\_SIZE} - 0x800;
48     \hyperlink{struct_maap___client}{Maap\_Client} mc;
49     \hyperlink{struct_maap___notify}{Maap\_Notify} mn;
50     \textcolor{keyword}{const} \textcolor{keywordtype}{int} sender1\_in = 1, sender2\_in = 2, sender3\_in = 3;
51     \textcolor{keyword}{const} \textcolor{keywordtype}{void} *sender\_out;
52 
53     \textcolor{comment}{/* Initialize the Maap\_Client structure */}
54     memset(&mc, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___client}{Maap\_Client}));
55     mc.\hyperlink{struct_maap___client_a205a8c33627111589223916ef80462c2}{dest\_mac} = \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR};
56     mc.\hyperlink{struct_maap___client_ae2c98c9078f80f770e85f937c34da4eb}{src\_mac} = \hyperlink{maap__tests_8cpp_a63329935c6eb8edf3f3af5e11a4e1ec8}{TEST\_SRC\_ADDR};
57 
58     \textcolor{comment}{/* Test the maap\_init\_client() function */}
59     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_ab40b6b8a9d9c4269ef5deb0cb453e652}{maap\_init\_client}(&mc, &sender1\_in, range\_base\_addr, 
      range\_size));
60     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_base\_addr, mc.\hyperlink{struct_maap___client_a35767d757d073fc43d0f1118d5cbdc4e}{address\_base});
61     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_size, mc.\hyperlink{struct_maap___client_aa1f919567122a4029070948bdfdcf2a3}{range\_len});
62     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mc.\hyperlink{struct_maap___client_a415d09d180ac60757c9f10728fd42e8a}{ranges} == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
63     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mc.\hyperlink{struct_maap___client_a9d54ec9961bf59b379abe4e487904bbd}{timer\_queue} == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
64     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mc.\hyperlink{struct_maap___client_ad59f2b60cccbf7bd6a43003017d1d01a}{timer} != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
65     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mc.\hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net} != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
66     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mc.\hyperlink{struct_maap___client_ad06983e7f6e71b233ea7ff3dee1952f2}{initialized});
67 
68     \textcolor{comment}{/* We should receive exactly one notification of the initialization. */}
69     sender\_out = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
70     memset(&mn, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___notify}{Maap\_Notify}));
71     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
72     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender1\_in);
73     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea1933d7302204862df14f845d2566183c}{MAAP\_NOTIFY\_INITIALIZED}, mn.
      \hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
74     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(-1, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
75     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_base\_addr, mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start});
76     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_size, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
77     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
78     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
79 
80     \textcolor{comment}{/* Test the maap\_init\_client() function again with the same information */}
81     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_ab40b6b8a9d9c4269ef5deb0cb453e652}{maap\_init\_client}(&mc, &sender2\_in, range\_base\_addr, 
      range\_size));
82     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_base\_addr, mc.\hyperlink{struct_maap___client_a35767d757d073fc43d0f1118d5cbdc4e}{address\_base});
83     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_size, mc.\hyperlink{struct_maap___client_aa1f919567122a4029070948bdfdcf2a3}{range\_len});
84     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mc.\hyperlink{struct_maap___client_a415d09d180ac60757c9f10728fd42e8a}{ranges} == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
85     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mc.\hyperlink{struct_maap___client_a9d54ec9961bf59b379abe4e487904bbd}{timer\_queue} == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
86     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mc.\hyperlink{struct_maap___client_ad59f2b60cccbf7bd6a43003017d1d01a}{timer} != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
87     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mc.\hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net} != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
88     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mc.\hyperlink{struct_maap___client_ad06983e7f6e71b233ea7ff3dee1952f2}{initialized});
89 
90     \textcolor{comment}{/* We should receive exactly one notification of the initialization. */}
91     sender\_out = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
92     memset(&mn, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___notify}{Maap\_Notify}));
93     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
94     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender2\_in);
95     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea1933d7302204862df14f845d2566183c}{MAAP\_NOTIFY\_INITIALIZED}, mn.
      \hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
96     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(-1, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
97     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_base\_addr, mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start});
98     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_size, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
99     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
100     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
101 
102     \textcolor{comment}{/* Test the maap\_init\_client() function again with different information */}
103     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(-1, \hyperlink{maap_8c_ab40b6b8a9d9c4269ef5deb0cb453e652}{maap\_init\_client}(&mc, &sender3\_in, range\_base\_addr + 1, 
      range\_size));
104     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_base\_addr, mc.\hyperlink{struct_maap___client_a35767d757d073fc43d0f1118d5cbdc4e}{address\_base});
105     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_size, mc.\hyperlink{struct_maap___client_aa1f919567122a4029070948bdfdcf2a3}{range\_len});
106     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mc.\hyperlink{struct_maap___client_a415d09d180ac60757c9f10728fd42e8a}{ranges} == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
107     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mc.\hyperlink{struct_maap___client_a9d54ec9961bf59b379abe4e487904bbd}{timer\_queue} == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
108     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mc.\hyperlink{struct_maap___client_ad59f2b60cccbf7bd6a43003017d1d01a}{timer} != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
109     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mc.\hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net} != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
110     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mc.\hyperlink{struct_maap___client_ad06983e7f6e71b233ea7ff3dee1952f2}{initialized});
111 
112     \textcolor{comment}{/* We should receive exactly one notification of the initialization error. */}
113     sender\_out = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
114     memset(&mn, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___notify}{Maap\_Notify}));
115     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
116     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender3\_in);
117     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea1933d7302204862df14f845d2566183c}{MAAP\_NOTIFY\_INITIALIZED}, mn.
      \hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
118     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(-1, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
119     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_base\_addr, mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start});
120     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_size, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
121     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddab6456efeda22d33ab1fb2766f533d019}{MAAP\_NOTIFY\_ERROR\_ALREADY\_INITIALIZED}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
122     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
123 
124     \textcolor{comment}{/* We are done with the Maap\_Client structure */}
125     \hyperlink{maap_8c_abb26ec0dca0b97acd80b602bcfc2179a}{maap\_deinit\_client}(&mc);
126 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{maap__tests_8cpp_ac2e28e85a926e59e3dc9300270fe31ff_cgraph}
\end{center}
\end{figure}


\index{maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}}
\subsubsection[{\texorpdfstring{T\+E\+S\+T(maap\+\_\+group, Reserve\+\_\+\+Release)}{TEST(maap_group, Reserve_Release)}}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{maap\+\_\+group}]{, }
\item[{Reserve\+\_\+\+Release}]{}
\end{DoxyParamCaption}
)}\hypertarget{maap__tests_8cpp_a48e0a53be0d8b5901c7f2970ed489ae4}{}\label{maap__tests_8cpp_a48e0a53be0d8b5901c7f2970ed489ae4}


maap\+\_\+tests.\+cpp 파일의 128 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
129 \{
130     \textcolor{keyword}{const} \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t} range\_base\_addr = \hyperlink{maap_8h_ae6263079f02d6fcdb18350e93b5e8fd9}{MAAP\_DYNAMIC\_POOL\_BASE};
131     \textcolor{keyword}{const} \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\_t} range\_size = \hyperlink{maap_8h_a27db04878ffebe92dbbcbae7e7c5d447}{MAAP\_DYNAMIC\_POOL\_SIZE};
132     \hyperlink{struct_maap___client}{Maap\_Client} mc;
133     \hyperlink{struct_maap___notify}{Maap\_Notify} mn;
134     \textcolor{keyword}{const} \textcolor{keywordtype}{int} sender1\_in = 1, sender2\_in = 2, sender3\_in = 3;
135     \textcolor{keyword}{const} \textcolor{keywordtype}{void} *sender\_out;
136     \textcolor{keywordtype}{int} id;
137     \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t} range\_reserved\_start;
138     \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\_t} range\_reserved\_count;
139     \textcolor{keywordtype}{int} probe\_packets\_detected, announce\_packets\_detected;
140     \hyperlink{parse_8c_a67a9885ef4908cb72ce26d75b694386c}{int64\_t} next\_delay;
141     \textcolor{keywordtype}{void} *packet\_data = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
142     \hyperlink{struct_m_a_a_p___packet}{MAAP\_Packet} packet\_contents;
143 
144     \textcolor{comment}{/* Initialize the Maap\_Client structure */}
145     memset(&mc, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___client}{Maap\_Client}));
146     mc.\hyperlink{struct_maap___client_a205a8c33627111589223916ef80462c2}{dest\_mac} = \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR};
147     mc.\hyperlink{struct_maap___client_ae2c98c9078f80f770e85f937c34da4eb}{src\_mac} = \hyperlink{maap__tests_8cpp_a63329935c6eb8edf3f3af5e11a4e1ec8}{TEST\_SRC\_ADDR};
148 
149     \textcolor{comment}{/* Initialize the range */}
150     \textcolor{comment}{/* We should receive exactly one notification of the initialization. */}
151     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_ab40b6b8a9d9c4269ef5deb0cb453e652}{maap\_init\_client}(&mc, &sender1\_in, range\_base\_addr, 
      range\_size));
152     sender\_out = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
153     memset(&mn, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___notify}{Maap\_Notify}));
154     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
155     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
156 
157     \textcolor{comment}{/* Reserve most of the range of addresses */}
158     \textcolor{keywordtype}{id} = \hyperlink{maap_8c_a0815c405656bea7b54ea61f23925da82}{maap\_reserve\_range}(&mc, &sender2\_in, 0, range\_size - 4);
159     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\textcolor{keywordtype}{id} > 0);
160 
161     \textcolor{comment}{/* Verify that we get an acquiring notification. */}
162     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
163     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender2\_in);
164     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea0f5d99d0f124fe7233cacefd53f26127}{MAAP\_NOTIFY\_ACQUIRING}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
165     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
166 
167     \textcolor{comment}{/* Verify that the reservation does not yet have a status */}
168     \hyperlink{maap_8c_a1f75df116573c750510198dda3dc69f3}{maap\_range\_status}(&mc, &sender1\_in, \textcolor{keywordtype}{id});
169     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
170     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender1\_in);
171     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea993b057f5516f007248e70006319c846}{MAAP\_NOTIFY\_STATUS}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
172     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
173     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start});
174     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
175     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808dda6e7e01cfe2e813ec310a2ad52a8a1a41}{MAAP\_NOTIFY\_ERROR\_RELEASE\_INVALID\_ID}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
176 
177     \textcolor{comment}{/* Handle any packets generated during the activity.}
178 \textcolor{comment}{     * Stop once we are notified of a result. */}
179     \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, -1, -1, -1, 0, 0);
180     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(4, probe\_packets\_detected);
181     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, announce\_packets\_detected);
182 
183     \textcolor{comment}{/* Verify that the notification indicated a successful reservation. */}
184     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender2\_in);
185     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea37a35b37b6f804ebc82248ae3ed110c6}{MAAP\_NOTIFY\_ACQUIRED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
186     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
187     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start} >= range\_base\_addr);
188     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start} + mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count} - 1 <= range\_base\_addr + range\_size - 1);
189     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_size - 4, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
190     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
191     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
192 
193     \textcolor{comment}{/* Save the results for use later. */}
194     range\_reserved\_start = mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start};
195     range\_reserved\_count = mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count};
196 
197 
198     \textcolor{comment}{/* Wait a while to see if an Announce is sent. */}
199     \textcolor{comment}{/* Verify that the wait is 30-32 seconds. */}
200     next\_delay = \hyperlink{maap_8c_ac4c7992b7ae19944422573787cdd8a87}{maap\_get\_delay\_to\_next\_timer}(&mc);
201     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(next\_delay > \hyperlink{maap_8h_a09241f10d014eafb56f0d6d6483303bc}{MAAP\_ANNOUNCE\_INTERVAL\_BASE} * 1000000LL);
202     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(next\_delay < (\hyperlink{maap_8h_a09241f10d014eafb56f0d6d6483303bc}{MAAP\_ANNOUNCE\_INTERVAL\_BASE} + 
      \hyperlink{maap_8h_a17327d088708951f7e28f64938423721}{MAAP\_ANNOUNCE\_INTERVAL\_VARIATION}) * 1000000LL);
203     \hyperlink{maap__timer__dummy_8c_ae19b2402ff50ae3e3689679f0b7bd6a5}{Time\_increaseNanos}(next\_delay);
204     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_aa1afbfc7f866343d5bd44b53325b4164}{maap\_handle\_timer}(&mc));
205     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
206     packet\_data = \hyperlink{maap__net_8c_aff8a3346e7beb052fe21a97a897318c1}{Net\_getNextQueuedPacket}(mc.\hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net});
207     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(packet\_data != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
208     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a32695149ad598bfdb071eb146926950b}{unpack\_maap}(&packet\_contents, (\textcolor{keyword}{const} 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *) packet\_data));
209     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(packet\_contents.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} == \hyperlink{maap__packet_8h_a1f3bb437d08b91177375d98db0ec96d6}{MAAP\_ANNOUNCE});
210     \hyperlink{maap__net_8c_aebee627140351b60d0b04cfe70c7f966}{Net\_freeQueuedPacket}(mc.\hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net}, packet\_data);
211 
212     \textcolor{comment}{/* More time passes.... */}
213     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\hyperlink{maap_8c_ac4c7992b7ae19944422573787cdd8a87}{maap\_get\_delay\_to\_next\_timer}(&mc) > 
      \hyperlink{maap_8h_a09241f10d014eafb56f0d6d6483303bc}{MAAP\_ANNOUNCE\_INTERVAL\_BASE} * 1000000LL);
214     \hyperlink{maap__timer__dummy_8c_ae19b2402ff50ae3e3689679f0b7bd6a5}{Time\_increaseNanos}(\hyperlink{maap_8h_a09241f10d014eafb56f0d6d6483303bc}{MAAP\_ANNOUNCE\_INTERVAL\_BASE} / 2 * 10000
      00LL);
215     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_aa1afbfc7f866343d5bd44b53325b4164}{maap\_handle\_timer}(&mc));
216     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\hyperlink{maap__net_8c_aff8a3346e7beb052fe21a97a897318c1}{Net\_getNextQueuedPacket}(mc.\hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net}) == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
217     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
218 
219 
220     \textcolor{comment}{/* Try another reasonable reservation.  It should fail, as there is not enough space available. */}
221     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(-1, \hyperlink{maap_8c_a0815c405656bea7b54ea61f23925da82}{maap\_reserve\_range}(&mc, &sender3\_in, 0, 10));
222 
223     \textcolor{comment}{/* We should receive exactly one notification of the reservation error. */}
224     sender\_out = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
225     memset(&mn, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___notify}{Maap\_Notify}));
226     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
227     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender3\_in);
228     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea37a35b37b6f804ebc82248ae3ed110c6}{MAAP\_NOTIFY\_ACQUIRED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
229     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(-1, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
230     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start});
231     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(10, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
232     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808dda24b41710d2d55527893f60cb2115eb48}{MAAP\_NOTIFY\_ERROR\_RESERVE\_NOT\_AVAILABLE}, 
      mn.\hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
233     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
234 
235 
236     \textcolor{comment}{/* Verify the status of our existing reservation */}
237     \hyperlink{maap_8c_a1f75df116573c750510198dda3dc69f3}{maap\_range\_status}(&mc, &sender1\_in, \textcolor{keywordtype}{id});
238     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
239     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender1\_in);
240     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea993b057f5516f007248e70006319c846}{MAAP\_NOTIFY\_STATUS}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
241     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
242     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_reserved\_start, mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start});
243     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_reserved\_count, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
244     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
245     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
246 
247 
248     \textcolor{comment}{/* Release the first reservation, and verify that we get one notification of the release. */}
249     \hyperlink{maap_8c_a417bfd5470da32b65311e94ee9ea2893}{maap\_release\_range}(&mc, &sender2\_in, \textcolor{keywordtype}{id});
250     sender\_out = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
251     memset(&mn, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___notify}{Maap\_Notify}));
252     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
253     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender2\_in);
254     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285eadcdf0612242dddc5976bc7eb80ae8813}{MAAP\_NOTIFY\_RELEASED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
255     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
256     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start} >= range\_base\_addr);
257     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start} + mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count} - 1 <= range\_base\_addr + range\_size - 1);
258     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_size - 4, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
259     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
260     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
261 
262 
263     \textcolor{comment}{/* Verify that the status of the reservation is invalid. */}
264     \hyperlink{maap_8c_a1f75df116573c750510198dda3dc69f3}{maap\_range\_status}(&mc, &sender1\_in, \textcolor{keywordtype}{id});
265     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
266     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender1\_in);
267     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea993b057f5516f007248e70006319c846}{MAAP\_NOTIFY\_STATUS}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
268     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
269     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start});
270     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
271     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808dda6e7e01cfe2e813ec310a2ad52a8a1a41}{MAAP\_NOTIFY\_ERROR\_RELEASE\_INVALID\_ID}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
272     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
273 
274 
275     \textcolor{comment}{/* Try our reasonable reservation again.  Supply a preferred address. */}
276     \textcolor{keywordtype}{id} = \hyperlink{maap_8c_a0815c405656bea7b54ea61f23925da82}{maap\_reserve\_range}(&mc, &sender3\_in, range\_base\_addr + 100, 10);
277     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\textcolor{keywordtype}{id} > 0);
278 
279     \textcolor{comment}{/* Handle any packets generated during the activity.}
280 \textcolor{comment}{     * Stop once we are notified of a result. */}
281     \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, -1, -1, -1, 0, 0);
282     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(4, probe\_packets\_detected);
283     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, announce\_packets\_detected);
284 
285     \textcolor{comment}{/* Verify that the notification indicated a successful reservation at the preferred address. */}
286     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender3\_in);
287     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea37a35b37b6f804ebc82248ae3ed110c6}{MAAP\_NOTIFY\_ACQUIRED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
288     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
289     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_base\_addr + 100, mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start});
290     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(10, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
291     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
292     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
293 
294     \textcolor{comment}{/* Save the results for use later. */}
295     range\_reserved\_start = mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start};
296     range\_reserved\_count = mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count};
297 
298 
299     \textcolor{comment}{/* Release the reservation. */}
300     \hyperlink{maap_8c_a417bfd5470da32b65311e94ee9ea2893}{maap\_release\_range}(&mc, &sender3\_in, \textcolor{keywordtype}{id});
301     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
302     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender3\_in);
303     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285eadcdf0612242dddc5976bc7eb80ae8813}{MAAP\_NOTIFY\_RELEASED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
304     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
305     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_reserved\_start, mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start});
306     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_reserved\_count, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
307     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
308     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
309     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\hyperlink{maap__net_8c_aff8a3346e7beb052fe21a97a897318c1}{Net\_getNextQueuedPacket}(mc.\hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net}) == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
310 
311     \textcolor{comment}{/* Verify that no additional announce packets are sent. */}
312     \hyperlink{maap__timer__dummy_8c_ae19b2402ff50ae3e3689679f0b7bd6a5}{Time\_increaseNanos}((\hyperlink{maap_8h_a09241f10d014eafb56f0d6d6483303bc}{MAAP\_ANNOUNCE\_INTERVAL\_BASE} + 
      \hyperlink{maap_8h_a17327d088708951f7e28f64938423721}{MAAP\_ANNOUNCE\_INTERVAL\_VARIATION}) * 1000000ull);
313     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
314     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\hyperlink{maap__net_8c_aff8a3346e7beb052fe21a97a897318c1}{Net\_getNextQueuedPacket}(mc.\hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net}) == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
315 
316     \textcolor{comment}{/* We are done with the Maap\_Client structure */}
317     \hyperlink{maap_8c_abb26ec0dca0b97acd80b602bcfc2179a}{maap\_deinit\_client}(&mc);
318 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{maap__tests_8cpp_a48e0a53be0d8b5901c7f2970ed489ae4_cgraph}
\end{center}
\end{figure}


\index{maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}}
\subsubsection[{\texorpdfstring{T\+E\+S\+T(maap\+\_\+group, Probing\+\_\+vs\+\_\+\+Probes)}{TEST(maap_group, Probing_vs_Probes)}}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{maap\+\_\+group}]{, }
\item[{Probing\+\_\+vs\+\_\+\+Probes}]{}
\end{DoxyParamCaption}
)}\hypertarget{maap__tests_8cpp_aa4c6d5bd521395b615cde85870846a23}{}\label{maap__tests_8cpp_aa4c6d5bd521395b615cde85870846a23}


maap\+\_\+tests.\+cpp 파일의 320 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
321 \{
322     \textcolor{keyword}{const} \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t} range\_base\_addr = \hyperlink{maap_8h_ae6263079f02d6fcdb18350e93b5e8fd9}{MAAP\_DYNAMIC\_POOL\_BASE};
323     \textcolor{keyword}{const} \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\_t} range\_size = \hyperlink{maap_8h_a27db04878ffebe92dbbcbae7e7c5d447}{MAAP\_DYNAMIC\_POOL\_SIZE};
324     \hyperlink{struct_maap___client}{Maap\_Client} mc;
325     \hyperlink{struct_maap___notify}{Maap\_Notify} mn;
326     \textcolor{keyword}{const} \textcolor{keywordtype}{int} sender1\_in = 1, sender2\_in = 2;
327     \textcolor{keyword}{const} \textcolor{keywordtype}{void} *sender\_out;
328     \textcolor{keywordtype}{int} id;
329     \textcolor{keywordtype}{int} probe\_packets\_detected, announce\_packets\_detected;
330 
331     \textcolor{comment}{/* Initialize the Maap\_Client structure */}
332     memset(&mc, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___client}{Maap\_Client}));
333     mc.\hyperlink{struct_maap___client_a205a8c33627111589223916ef80462c2}{dest\_mac} = \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR};
334     mc.\hyperlink{struct_maap___client_ae2c98c9078f80f770e85f937c34da4eb}{src\_mac} = \hyperlink{maap__tests_8cpp_a63329935c6eb8edf3f3af5e11a4e1ec8}{TEST\_SRC\_ADDR};
335 
336     \textcolor{comment}{/* Initialize the range */}
337     \textcolor{comment}{/* We should receive exactly one notification of the initialization. */}
338     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_ab40b6b8a9d9c4269ef5deb0cb453e652}{maap\_init\_client}(&mc, &sender1\_in, range\_base\_addr, 
      range\_size));
339     sender\_out = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
340     memset(&mn, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___notify}{Maap\_Notify}));
341     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
342     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
343 
344     \textcolor{comment}{/* Try to reserve a block of addresses. */}
345     \textcolor{keywordtype}{id} = \hyperlink{maap_8c_a0815c405656bea7b54ea61f23925da82}{maap\_reserve\_range}(&mc, &sender2\_in, 0, 10);
346     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\textcolor{keywordtype}{id} > 0);
347 
348     \textcolor{comment}{/* Fake a Probe packet we must defer to after the first probe. */}
349     \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, 1, -1, -1, \hyperlink{maap__tests_8cpp_a3e8161597923401b934507d7565c93d8}{TEST\_REMOTE\_ADDR\_LOWER}, 1);
350     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, probe\_packets\_detected);
351     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, announce\_packets\_detected);
352 
353     \textcolor{comment}{/* We should not have a notification yet. */}
354     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
355 
356     \textcolor{comment}{/* Handle the Acquiring message. */}
357     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
358     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea0f5d99d0f124fe7233cacefd53f26127}{MAAP\_NOTIFY\_ACQUIRING}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
359 
360     \textcolor{comment}{/* Fake a Probe packet we must defer to after the third probe. */}
361     \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, 3, -1, -1, \hyperlink{maap__tests_8cpp_a3e8161597923401b934507d7565c93d8}{TEST\_REMOTE\_ADDR\_LOWER}, 3);
362     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(3, probe\_packets\_detected);
363     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, announce\_packets\_detected);
364 
365     \textcolor{comment}{/* We should not have a notification yet. */}
366     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
367 
368     \textcolor{comment}{/* Handle the Acquiring message. */}
369     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
370     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea0f5d99d0f124fe7233cacefd53f26127}{MAAP\_NOTIFY\_ACQUIRING}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
371 
372     \textcolor{comment}{/* Fake a Probe packet we should ignore after the second probe. */}
373     \textcolor{comment}{/* This attempt should succeed. */}
374     \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, 2, -1, -1, \hyperlink{maap__tests_8cpp_a963c488aaeabc0c167b60b01b334dce5}{TEST\_REMOTE\_ADDR\_HIGHER}, 0);
375     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(4, probe\_packets\_detected);
376     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, announce\_packets\_detected);
377 
378     \textcolor{comment}{/* Verify that the notification indicated a successful reservation. */}
379     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender2\_in);
380     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea37a35b37b6f804ebc82248ae3ed110c6}{MAAP\_NOTIFY\_ACQUIRED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
381     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
382     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start} >= range\_base\_addr);
383     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start} + mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count} - 1 <= range\_base\_addr + range\_size - 1);
384     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(10, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
385     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
386     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
387 
388 
389     \textcolor{comment}{/* We are done with the Maap\_Client structure */}
390     \hyperlink{maap_8c_abb26ec0dca0b97acd80b602bcfc2179a}{maap\_deinit\_client}(&mc);
391 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{maap__tests_8cpp_aa4c6d5bd521395b615cde85870846a23_cgraph}
\end{center}
\end{figure}


\index{maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}}
\subsubsection[{\texorpdfstring{T\+E\+S\+T(maap\+\_\+group, Probing\+\_\+vs\+\_\+\+Announces)}{TEST(maap_group, Probing_vs_Announces)}}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{maap\+\_\+group}]{, }
\item[{Probing\+\_\+vs\+\_\+\+Announces}]{}
\end{DoxyParamCaption}
)}\hypertarget{maap__tests_8cpp_a63028acba0f0926bf78f39748180dcc5}{}\label{maap__tests_8cpp_a63028acba0f0926bf78f39748180dcc5}


maap\+\_\+tests.\+cpp 파일의 393 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
394 \{
395     \textcolor{keyword}{const} \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t} range\_base\_addr = \hyperlink{maap_8h_ae6263079f02d6fcdb18350e93b5e8fd9}{MAAP\_DYNAMIC\_POOL\_BASE};
396     \textcolor{keyword}{const} \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\_t} range\_size = \hyperlink{maap_8h_a27db04878ffebe92dbbcbae7e7c5d447}{MAAP\_DYNAMIC\_POOL\_SIZE};
397     \hyperlink{struct_maap___client}{Maap\_Client} mc;
398     \hyperlink{struct_maap___notify}{Maap\_Notify} mn;
399     \textcolor{keyword}{const} \textcolor{keywordtype}{int} sender1\_in = 1, sender2\_in = 2;
400     \textcolor{keyword}{const} \textcolor{keywordtype}{void} *sender\_out;
401     \textcolor{keywordtype}{int} id;
402     \textcolor{keywordtype}{int} probe\_packets\_detected, announce\_packets\_detected;
403 
404     \textcolor{comment}{/* Initialize the Maap\_Client structure */}
405     memset(&mc, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___client}{Maap\_Client}));
406     mc.\hyperlink{struct_maap___client_a205a8c33627111589223916ef80462c2}{dest\_mac} = \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR};
407     mc.\hyperlink{struct_maap___client_ae2c98c9078f80f770e85f937c34da4eb}{src\_mac} = \hyperlink{maap__tests_8cpp_a63329935c6eb8edf3f3af5e11a4e1ec8}{TEST\_SRC\_ADDR};
408 
409     \textcolor{comment}{/* Initialize the range */}
410     \textcolor{comment}{/* We should receive exactly one notification of the initialization. */}
411     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_ab40b6b8a9d9c4269ef5deb0cb453e652}{maap\_init\_client}(&mc, &sender1\_in, range\_base\_addr, 
      range\_size));
412     sender\_out = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
413     memset(&mn, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___notify}{Maap\_Notify}));
414     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
415     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
416 
417 
418     \textcolor{comment}{/* Try to reserve a block of addresses. */}
419     \textcolor{keywordtype}{id} = \hyperlink{maap_8c_a0815c405656bea7b54ea61f23925da82}{maap\_reserve\_range}(&mc, &sender2\_in, 0, 10);
420     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\textcolor{keywordtype}{id} > 0);
421 
422     \textcolor{comment}{/* Fake an Announce packet after the first probe. */}
423     \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, -1, 1, -1, \hyperlink{maap__tests_8cpp_a963c488aaeabc0c167b60b01b334dce5}{TEST\_REMOTE\_ADDR\_HIGHER}, 1);
424     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, probe\_packets\_detected);
425     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, announce\_packets\_detected);
426 
427     \textcolor{comment}{/* We should not have a notification yet. */}
428     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
429 
430     \textcolor{comment}{/* Handle the Acquiring message. */}
431     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
432     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea0f5d99d0f124fe7233cacefd53f26127}{MAAP\_NOTIFY\_ACQUIRING}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
433 
434     \textcolor{comment}{/* Fake an Announce packet after the third probe. */}
435     \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, -1, 3, -1, \hyperlink{maap__tests_8cpp_a3e8161597923401b934507d7565c93d8}{TEST\_REMOTE\_ADDR\_LOWER}, 3);
436     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(3, probe\_packets\_detected);
437     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, announce\_packets\_detected);
438 
439     \textcolor{comment}{/* We should not have a notification yet. */}
440     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
441 
442     \textcolor{comment}{/* Handle the Acquiring message. */}
443     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
444     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea0f5d99d0f124fe7233cacefd53f26127}{MAAP\_NOTIFY\_ACQUIRING}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
445 
446     \textcolor{comment}{/* Allow this attempt to succeed. */}
447     \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, -1, -1, -1, 0, 0);
448     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(4, probe\_packets\_detected);
449     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, announce\_packets\_detected);
450 
451     \textcolor{comment}{/* Verify that the notification indicated a successful reservation. */}
452     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender2\_in);
453     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea37a35b37b6f804ebc82248ae3ed110c6}{MAAP\_NOTIFY\_ACQUIRED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
454     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
455     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start} >= range\_base\_addr);
456     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start} + mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count} - 1 <= range\_base\_addr + range\_size - 1);
457     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(10, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
458     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
459     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
460 
461 
462     \textcolor{comment}{/* We are done with the Maap\_Client structure */}
463     \hyperlink{maap_8c_abb26ec0dca0b97acd80b602bcfc2179a}{maap\_deinit\_client}(&mc);
464 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{maap__tests_8cpp_a63028acba0f0926bf78f39748180dcc5_cgraph}
\end{center}
\end{figure}


\index{maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}}
\subsubsection[{\texorpdfstring{T\+E\+S\+T(maap\+\_\+group, Probing\+\_\+vs\+\_\+\+Defends)}{TEST(maap_group, Probing_vs_Defends)}}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{maap\+\_\+group}]{, }
\item[{Probing\+\_\+vs\+\_\+\+Defends}]{}
\end{DoxyParamCaption}
)}\hypertarget{maap__tests_8cpp_a1657279d4cfdbcb6caf87e01c920a36d}{}\label{maap__tests_8cpp_a1657279d4cfdbcb6caf87e01c920a36d}


maap\+\_\+tests.\+cpp 파일의 466 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
467 \{
468     \textcolor{keyword}{const} \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t} range\_base\_addr = \hyperlink{maap_8h_ae6263079f02d6fcdb18350e93b5e8fd9}{MAAP\_DYNAMIC\_POOL\_BASE};
469     \textcolor{keyword}{const} \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\_t} range\_size = \hyperlink{maap_8h_a27db04878ffebe92dbbcbae7e7c5d447}{MAAP\_DYNAMIC\_POOL\_SIZE};
470     \hyperlink{struct_maap___client}{Maap\_Client} mc;
471     \hyperlink{struct_maap___notify}{Maap\_Notify} mn;
472     \textcolor{keyword}{const} \textcolor{keywordtype}{int} sender1\_in = 1, sender2\_in = 2;
473     \textcolor{keyword}{const} \textcolor{keywordtype}{void} *sender\_out;
474     \textcolor{keywordtype}{int} id;
475     \textcolor{keywordtype}{int} probe\_packets\_detected, announce\_packets\_detected;
476 
477     \textcolor{comment}{/* Initialize the Maap\_Client structure */}
478     memset(&mc, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___client}{Maap\_Client}));
479     mc.\hyperlink{struct_maap___client_a205a8c33627111589223916ef80462c2}{dest\_mac} = \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR};
480     mc.\hyperlink{struct_maap___client_ae2c98c9078f80f770e85f937c34da4eb}{src\_mac} = \hyperlink{maap__tests_8cpp_a63329935c6eb8edf3f3af5e11a4e1ec8}{TEST\_SRC\_ADDR};
481 
482     \textcolor{comment}{/* Initialize the range */}
483     \textcolor{comment}{/* We should receive exactly one notification of the initialization. */}
484     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_ab40b6b8a9d9c4269ef5deb0cb453e652}{maap\_init\_client}(&mc, &sender1\_in, range\_base\_addr, 
      range\_size));
485     sender\_out = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
486     memset(&mn, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___notify}{Maap\_Notify}));
487     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
488     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
489 
490 
491     \textcolor{comment}{/* Try to reserve a block of addresses. */}
492     \textcolor{keywordtype}{id} = \hyperlink{maap_8c_a0815c405656bea7b54ea61f23925da82}{maap\_reserve\_range}(&mc, &sender2\_in, 0, 10);
493     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\textcolor{keywordtype}{id} > 0);
494 
495     \textcolor{comment}{/* Fake a Defend packet after the first probe. */}
496     \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, -1, -1, 1, \hyperlink{maap__tests_8cpp_a3e8161597923401b934507d7565c93d8}{TEST\_REMOTE\_ADDR\_LOWER}, 1);
497     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, probe\_packets\_detected);
498     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, announce\_packets\_detected);
499 
500     \textcolor{comment}{/* We should not have a notification yet. */}
501     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
502 
503     \textcolor{comment}{/* Handle the Acquiring message. */}
504     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
505     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea0f5d99d0f124fe7233cacefd53f26127}{MAAP\_NOTIFY\_ACQUIRING}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
506 
507     \textcolor{comment}{/* Fake a Defend packet after the third probe. */}
508     \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, -1, -1, 3, \hyperlink{maap__tests_8cpp_a963c488aaeabc0c167b60b01b334dce5}{TEST\_REMOTE\_ADDR\_HIGHER}, 3);
509     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(3, probe\_packets\_detected);
510     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, announce\_packets\_detected);
511 
512     \textcolor{comment}{/* We should not have a notification yet. */}
513     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
514 
515     \textcolor{comment}{/* Handle the Acquiring message. */}
516     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
517     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea0f5d99d0f124fe7233cacefd53f26127}{MAAP\_NOTIFY\_ACQUIRING}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
518 
519     \textcolor{comment}{/* Allow this attempt to succeed. */}
520     \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, -1, -1, -1, 0, 0);
521     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(4, probe\_packets\_detected);
522     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, announce\_packets\_detected);
523 
524     \textcolor{comment}{/* Verify that the notification indicated a successful reservation. */}
525     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender2\_in);
526     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea37a35b37b6f804ebc82248ae3ed110c6}{MAAP\_NOTIFY\_ACQUIRED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
527     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
528     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start} >= range\_base\_addr);
529     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start} + mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count} - 1 <= range\_base\_addr + range\_size - 1);
530     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(10, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
531     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
532     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
533 
534 
535     \textcolor{comment}{/* We are done with the Maap\_Client structure */}
536     \hyperlink{maap_8c_abb26ec0dca0b97acd80b602bcfc2179a}{maap\_deinit\_client}(&mc);
537 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{maap__tests_8cpp_a1657279d4cfdbcb6caf87e01c920a36d_cgraph}
\end{center}
\end{figure}


\index{maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}}
\subsubsection[{\texorpdfstring{T\+E\+S\+T(maap\+\_\+group, Defending\+\_\+vs\+\_\+\+Probes)}{TEST(maap_group, Defending_vs_Probes)}}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{maap\+\_\+group}]{, }
\item[{Defending\+\_\+vs\+\_\+\+Probes}]{}
\end{DoxyParamCaption}
)}\hypertarget{maap__tests_8cpp_a3135bbc68e3af121520c961b2054a38e}{}\label{maap__tests_8cpp_a3135bbc68e3af121520c961b2054a38e}


maap\+\_\+tests.\+cpp 파일의 539 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
540 \{
541     \textcolor{keyword}{const} \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t} range\_base\_addr = \hyperlink{maap_8h_ae6263079f02d6fcdb18350e93b5e8fd9}{MAAP\_DYNAMIC\_POOL\_BASE};
542     \textcolor{keyword}{const} \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\_t} range\_size = \hyperlink{maap_8h_a27db04878ffebe92dbbcbae7e7c5d447}{MAAP\_DYNAMIC\_POOL\_SIZE};
543     \hyperlink{struct_maap___client}{Maap\_Client} mc;
544     \hyperlink{struct_maap___notify}{Maap\_Notify} mn;
545     \textcolor{keyword}{const} \textcolor{keywordtype}{int} sender1\_in = 1, sender2\_in = 2, sender3\_in = 3;
546     \textcolor{keyword}{const} \textcolor{keywordtype}{void} *sender\_out;
547     \textcolor{keywordtype}{int} id;
548     \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t} range\_reserved\_start;
549     \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\_t} range\_reserved\_count;
550     \textcolor{keywordtype}{int} probe\_packets\_detected, announce\_packets\_detected;
551     \textcolor{keywordtype}{void} *packet\_data = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
552     \hyperlink{struct_m_a_a_p___packet}{MAAP\_Packet} packet\_contents;
553     \hyperlink{struct_m_a_a_p___packet}{MAAP\_Packet} probe\_packet;
554     \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} probe\_buffer[\hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE}];
555 
556     \textcolor{comment}{/* Initialize the Maap\_Client structure */}
557     memset(&mc, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___client}{Maap\_Client}));
558     mc.\hyperlink{struct_maap___client_a205a8c33627111589223916ef80462c2}{dest\_mac} = \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR};
559     mc.\hyperlink{struct_maap___client_ae2c98c9078f80f770e85f937c34da4eb}{src\_mac} = \hyperlink{maap__tests_8cpp_a63329935c6eb8edf3f3af5e11a4e1ec8}{TEST\_SRC\_ADDR};
560 
561     \textcolor{comment}{/* Initialize the range */}
562     \textcolor{comment}{/* We should receive exactly one notification of the initialization. */}
563     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_ab40b6b8a9d9c4269ef5deb0cb453e652}{maap\_init\_client}(&mc, &sender1\_in, range\_base\_addr, 
      range\_size));
564     sender\_out = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
565     memset(&mn, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___notify}{Maap\_Notify}));
566     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
567     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
568 
569     \textcolor{comment}{/* Reserve a block of addresses. */}
570     \textcolor{keywordtype}{id} = \hyperlink{maap_8c_a0815c405656bea7b54ea61f23925da82}{maap\_reserve\_range}(&mc, &sender2\_in, 0, 10);
571     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\textcolor{keywordtype}{id} > 0);
572     \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, -1, -1, -1, 0, 0);
573     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(4, probe\_packets\_detected);
574     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, announce\_packets\_detected);
575     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea37a35b37b6f804ebc82248ae3ed110c6}{MAAP\_NOTIFY\_ACQUIRED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
576     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
577     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
578 
579     \textcolor{comment}{/* Save the results for use later. */}
580     range\_reserved\_start = mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start};
581     range\_reserved\_count = mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count};
582 
583 
584     \textcolor{comment}{/* Fake a probe request that conflicts with the start of our range. */}
585     \hyperlink{maap__packet_8c_a9063c2879e9df1c7c1164ff761f19b0d}{init\_packet}(&probe\_packet, \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR}, 
      \hyperlink{maap__tests_8cpp_a963c488aaeabc0c167b60b01b334dce5}{TEST\_REMOTE\_ADDR\_HIGHER});
586     probe\_packet.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} = \hyperlink{maap__packet_8h_a453ba2e1458fdbd8cddf68943d5ecc94}{MAAP\_PROBE};
587     probe\_packet.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} = range\_reserved\_start - 4; \textcolor{comment}{/* Use the
       start of our range. */}
588     probe\_packet.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} = 5;
589     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a219a9cbe130aa9f2aeb60e962cc0bee7}{pack\_maap}(&probe\_packet, probe\_buffer));
590     \hyperlink{maap_8c_a7807b60e9a515b68da136756773bd576}{maap\_handle\_packet}(&mc, probe\_buffer, \hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE});
591 
592     \textcolor{comment}{/* Verify that we defended our range. */}
593     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_aa1afbfc7f866343d5bd44b53325b4164}{maap\_handle\_timer}(&mc));
594     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
595     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}((packet\_data = \hyperlink{maap__net_8c_aff8a3346e7beb052fe21a97a897318c1}{Net\_getNextQueuedPacket}(mc.
      \hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net})) != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
596     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a32695149ad598bfdb071eb146926950b}{unpack\_maap}(&packet\_contents, (\textcolor{keyword}{const} 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *) packet\_data));
597     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(packet\_contents.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} == \hyperlink{maap__packet_8h_ac9b42f0f7f08abebfa62a425fc3c073b}{MAAP\_DEFEND});
598     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(packet\_contents.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} == probe\_packet.
      \hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address});
599     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(packet\_contents.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} == probe\_packet.
      \hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count});
600     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(packet\_contents.\hyperlink{struct_m_a_a_p___packet_a75c1b7fade099765ff29a3302e3ad072}{conflict\_start\_address} == range\_reserved\_start);
601     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(packet\_contents.\hyperlink{struct_m_a_a_p___packet_a7454bb2b51c745c38822d008f1a322a1}{conflict\_count} == 1); \textcolor{comment}{/* Only one address conflicts */}
602     \hyperlink{maap__net_8c_aebee627140351b60d0b04cfe70c7f966}{Net\_freeQueuedPacket}(mc.\hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net}, packet\_data);
603 
604     \textcolor{comment}{/* Verify the logging. */}
605     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(strcmp(\hyperlink{maap__log__dummy_8c_a6bb9be7dbe5de54c49881ed2e36d3d16}{Logging\_getLastTag}(), \textcolor{stringliteral}{"INFO"}) == 0);
606     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(strcmp(\hyperlink{maap__log__dummy_8c_a309ca337ea3709fab361d35b4595efaa}{Logging\_getLastMessage}(), \textcolor{stringliteral}{"DEFEND!"}) == 0);
607 
608 
609     \textcolor{comment}{/* Fake a probe request that conflicts with the end of our range. */}
610     probe\_packet.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} = range\_reserved\_start + 
      range\_reserved\_count - 1; \textcolor{comment}{/* Use the end of our range. */}
611     probe\_packet.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} = 5;
612     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a219a9cbe130aa9f2aeb60e962cc0bee7}{pack\_maap}(&probe\_packet, probe\_buffer));
613     \hyperlink{maap_8c_a7807b60e9a515b68da136756773bd576}{maap\_handle\_packet}(&mc, probe\_buffer, \hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE});
614 
615     \textcolor{comment}{/* Verify that we defended our range. */}
616     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_aa1afbfc7f866343d5bd44b53325b4164}{maap\_handle\_timer}(&mc));
617     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
618     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}((packet\_data = \hyperlink{maap__net_8c_aff8a3346e7beb052fe21a97a897318c1}{Net\_getNextQueuedPacket}(mc.
      \hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net})) != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
619     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a32695149ad598bfdb071eb146926950b}{unpack\_maap}(&packet\_contents, (\textcolor{keyword}{const} 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *) packet\_data));
620     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(packet\_contents.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} == \hyperlink{maap__packet_8h_ac9b42f0f7f08abebfa62a425fc3c073b}{MAAP\_DEFEND});
621     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(packet\_contents.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} == probe\_packet.
      \hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address});
622     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(packet\_contents.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} == probe\_packet.
      \hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count});
623     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(packet\_contents.\hyperlink{struct_m_a_a_p___packet_a75c1b7fade099765ff29a3302e3ad072}{conflict\_start\_address} == probe\_packet.
      \hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address});
624     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(packet\_contents.\hyperlink{struct_m_a_a_p___packet_a7454bb2b51c745c38822d008f1a322a1}{conflict\_count} == 1); \textcolor{comment}{/* Only one address conflicts */}
625     \hyperlink{maap__net_8c_aebee627140351b60d0b04cfe70c7f966}{Net\_freeQueuedPacket}(mc.\hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net}, packet\_data);
626 
627     \textcolor{comment}{/* Verify the logging. */}
628     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(strcmp(\hyperlink{maap__log__dummy_8c_a6bb9be7dbe5de54c49881ed2e36d3d16}{Logging\_getLastTag}(), \textcolor{stringliteral}{"INFO"}) == 0);
629     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(strcmp(\hyperlink{maap__log__dummy_8c_a309ca337ea3709fab361d35b4595efaa}{Logging\_getLastMessage}(), \textcolor{stringliteral}{"DEFEND!"}) == 0);
630 
631 
632     \textcolor{comment}{/* Try some probe requests adjacent to, but not overlapping, our range. */}
633     probe\_packet.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} = range\_reserved\_start - 5; \textcolor{comment}{/* Before the
       start of our range. */}
634     probe\_packet.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} = 5;
635     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a219a9cbe130aa9f2aeb60e962cc0bee7}{pack\_maap}(&probe\_packet, probe\_buffer));
636     \hyperlink{maap_8c_a7807b60e9a515b68da136756773bd576}{maap\_handle\_packet}(&mc, probe\_buffer, \hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE});
637     probe\_packet.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} = range\_reserved\_start + 
      range\_reserved\_count; \textcolor{comment}{/* After the end of our range. */}
638     probe\_packet.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} = 5;
639     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a219a9cbe130aa9f2aeb60e962cc0bee7}{pack\_maap}(&probe\_packet, probe\_buffer));
640     \hyperlink{maap_8c_a7807b60e9a515b68da136756773bd576}{maap\_handle\_packet}(&mc, probe\_buffer, \hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE});
641 
642     \textcolor{comment}{/* Verify that we didn't defend our range. */}
643     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_aa1afbfc7f866343d5bd44b53325b4164}{maap\_handle\_timer}(&mc));
644     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
645     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}((packet\_data = \hyperlink{maap__net_8c_aff8a3346e7beb052fe21a97a897318c1}{Net\_getNextQueuedPacket}(mc.
      \hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net})) == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
646 
647 
648     \textcolor{comment}{/* Verify that the status of the range is valid. */}
649     \hyperlink{maap_8c_a1f75df116573c750510198dda3dc69f3}{maap\_range\_status}(&mc, &sender3\_in, \textcolor{keywordtype}{id});
650     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
651     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender3\_in);
652     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea993b057f5516f007248e70006319c846}{MAAP\_NOTIFY\_STATUS}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
653     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
654     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_reserved\_start, mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start});
655     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_reserved\_count, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
656     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
657 
658 
659     \textcolor{comment}{/* We are done with the Maap\_Client structure */}
660     \hyperlink{maap_8c_abb26ec0dca0b97acd80b602bcfc2179a}{maap\_deinit\_client}(&mc);
661 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{maap__tests_8cpp_a3135bbc68e3af121520c961b2054a38e_cgraph}
\end{center}
\end{figure}


\index{maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}}
\subsubsection[{\texorpdfstring{T\+E\+S\+T(maap\+\_\+group, Defending\+\_\+vs\+\_\+\+Announces)}{TEST(maap_group, Defending_vs_Announces)}}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{maap\+\_\+group}]{, }
\item[{Defending\+\_\+vs\+\_\+\+Announces}]{}
\end{DoxyParamCaption}
)}\hypertarget{maap__tests_8cpp_a50e969486d3685760ff25bbd2d2212c0}{}\label{maap__tests_8cpp_a50e969486d3685760ff25bbd2d2212c0}


maap\+\_\+tests.\+cpp 파일의 663 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
664 \{
665     \textcolor{keyword}{const} \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t} range\_base\_addr = \hyperlink{maap_8h_ae6263079f02d6fcdb18350e93b5e8fd9}{MAAP\_DYNAMIC\_POOL\_BASE};
666     \textcolor{keyword}{const} \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\_t} range\_size = \hyperlink{maap_8h_a27db04878ffebe92dbbcbae7e7c5d447}{MAAP\_DYNAMIC\_POOL\_SIZE};
667     \hyperlink{struct_maap___client}{Maap\_Client} mc;
668     \hyperlink{struct_maap___notify}{Maap\_Notify} mn;
669     \textcolor{keyword}{const} \textcolor{keywordtype}{int} sender1\_in = 1, sender2\_in = 2, sender3\_in = 3;
670     \textcolor{keyword}{const} \textcolor{keywordtype}{void} *sender\_out;
671     \textcolor{keywordtype}{int} id;
672     \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t} range\_reserved\_start;
673     \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\_t} range\_reserved\_count;
674     \textcolor{keywordtype}{int} probe\_packets\_detected, announce\_packets\_detected;
675     \textcolor{keywordtype}{void} *packet\_data = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
676     \hyperlink{struct_m_a_a_p___packet}{MAAP\_Packet} announce\_packet;
677     \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} announce\_buffer[\hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE}];
678 
679     \textcolor{comment}{/* Initialize the Maap\_Client structure */}
680     memset(&mc, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___client}{Maap\_Client}));
681     mc.\hyperlink{struct_maap___client_a205a8c33627111589223916ef80462c2}{dest\_mac} = \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR};
682     mc.\hyperlink{struct_maap___client_ae2c98c9078f80f770e85f937c34da4eb}{src\_mac} = \hyperlink{maap__tests_8cpp_a63329935c6eb8edf3f3af5e11a4e1ec8}{TEST\_SRC\_ADDR};
683 
684     \textcolor{comment}{/* Initialize the range */}
685     \textcolor{comment}{/* We should receive exactly one notification of the initialization. */}
686     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_ab40b6b8a9d9c4269ef5deb0cb453e652}{maap\_init\_client}(&mc, &sender1\_in, range\_base\_addr, 
      range\_size));
687     sender\_out = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
688     memset(&mn, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___notify}{Maap\_Notify}));
689     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
690     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
691 
692     \textcolor{comment}{/* Reserve a block of addresses. */}
693     \textcolor{keywordtype}{id} = \hyperlink{maap_8c_a0815c405656bea7b54ea61f23925da82}{maap\_reserve\_range}(&mc, &sender2\_in, 0, 10);
694     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\textcolor{keywordtype}{id} > 0);
695     \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, -1, -1, -1, 0, 0);
696     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(4, probe\_packets\_detected);
697     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, announce\_packets\_detected);
698     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea37a35b37b6f804ebc82248ae3ed110c6}{MAAP\_NOTIFY\_ACQUIRED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
699     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
700     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
701 
702     \textcolor{comment}{/* Save the results for use later. */}
703     range\_reserved\_start = mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start};
704     range\_reserved\_count = mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count};
705 
706 
707     \textcolor{comment}{/* Try some announcements adjacent to, but not overlapping, our range. */}
708     \hyperlink{maap__packet_8c_a9063c2879e9df1c7c1164ff761f19b0d}{init\_packet}(&announce\_packet, \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR}, 
      \hyperlink{maap__tests_8cpp_a3e8161597923401b934507d7565c93d8}{TEST\_REMOTE\_ADDR\_LOWER});
709     announce\_packet.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} = \hyperlink{maap__packet_8h_a1f3bb437d08b91177375d98db0ec96d6}{MAAP\_ANNOUNCE};
710     announce\_packet.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} = range\_reserved\_start - 5; \textcolor{comment}{/* Before
       the start of our range. */}
711     announce\_packet.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} = 5;
712     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a219a9cbe130aa9f2aeb60e962cc0bee7}{pack\_maap}(&announce\_packet, announce\_buffer));
713     \hyperlink{maap_8c_a7807b60e9a515b68da136756773bd576}{maap\_handle\_packet}(&mc, announce\_buffer, 
      \hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE});
714     announce\_packet.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} = range\_reserved\_start + 
      range\_reserved\_count; \textcolor{comment}{/* After the end of our range. */}
715     announce\_packet.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} = 5;
716     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a219a9cbe130aa9f2aeb60e962cc0bee7}{pack\_maap}(&announce\_packet, announce\_buffer));
717     \hyperlink{maap_8c_a7807b60e9a515b68da136756773bd576}{maap\_handle\_packet}(&mc, announce\_buffer, 
      \hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE});
718 
719     \textcolor{comment}{/* Try an announcement that overlaps our range, but from an address we should ignore. */}
720     \hyperlink{maap__packet_8c_a9063c2879e9df1c7c1164ff761f19b0d}{init\_packet}(&announce\_packet, \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR}, 
      \hyperlink{maap__tests_8cpp_a963c488aaeabc0c167b60b01b334dce5}{TEST\_REMOTE\_ADDR\_HIGHER});
721     announce\_packet.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} = \hyperlink{maap__packet_8h_a1f3bb437d08b91177375d98db0ec96d6}{MAAP\_ANNOUNCE};
722     announce\_packet.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} = range\_reserved\_start - 2; \textcolor{comment}{/* Overlap
       the start of our range. */}
723     announce\_packet.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} = 5;
724     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a219a9cbe130aa9f2aeb60e962cc0bee7}{pack\_maap}(&announce\_packet, announce\_buffer));
725     \hyperlink{maap_8c_a7807b60e9a515b68da136756773bd576}{maap\_handle\_packet}(&mc, announce\_buffer, 
      \hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE});
726 
727     \textcolor{comment}{/* Verify that we didn't react. */}
728     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_aa1afbfc7f866343d5bd44b53325b4164}{maap\_handle\_timer}(&mc));
729     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
730     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}((packet\_data = \hyperlink{maap__net_8c_aff8a3346e7beb052fe21a97a897318c1}{Net\_getNextQueuedPacket}(mc.
      \hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net})) == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
731 
732     \textcolor{comment}{/* Verify the logging. */}
733     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(strcmp(\hyperlink{maap__log__dummy_8c_a6bb9be7dbe5de54c49881ed2e36d3d16}{Logging\_getLastTag}(), \textcolor{stringliteral}{"INFO"}) == 0);
734     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(strcmp(\hyperlink{maap__log__dummy_8c_a309ca337ea3709fab361d35b4595efaa}{Logging\_getLastMessage}(), \textcolor{stringliteral}{"IGNORE"}) == 0);
735 
736     \textcolor{comment}{/* Verify that the status of the range is still valid. */}
737     \hyperlink{maap_8c_a1f75df116573c750510198dda3dc69f3}{maap\_range\_status}(&mc, &sender3\_in, \textcolor{keywordtype}{id});
738     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
739     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender3\_in);
740     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea993b057f5516f007248e70006319c846}{MAAP\_NOTIFY\_STATUS}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
741     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
742     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_reserved\_start, mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start});
743     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_reserved\_count, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
744     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
745 
746 
747     \textcolor{comment}{/* Fake an announcement that conflicts with the start of our range. */}
748     \hyperlink{maap__packet_8c_a9063c2879e9df1c7c1164ff761f19b0d}{init\_packet}(&announce\_packet, \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR}, 
      \hyperlink{maap__tests_8cpp_a3e8161597923401b934507d7565c93d8}{TEST\_REMOTE\_ADDR\_LOWER});
749     announce\_packet.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} = \hyperlink{maap__packet_8h_a1f3bb437d08b91177375d98db0ec96d6}{MAAP\_ANNOUNCE};
750     announce\_packet.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} = range\_reserved\_start - 2; \textcolor{comment}{/* Overlap
       the start of our range. */}
751     announce\_packet.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} = 5;
752     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a219a9cbe130aa9f2aeb60e962cc0bee7}{pack\_maap}(&announce\_packet, announce\_buffer));
753     \hyperlink{maap_8c_a7807b60e9a515b68da136756773bd576}{maap\_handle\_packet}(&mc, announce\_buffer, 
      \hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE});
754 
755     \textcolor{comment}{/* Verify that we yielded our range, and did not defend it. */}
756     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
757     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender2\_in);
758     \textcolor{keywordflow}{if} (mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind} == \hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea0f5d99d0f124fe7233cacefd53f26127}{MAAP\_NOTIFY\_ACQUIRING}) \{
759         \textcolor{comment}{/* Skip over the acquiring notification. */}
760         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
761         \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender2\_in);
762     \}
763     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea438f0d11e6e3a74550cab4c378f9aeba}{MAAP\_NOTIFY\_YIELDED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
764     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
765     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_reserved\_start, mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start});
766     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_reserved\_count, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
767     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
768 
769     \textcolor{comment}{/* Verify the logging. */}
770     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(strcmp(\hyperlink{maap__log__dummy_8c_a6bb9be7dbe5de54c49881ed2e36d3d16}{Logging\_getLastTag}(), \textcolor{stringliteral}{"INFO"}) == 0);
771     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(strcmp(\hyperlink{maap__log__dummy_8c_a309ca337ea3709fab361d35b4595efaa}{Logging\_getLastMessage}(), \textcolor{stringliteral}{"YIELD"}) == 0);
772 
773     \textcolor{comment}{/* Verify that we requested a different range to replace the yielded one. */}
774     \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, -1, -1, -1, 0, 0);
775     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(4, probe\_packets\_detected);
776     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, announce\_packets\_detected);
777     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender2\_in);
778     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea37a35b37b6f804ebc82248ae3ed110c6}{MAAP\_NOTIFY\_ACQUIRED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
779     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
780     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id}); \textcolor{comment}{/* The ID should not have changed */}
781 
782     \textcolor{comment}{/* Verify that the new range doesn't overlap the old range. */}
783     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start} + mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count} - 1 < range\_reserved\_start || range\_reserved\_start + 
      range\_reserved\_count - 1 < mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start});
784 
785     \textcolor{comment}{/* We are done with the Maap\_Client structure */}
786     \hyperlink{maap_8c_abb26ec0dca0b97acd80b602bcfc2179a}{maap\_deinit\_client}(&mc);
787 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{maap__tests_8cpp_a50e969486d3685760ff25bbd2d2212c0_cgraph}
\end{center}
\end{figure}


\index{maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}}
\subsubsection[{\texorpdfstring{T\+E\+S\+T(maap\+\_\+group, Defending\+\_\+vs\+\_\+\+Defends)}{TEST(maap_group, Defending_vs_Defends)}}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{maap\+\_\+group}]{, }
\item[{Defending\+\_\+vs\+\_\+\+Defends}]{}
\end{DoxyParamCaption}
)}\hypertarget{maap__tests_8cpp_ab99859655cd5ea772f38354201682cc0}{}\label{maap__tests_8cpp_ab99859655cd5ea772f38354201682cc0}


maap\+\_\+tests.\+cpp 파일의 789 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
790 \{
791     \textcolor{keyword}{const} \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t} range\_base\_addr = \hyperlink{maap_8h_ae6263079f02d6fcdb18350e93b5e8fd9}{MAAP\_DYNAMIC\_POOL\_BASE};
792     \textcolor{keyword}{const} \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\_t} range\_size = \hyperlink{maap_8h_a27db04878ffebe92dbbcbae7e7c5d447}{MAAP\_DYNAMIC\_POOL\_SIZE};
793     \hyperlink{struct_maap___client}{Maap\_Client} mc;
794     \hyperlink{struct_maap___notify}{Maap\_Notify} mn;
795     \textcolor{keyword}{const} \textcolor{keywordtype}{int} sender1\_in = 1, sender2\_in = 2, sender3\_in = 3;
796     \textcolor{keyword}{const} \textcolor{keywordtype}{void} *sender\_out;
797     \textcolor{keywordtype}{int} id;
798     \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t} range\_reserved\_start;
799     \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\_t} range\_reserved\_count;
800     \textcolor{keywordtype}{int} probe\_packets\_detected, announce\_packets\_detected;
801     \textcolor{keywordtype}{void} *packet\_data = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
802     \hyperlink{struct_m_a_a_p___packet}{MAAP\_Packet} defend\_packet;
803     \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} defend\_buffer[\hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE}];
804 
805     \textcolor{comment}{/* Initialize the Maap\_Client structure */}
806     memset(&mc, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___client}{Maap\_Client}));
807     mc.\hyperlink{struct_maap___client_a205a8c33627111589223916ef80462c2}{dest\_mac} = \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR};
808     mc.\hyperlink{struct_maap___client_ae2c98c9078f80f770e85f937c34da4eb}{src\_mac} = \hyperlink{maap__tests_8cpp_a63329935c6eb8edf3f3af5e11a4e1ec8}{TEST\_SRC\_ADDR};
809 
810     \textcolor{comment}{/* Initialize the range */}
811     \textcolor{comment}{/* We should receive exactly one notification of the initialization. */}
812     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_ab40b6b8a9d9c4269ef5deb0cb453e652}{maap\_init\_client}(&mc, &sender1\_in, range\_base\_addr, 
      range\_size));
813     sender\_out = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
814     memset(&mn, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___notify}{Maap\_Notify}));
815     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
816     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
817 
818     \textcolor{comment}{/* Reserve a block of addresses. */}
819     \textcolor{keywordtype}{id} = \hyperlink{maap_8c_a0815c405656bea7b54ea61f23925da82}{maap\_reserve\_range}(&mc, &sender2\_in, 0, 10);
820     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\textcolor{keywordtype}{id} > 0);
821     \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, -1, -1, -1, 0, 0);
822     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(4, probe\_packets\_detected);
823     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, announce\_packets\_detected);
824     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea37a35b37b6f804ebc82248ae3ed110c6}{MAAP\_NOTIFY\_ACQUIRED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
825     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
826     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
827 
828     \textcolor{comment}{/* Save the results for use later. */}
829     range\_reserved\_start = mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start};
830     range\_reserved\_count = mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count};
831 
832 
833     \textcolor{comment}{/* Try some defends adjacent to, but not overlapping, our range. */}
834     \hyperlink{maap__packet_8c_a9063c2879e9df1c7c1164ff761f19b0d}{init\_packet}(&defend\_packet, \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR}, 
      \hyperlink{maap__tests_8cpp_a3e8161597923401b934507d7565c93d8}{TEST\_REMOTE\_ADDR\_LOWER});
835     defend\_packet.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} = \hyperlink{maap__packet_8h_ac9b42f0f7f08abebfa62a425fc3c073b}{MAAP\_DEFEND};
836     defend\_packet.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} = range\_reserved\_start - 5; \textcolor{comment}{/* Before the
       start of our range. */}
837     defend\_packet.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} = 5;
838     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a219a9cbe130aa9f2aeb60e962cc0bee7}{pack\_maap}(&defend\_packet, defend\_buffer));
839     \hyperlink{maap_8c_a7807b60e9a515b68da136756773bd576}{maap\_handle\_packet}(&mc, defend\_buffer, 
      \hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE});
840     defend\_packet.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} = range\_reserved\_start + 
      range\_reserved\_count; \textcolor{comment}{/* After the end of our range. */}
841     defend\_packet.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} = 5;
842     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a219a9cbe130aa9f2aeb60e962cc0bee7}{pack\_maap}(&defend\_packet, defend\_buffer));
843     \hyperlink{maap_8c_a7807b60e9a515b68da136756773bd576}{maap\_handle\_packet}(&mc, defend\_buffer, 
      \hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE});
844 
845     \textcolor{comment}{/* Try a defend that overlaps our range, but from an address we should ignore. */}
846     \hyperlink{maap__packet_8c_a9063c2879e9df1c7c1164ff761f19b0d}{init\_packet}(&defend\_packet, \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR}, 
      \hyperlink{maap__tests_8cpp_a963c488aaeabc0c167b60b01b334dce5}{TEST\_REMOTE\_ADDR\_HIGHER});
847     defend\_packet.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} = \hyperlink{maap__packet_8h_ac9b42f0f7f08abebfa62a425fc3c073b}{MAAP\_DEFEND};
848     defend\_packet.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} = range\_reserved\_start - 2; \textcolor{comment}{/* Overlap the
       start of our range. */}
849     defend\_packet.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} = 5;
850     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a219a9cbe130aa9f2aeb60e962cc0bee7}{pack\_maap}(&defend\_packet, defend\_buffer));
851     \hyperlink{maap_8c_a7807b60e9a515b68da136756773bd576}{maap\_handle\_packet}(&mc, defend\_buffer, 
      \hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE});
852 
853     \textcolor{comment}{/* Verify that we didn't react. */}
854     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_aa1afbfc7f866343d5bd44b53325b4164}{maap\_handle\_timer}(&mc));
855     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
856     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}((packet\_data = \hyperlink{maap__net_8c_aff8a3346e7beb052fe21a97a897318c1}{Net\_getNextQueuedPacket}(mc.
      \hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net})) == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
857 
858     \textcolor{comment}{/* Verify the logging. */}
859     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(strcmp(\hyperlink{maap__log__dummy_8c_a6bb9be7dbe5de54c49881ed2e36d3d16}{Logging\_getLastTag}(), \textcolor{stringliteral}{"INFO"}) == 0);
860     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(strcmp(\hyperlink{maap__log__dummy_8c_a309ca337ea3709fab361d35b4595efaa}{Logging\_getLastMessage}(), \textcolor{stringliteral}{"IGNORE"}) == 0);
861 
862     \textcolor{comment}{/* Verify that the status of the range is still valid. */}
863     \hyperlink{maap_8c_a1f75df116573c750510198dda3dc69f3}{maap\_range\_status}(&mc, &sender3\_in, \textcolor{keywordtype}{id});
864     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
865     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender3\_in);
866     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea993b057f5516f007248e70006319c846}{MAAP\_NOTIFY\_STATUS}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
867     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
868     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_reserved\_start, mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start});
869     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_reserved\_count, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
870     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
871 
872 
873     \textcolor{comment}{/* Fake a defend that conflicts with the start of our range. */}
874     \hyperlink{maap__packet_8c_a9063c2879e9df1c7c1164ff761f19b0d}{init\_packet}(&defend\_packet, \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR}, 
      \hyperlink{maap__tests_8cpp_a3e8161597923401b934507d7565c93d8}{TEST\_REMOTE\_ADDR\_LOWER});
875     defend\_packet.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} = \hyperlink{maap__packet_8h_ac9b42f0f7f08abebfa62a425fc3c073b}{MAAP\_DEFEND};
876     defend\_packet.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} = range\_reserved\_start - 2; \textcolor{comment}{/* Overlap the
       start of our range. */}
877     defend\_packet.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} = 5;
878     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a219a9cbe130aa9f2aeb60e962cc0bee7}{pack\_maap}(&defend\_packet, defend\_buffer));
879     \hyperlink{maap_8c_a7807b60e9a515b68da136756773bd576}{maap\_handle\_packet}(&mc, defend\_buffer, 
      \hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE});
880 
881     \textcolor{comment}{/* Verify that we yielded our range, and did not defend it. */}
882     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
883     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender2\_in);
884     \textcolor{keywordflow}{if} (mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind} == \hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea0f5d99d0f124fe7233cacefd53f26127}{MAAP\_NOTIFY\_ACQUIRING}) \{
885         \textcolor{comment}{/* Skip over the acquiring notification. */}
886         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
887         \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender2\_in);
888     \}
889     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea438f0d11e6e3a74550cab4c378f9aeba}{MAAP\_NOTIFY\_YIELDED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
890     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
891     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_reserved\_start, mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start});
892     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_reserved\_count, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
893     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
894 
895     \textcolor{comment}{/* Verify the logging. */}
896     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(strcmp(\hyperlink{maap__log__dummy_8c_a6bb9be7dbe5de54c49881ed2e36d3d16}{Logging\_getLastTag}(), \textcolor{stringliteral}{"INFO"}) == 0);
897     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(strcmp(\hyperlink{maap__log__dummy_8c_a309ca337ea3709fab361d35b4595efaa}{Logging\_getLastMessage}(), \textcolor{stringliteral}{"YIELD"}) == 0);
898 
899     \textcolor{comment}{/* Verify that we requested a different range to replace the yielded one. */}
900     \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, -1, -1, -1, 0, 0);
901     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(4, probe\_packets\_detected);
902     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, announce\_packets\_detected);
903     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender2\_in);
904     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea37a35b37b6f804ebc82248ae3ed110c6}{MAAP\_NOTIFY\_ACQUIRED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
905     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
906     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id}); \textcolor{comment}{/* The ID should not have changed */}
907 
908     \textcolor{comment}{/* Verify that the new range doesn't overlap the old range. */}
909     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start} + mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count} - 1 < range\_reserved\_start || range\_reserved\_start + 
      range\_reserved\_count - 1 < mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start});
910 
911     \textcolor{comment}{/* We are done with the Maap\_Client structure */}
912     \hyperlink{maap_8c_abb26ec0dca0b97acd80b602bcfc2179a}{maap\_deinit\_client}(&mc);
913 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{maap__tests_8cpp_ab99859655cd5ea772f38354201682cc0_cgraph}
\end{center}
\end{figure}


\index{maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}}
\subsubsection[{\texorpdfstring{T\+E\+S\+T(maap\+\_\+group, Verify\+\_\+\+Timing)}{TEST(maap_group, Verify_Timing)}}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{maap\+\_\+group}]{, }
\item[{Verify\+\_\+\+Timing}]{}
\end{DoxyParamCaption}
)}\hypertarget{maap__tests_8cpp_a136de25c07c7e766542ba937cb81b190}{}\label{maap__tests_8cpp_a136de25c07c7e766542ba937cb81b190}


maap\+\_\+tests.\+cpp 파일의 915 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
916 \{
917     \textcolor{keyword}{const} \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t} range\_base\_addr = \hyperlink{maap_8h_ae6263079f02d6fcdb18350e93b5e8fd9}{MAAP\_DYNAMIC\_POOL\_BASE};
918     \textcolor{keyword}{const} \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\_t} range\_size = \hyperlink{maap_8h_a27db04878ffebe92dbbcbae7e7c5d447}{MAAP\_DYNAMIC\_POOL\_SIZE};
919     \hyperlink{struct_maap___client}{Maap\_Client} mc;
920     \hyperlink{struct_maap___notify}{Maap\_Notify} mn;
921     \textcolor{keyword}{const} \textcolor{keywordtype}{int} sender\_in = 1;
922     \textcolor{keyword}{const} \textcolor{keywordtype}{void} *sender\_out;
923     \textcolor{keywordtype}{int} id;
924     \textcolor{keywordtype}{int} probe\_packets\_detected, announce\_packets\_detected;
925     \hyperlink{struct_m_a_a_p___packet}{MAAP\_Packet} announce\_packet;
926     \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} announce\_buffer[\hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE}];
927     \textcolor{keywordtype}{void} *packet\_data;
928     \hyperlink{struct_m_a_a_p___packet}{MAAP\_Packet} packet\_contents;
929     \hyperlink{maap__timer_8h_a820ab516df7068a95c9e59f09e82859b}{Time} previous\_time, current\_time;
930 
931     \textcolor{comment}{/* Initialize the Maap\_Client structure */}
932     memset(&mc, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___client}{Maap\_Client}));
933     mc.\hyperlink{struct_maap___client_a205a8c33627111589223916ef80462c2}{dest\_mac} = \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR};
934     mc.\hyperlink{struct_maap___client_ae2c98c9078f80f770e85f937c34da4eb}{src\_mac} = \hyperlink{maap__tests_8cpp_a63329935c6eb8edf3f3af5e11a4e1ec8}{TEST\_SRC\_ADDR};
935 
936     \textcolor{comment}{/* Initialize the range */}
937     \textcolor{comment}{/* We should receive exactly one notification of the initialization. */}
938     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_ab40b6b8a9d9c4269ef5deb0cb453e652}{maap\_init\_client}(&mc, &sender\_in, range\_base\_addr, range\_size
      ));
939     sender\_out = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
940     memset(&mn, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___notify}{Maap\_Notify}));
941     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
942     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
943 
944 
945     \textcolor{comment}{/* Reserve a block of addresses. */}
946     \textcolor{keywordtype}{id} = \hyperlink{maap_8c_a0815c405656bea7b54ea61f23925da82}{maap\_reserve\_range}(&mc, &sender\_in, 0, 10);
947     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\textcolor{keywordtype}{id} > 0);
948 
949     \textcolor{comment}{/* Verify the timing between Probes when interrupted. */}
950     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 100; ++i)
951     \{
952         \textcolor{comment}{/* Wait for three probes to be sent.}
953 \textcolor{comment}{         * Probe timing will be tested by verify\_sent\_packets. */}
954         \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, -1, -1, -1, 0, 3);
955         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(3, probe\_packets\_detected);
956         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, announce\_packets\_detected);
957         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
958 
959         \textcolor{comment}{/* Wait up to 500 ms */}
960         \hyperlink{maap__timer__dummy_8c_ae19b2402ff50ae3e3689679f0b7bd6a5}{Time\_increaseNanos}((random() % 
      \hyperlink{maap_8h_a973ed524cc009560abfe9820f643179c}{MAAP\_PROBE\_INTERVAL\_BASE}) * 1000000LL);
961 
962         \textcolor{comment}{/* Send an announce that conflicts with the current reservation. */}
963         \hyperlink{maap__packet_8c_a9063c2879e9df1c7c1164ff761f19b0d}{init\_packet}(&announce\_packet, \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR}, 
      \hyperlink{maap__tests_8cpp_a3e8161597923401b934507d7565c93d8}{TEST\_REMOTE\_ADDR\_LOWER});
964         announce\_packet.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} = \hyperlink{maap__packet_8h_a1f3bb437d08b91177375d98db0ec96d6}{MAAP\_ANNOUNCE};
965         announce\_packet.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} = mn.
      \hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start};
966         announce\_packet.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} = mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count};
967         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a219a9cbe130aa9f2aeb60e962cc0bee7}{pack\_maap}(&announce\_packet, announce\_buffer));
968         \hyperlink{maap_8c_a7807b60e9a515b68da136756773bd576}{maap\_handle\_packet}(&mc, announce\_buffer, 
      \hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE});
969     \}
970 
971 
972     \textcolor{comment}{/* Verify the timing between Probes when reservation is successful. */}
973     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 100; ++i)
974     \{
975         \textcolor{comment}{/* Wait for the previous attempt to succeed.}
976 \textcolor{comment}{         * Probe timing will be tested by verify\_sent\_packets. */}
977         \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, -1, -1, -1, 0, 0);
978         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(4, probe\_packets\_detected);
979         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, announce\_packets\_detected);
980 
981         \textcolor{comment}{/* Verify that the notification indicated a successful reservation. */}
982         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea37a35b37b6f804ebc82248ae3ed110c6}{MAAP\_NOTIFY\_ACQUIRED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
983         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
984         \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start} >= range\_base\_addr);
985         \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start} + mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count} - 1 <= range\_base\_addr + range\_size - 1);
986         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(10, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
987         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
988         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
989 
990         \textcolor{comment}{/* Wait up to 30000 ms */}
991         \hyperlink{maap__timer__dummy_8c_ae19b2402ff50ae3e3689679f0b7bd6a5}{Time\_increaseNanos}((random() % 
      \hyperlink{maap_8h_a09241f10d014eafb56f0d6d6483303bc}{MAAP\_ANNOUNCE\_INTERVAL\_BASE}) * 1000000LL);
992 
993         \textcolor{comment}{/* Send an announce that conflicts with the current reservation. */}
994         \hyperlink{maap__packet_8c_a9063c2879e9df1c7c1164ff761f19b0d}{init\_packet}(&announce\_packet, \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR}, 
      \hyperlink{maap__tests_8cpp_a3e8161597923401b934507d7565c93d8}{TEST\_REMOTE\_ADDR\_LOWER});
995         announce\_packet.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} = \hyperlink{maap__packet_8h_a1f3bb437d08b91177375d98db0ec96d6}{MAAP\_ANNOUNCE};
996         announce\_packet.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} = mn.
      \hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start};
997         announce\_packet.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} = mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count};
998         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a219a9cbe130aa9f2aeb60e962cc0bee7}{pack\_maap}(&announce\_packet, announce\_buffer));
999         \hyperlink{maap_8c_a7807b60e9a515b68da136756773bd576}{maap\_handle\_packet}(&mc, announce\_buffer, 
      \hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE});
1000 
1001         \textcolor{comment}{/* Verify that we yielded our range, and did not defend it. */}
1002         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1003         \textcolor{keywordflow}{if} (mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind} == \hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea0f5d99d0f124fe7233cacefd53f26127}{MAAP\_NOTIFY\_ACQUIRING}) \{
1004             \textcolor{comment}{/* Skip over the acquiring notification. */}
1005             \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1006         \}
1007         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea438f0d11e6e3a74550cab4c378f9aeba}{MAAP\_NOTIFY\_YIELDED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
1008         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
1009         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
1010 
1011         \textcolor{comment}{/* Verify the logging. */}
1012         \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(strcmp(\hyperlink{maap__log__dummy_8c_a6bb9be7dbe5de54c49881ed2e36d3d16}{Logging\_getLastTag}(), \textcolor{stringliteral}{"INFO"}) == 0);
1013         \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(strcmp(\hyperlink{maap__log__dummy_8c_a309ca337ea3709fab361d35b4595efaa}{Logging\_getLastMessage}(), \textcolor{stringliteral}{"YIELD"}) == 0);
1014     \}
1015 
1016 
1017     \textcolor{comment}{/* Wait for the reservation to succeed. */}
1018     \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, -1, -1, -1, 0, 0);
1019     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(4, probe\_packets\_detected);
1020     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, announce\_packets\_detected);
1021     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea37a35b37b6f804ebc82248ae3ed110c6}{MAAP\_NOTIFY\_ACQUIRED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
1022     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
1023     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1024 
1025     \textcolor{comment}{/* Record the time of the announcement. */}
1026     \hyperlink{maap__timer_8h_abe1fa73a62adeef30aa8c8eb8fd614e9}{Time\_setFromMonotonicTimer}(&previous\_time);
1027 
1028     \textcolor{comment}{/* Verify the timing between Announcements */}
1029     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 100; ++i)
1030     \{
1031         \textcolor{comment}{/* Wait for the next announcement. */}
1032         \hyperlink{maap__timer__dummy_8c_ae19b2402ff50ae3e3689679f0b7bd6a5}{Time\_increaseNanos}(\hyperlink{maap_8c_ac4c7992b7ae19944422573787cdd8a87}{maap\_get\_delay\_to\_next\_timer}(&mc))
      ;
1033         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_aa1afbfc7f866343d5bd44b53325b4164}{maap\_handle\_timer}(&mc));
1034         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1035         packet\_data = \hyperlink{maap__net_8c_aff8a3346e7beb052fe21a97a897318c1}{Net\_getNextQueuedPacket}(mc.\hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net});
1036         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 100 && packet\_data == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}; ++j) \{
1037             \textcolor{comment}{/* Timer expiration could be to free a reservation.  Keep waiting. */}
1038             \hyperlink{maap__timer__dummy_8c_ae19b2402ff50ae3e3689679f0b7bd6a5}{Time\_increaseNanos}(\hyperlink{maap_8c_ac4c7992b7ae19944422573787cdd8a87}{maap\_get\_delay\_to\_next\_timer}(&
      mc));
1039             \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_aa1afbfc7f866343d5bd44b53325b4164}{maap\_handle\_timer}(&mc));
1040             \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1041             packet\_data = \hyperlink{maap__net_8c_aff8a3346e7beb052fe21a97a897318c1}{Net\_getNextQueuedPacket}(mc.\hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net});
1042         \}
1043         \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(packet\_data != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
1044         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a32695149ad598bfdb071eb146926950b}{unpack\_maap}(&packet\_contents, (\textcolor{keyword}{const} 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *) packet\_data));
1045         \hyperlink{maap__net_8c_aebee627140351b60d0b04cfe70c7f966}{Net\_freeQueuedPacket}(mc.\hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net}, packet\_data);
1046         \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(packet\_contents.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} == \hyperlink{maap__packet_8h_a1f3bb437d08b91177375d98db0ec96d6}{MAAP\_ANNOUNCE});
1047 
1048         \textcolor{comment}{/* Get the current time. */}
1049         \hyperlink{maap__timer_8h_abe1fa73a62adeef30aa8c8eb8fd614e9}{Time\_setFromMonotonicTimer}(&current\_time);
1050 
1051         \textcolor{comment}{/* Determine the minimum time from the last announce. */}
1052         \hyperlink{maap__timer_8h_a820ab516df7068a95c9e59f09e82859b}{Time} time\_min;
1053         \hyperlink{maap__timer_8h_a90f59a555e6d8f8655218a63f6b1768e}{Time\_setFromNanos}(&time\_min, 
      \hyperlink{maap_8h_a09241f10d014eafb56f0d6d6483303bc}{MAAP\_ANNOUNCE\_INTERVAL\_BASE} * 1000000LL);
1054         \hyperlink{maap__timer_8h_a89f6a851fce064664ddac3d9b5b12d9f}{Time\_add}(&time\_min, &previous\_time);
1055         \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\hyperlink{maap__timer_8h_a0fed899a04a952b1cfefd3832aa75a8b}{Time\_cmp}(&time\_min, &current\_time) < 0);
1056 
1057         \textcolor{comment}{/* Determine the maximum time from the last announce. */}
1058         \hyperlink{maap__timer_8h_a820ab516df7068a95c9e59f09e82859b}{Time} time\_max;
1059         \hyperlink{maap__timer_8h_a90f59a555e6d8f8655218a63f6b1768e}{Time\_setFromNanos}(&time\_max, (
      \hyperlink{maap_8h_a09241f10d014eafb56f0d6d6483303bc}{MAAP\_ANNOUNCE\_INTERVAL\_BASE} + 
      \hyperlink{maap_8h_a17327d088708951f7e28f64938423721}{MAAP\_ANNOUNCE\_INTERVAL\_VARIATION}) * 1000000LL);
1060         \hyperlink{maap__timer_8h_a89f6a851fce064664ddac3d9b5b12d9f}{Time\_add}(&time\_max, &previous\_time);
1061         \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\hyperlink{maap__timer_8h_a0fed899a04a952b1cfefd3832aa75a8b}{Time\_cmp}(&current\_time, &time\_max) < 0);
1062 
1063         \textcolor{comment}{/* Save the current time for the next comparison. */}
1064         \hyperlink{maap__timer_8h_abe1fa73a62adeef30aa8c8eb8fd614e9}{Time\_setFromMonotonicTimer}(&previous\_time);
1065     \}
1066 
1067     \textcolor{comment}{/* We are done with the Maap\_Client structure */}
1068     \hyperlink{maap_8c_abb26ec0dca0b97acd80b602bcfc2179a}{maap\_deinit\_client}(&mc);
1069 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{maap__tests_8cpp_a136de25c07c7e766542ba937cb81b190_cgraph}
\end{center}
\end{figure}


\index{maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}}
\subsubsection[{\texorpdfstring{T\+E\+S\+T(maap\+\_\+group, Ignore\+\_\+\+Versioning)}{TEST(maap_group, Ignore_Versioning)}}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{maap\+\_\+group}]{, }
\item[{Ignore\+\_\+\+Versioning}]{}
\end{DoxyParamCaption}
)}\hypertarget{maap__tests_8cpp_a74643984fd6005682b6576a3fc8417c4}{}\label{maap__tests_8cpp_a74643984fd6005682b6576a3fc8417c4}


maap\+\_\+tests.\+cpp 파일의 1071 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
1072 \{
1073     \textcolor{keyword}{const} \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t} range\_base\_addr = \hyperlink{maap_8h_ae6263079f02d6fcdb18350e93b5e8fd9}{MAAP\_DYNAMIC\_POOL\_BASE};
1074     \textcolor{keyword}{const} \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\_t} range\_size = \hyperlink{maap_8h_a27db04878ffebe92dbbcbae7e7c5d447}{MAAP\_DYNAMIC\_POOL\_SIZE};
1075     \hyperlink{struct_maap___client}{Maap\_Client} mc;
1076     \hyperlink{struct_maap___notify}{Maap\_Notify} mn;
1077     \textcolor{keyword}{const} \textcolor{keywordtype}{int} sender1\_in = 1, sender2\_in = 2, sender3\_in = 3;
1078     \textcolor{keyword}{const} \textcolor{keywordtype}{void} *sender\_out;
1079     \textcolor{keywordtype}{int} id;
1080     \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t} range\_reserved\_start;
1081     \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\_t} range\_reserved\_count;
1082     \textcolor{keywordtype}{int} probe\_packets\_detected, announce\_packets\_detected;
1083     \hyperlink{struct_m_a_a_p___packet}{MAAP\_Packet} custom\_packet;
1084     \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} custom\_buffer[\hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE}];
1085 
1086     \textcolor{comment}{/* Initialize the Maap\_Client structure */}
1087     memset(&mc, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___client}{Maap\_Client}));
1088     mc.\hyperlink{struct_maap___client_a205a8c33627111589223916ef80462c2}{dest\_mac} = \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR};
1089     mc.\hyperlink{struct_maap___client_ae2c98c9078f80f770e85f937c34da4eb}{src\_mac} = \hyperlink{maap__tests_8cpp_a63329935c6eb8edf3f3af5e11a4e1ec8}{TEST\_SRC\_ADDR};
1090 
1091     \textcolor{comment}{/* Initialize the range */}
1092     \textcolor{comment}{/* We should receive exactly one notification of the initialization. */}
1093     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_ab40b6b8a9d9c4269ef5deb0cb453e652}{maap\_init\_client}(&mc, &sender1\_in, range\_base\_addr, 
      range\_size));
1094     sender\_out = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
1095     memset(&mn, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___notify}{Maap\_Notify}));
1096     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1097     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1098 
1099     \textcolor{comment}{/* Reserve a block of addresses. */}
1100     \textcolor{keywordtype}{id} = \hyperlink{maap_8c_a0815c405656bea7b54ea61f23925da82}{maap\_reserve\_range}(&mc, &sender2\_in, 0, 10);
1101     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\textcolor{keywordtype}{id} > 0);
1102     \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, -1, -1, -1, 0, 0);
1103     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(4, probe\_packets\_detected);
1104     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, announce\_packets\_detected);
1105 
1106     \textcolor{comment}{/* Verify that the notification indicated a successful reservation. */}
1107     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender2\_in);
1108     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea37a35b37b6f804ebc82248ae3ed110c6}{MAAP\_NOTIFY\_ACQUIRED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
1109     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
1110     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start} >= range\_base\_addr);
1111     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start} + mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count} - 1 <= range\_base\_addr + range\_size - 1);
1112     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(10, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
1113     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
1114     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1115 
1116     \textcolor{comment}{/* Save the results for use later. */}
1117     range\_reserved\_start = mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start};
1118     range\_reserved\_count = mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count};
1119 
1120 
1121     \textcolor{comment}{/* Send an unknown PDU with a greater maap\_version value that overlaps our reservation. */}
1122     \hyperlink{maap__packet_8c_a9063c2879e9df1c7c1164ff761f19b0d}{init\_packet}(&custom\_packet, \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR}, 
      \hyperlink{maap__tests_8cpp_a3e8161597923401b934507d7565c93d8}{TEST\_REMOTE\_ADDR\_LOWER});
1123     custom\_packet.\hyperlink{struct_m_a_a_p___packet_a67dab883e86b903bfbffb8e4c25829b9}{maap\_version}++;
1124     custom\_packet.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} = 4; \textcolor{comment}{/* Not a valid message type. */}
1125     custom\_packet.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} = range\_base\_addr;
1126     custom\_packet.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} = range\_size;
1127     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a219a9cbe130aa9f2aeb60e962cc0bee7}{pack\_maap}(&custom\_packet, custom\_buffer));
1128     \hyperlink{maap_8c_a7807b60e9a515b68da136756773bd576}{maap\_handle\_packet}(&mc, custom\_buffer, 
      \hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE});
1129 
1130     \textcolor{comment}{/* Verify that nothing happened. */}
1131     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1132     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\hyperlink{maap__net_8c_aff8a3346e7beb052fe21a97a897318c1}{Net\_getNextQueuedPacket}(mc.\hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net}) == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
1133 
1134     \textcolor{comment}{/* Verify the logging. */}
1135     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(strcmp(\hyperlink{maap__log__dummy_8c_a6bb9be7dbe5de54c49881ed2e36d3d16}{Logging\_getLastTag}(), \textcolor{stringliteral}{"ERROR"}) == 0);
1136     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(strcmp(\hyperlink{maap__log__dummy_8c_a309ca337ea3709fab361d35b4595efaa}{Logging\_getLastMessage}(), \textcolor{stringliteral}{"MAAP packet message type 4 not
       recognized"}) == 0);
1137 
1138     \textcolor{comment}{/* Verify that the logging is cleared after testing. */}
1139     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(strcmp(\hyperlink{maap__log__dummy_8c_a6bb9be7dbe5de54c49881ed2e36d3d16}{Logging\_getLastTag}(), \textcolor{stringliteral}{""}) == 0);
1140     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(strcmp(\hyperlink{maap__log__dummy_8c_a309ca337ea3709fab361d35b4595efaa}{Logging\_getLastMessage}(), \textcolor{stringliteral}{""}) == 0);
1141 
1142     \textcolor{comment}{/* Verify the status of our existing reservation */}
1143     \hyperlink{maap_8c_a1f75df116573c750510198dda3dc69f3}{maap\_range\_status}(&mc, &sender3\_in, \textcolor{keywordtype}{id});
1144     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1145     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender3\_in);
1146     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea993b057f5516f007248e70006319c846}{MAAP\_NOTIFY\_STATUS}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
1147     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}, mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
1148     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_reserved\_start, mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start});
1149     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(range\_reserved\_count, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
1150     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
1151     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1152 
1153 
1154     \textcolor{comment}{/* We are done with the Maap\_Client structure */}
1155     \hyperlink{maap_8c_abb26ec0dca0b97acd80b602bcfc2179a}{maap\_deinit\_client}(&mc);
1156 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{maap__tests_8cpp_a74643984fd6005682b6576a3fc8417c4_cgraph}
\end{center}
\end{figure}


\index{maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}}
\subsubsection[{\texorpdfstring{T\+E\+S\+T(maap\+\_\+group, Multiple\+\_\+\+Conflicts\+\_\+\+Defend)}{TEST(maap_group, Multiple_Conflicts_Defend)}}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{maap\+\_\+group}]{, }
\item[{Multiple\+\_\+\+Conflicts\+\_\+\+Defend}]{}
\end{DoxyParamCaption}
)}\hypertarget{maap__tests_8cpp_afe4e3de7a3c4cb0b8abe9671504687d4}{}\label{maap__tests_8cpp_afe4e3de7a3c4cb0b8abe9671504687d4}


maap\+\_\+tests.\+cpp 파일의 1158 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
1159 \{
1160 \textcolor{preprocessor}{    #define num\_reservations 10}
1161 
1162     \textcolor{keyword}{const} \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t} range\_base\_addr = \hyperlink{maap_8h_ae6263079f02d6fcdb18350e93b5e8fd9}{MAAP\_DYNAMIC\_POOL\_BASE};
1163     \textcolor{keyword}{const} \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\_t} range\_size = \hyperlink{maap_8h_a27db04878ffebe92dbbcbae7e7c5d447}{MAAP\_DYNAMIC\_POOL\_SIZE};
1164     \hyperlink{struct_maap___client}{Maap\_Client} mc;
1165     \hyperlink{struct_maap___notify}{Maap\_Notify} mn;
1166     \textcolor{keyword}{const} \textcolor{keywordtype}{int} sender\_in[\hyperlink{maap__tests_8cpp_a58d3d99c3a186771d115e1f90e3d6867}{num\_reservations}] = \{0\};
1167     \textcolor{keyword}{const} \textcolor{keywordtype}{void} *sender\_out;
1168     \textcolor{keywordtype}{int} i;
1169     \textcolor{keywordtype}{int} \textcolor{keywordtype}{id}[\hyperlink{maap__tests_8cpp_a58d3d99c3a186771d115e1f90e3d6867}{num\_reservations}];
1170     \textcolor{keywordtype}{int} probe\_packets\_detected, announce\_packets\_detected;
1171     \hyperlink{struct_m_a_a_p___packet}{MAAP\_Packet} defend\_packet;
1172     \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} defend\_buffer[\hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE}];
1173     \textcolor{keywordtype}{int} \hyperlink{_test_harness__c_8cpp_a41b8ee1d3a6b7a1b36bec9d663f05d2c}{countdown};
1174     \textcolor{keywordtype}{void} *packet\_data;
1175     \hyperlink{struct_m_a_a_p___packet}{MAAP\_Packet} packet\_contents;
1176 
1177     \textcolor{comment}{/* Initialize the Maap\_Client structure */}
1178     memset(&mc, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___client}{Maap\_Client}));
1179     mc.\hyperlink{struct_maap___client_a205a8c33627111589223916ef80462c2}{dest\_mac} = \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR};
1180     mc.\hyperlink{struct_maap___client_ae2c98c9078f80f770e85f937c34da4eb}{src\_mac} = \hyperlink{maap__tests_8cpp_a63329935c6eb8edf3f3af5e11a4e1ec8}{TEST\_SRC\_ADDR};
1181 
1182     \textcolor{comment}{/* Initialize the range */}
1183     \textcolor{comment}{/* We should receive exactly one notification of the initialization. */}
1184     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_ab40b6b8a9d9c4269ef5deb0cb453e652}{maap\_init\_client}(&mc, &sender\_in[0], range\_base\_addr, 
      range\_size));
1185     sender\_out = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
1186     memset(&mn, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___notify}{Maap\_Notify}));
1187     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1188     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1189 
1190 
1191     \textcolor{comment}{/*}
1192 \textcolor{comment}{     * Reserve some address ranges}
1193 \textcolor{comment}{     */}
1194 
1195     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{maap__tests_8cpp_a58d3d99c3a186771d115e1f90e3d6867}{num\_reservations}; ++i) \{
1196         \textcolor{comment}{/* Reserve an address range */}
1197         \textcolor{keywordtype}{id}[i] = \hyperlink{maap_8c_a0815c405656bea7b54ea61f23925da82}{maap\_reserve\_range}(&mc, &sender\_in[i], 0, 1);
1198         \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\textcolor{keywordtype}{id}[i] > 0);
1199         \hyperlink{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{verify\_sent\_packets}(&mc, &mn, &sender\_out, &probe\_packets\_detected, &
      announce\_packets\_detected, -1, -1, -1, 0, 0);
1200         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(4, probe\_packets\_detected);
1201         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, announce\_packets\_detected);
1202         \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender\_in[i]);
1203         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea37a35b37b6f804ebc82248ae3ed110c6}{MAAP\_NOTIFY\_ACQUIRED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
1204         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}[i], mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
1205         \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start} >= range\_base\_addr);
1206         \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(mn.\hyperlink{struct_maap___notify_a6a51e9baeec9b06ae477cf6475efc71d}{start} + mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count} - 1 <= range\_base\_addr + range\_size - 1);
1207         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, mn.\hyperlink{struct_maap___notify_a86988a65e0d3ece7990c032c159786d6}{count});
1208         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
1209         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1210     \}
1211 
1212 
1213     \textcolor{comment}{/*}
1214 \textcolor{comment}{     * Verify that a Defend conflicting with all the reservations from a higher address is ignored.}
1215 \textcolor{comment}{     */}
1216 
1217     \textcolor{comment}{/* Send a Defend packet that conflicts with all the ranges. */}
1218     \hyperlink{maap__packet_8c_a9063c2879e9df1c7c1164ff761f19b0d}{init\_packet}(&defend\_packet, \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR}, 
      \hyperlink{maap__tests_8cpp_a963c488aaeabc0c167b60b01b334dce5}{TEST\_REMOTE\_ADDR\_HIGHER});
1219     defend\_packet.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} = \hyperlink{maap__packet_8h_ac9b42f0f7f08abebfa62a425fc3c073b}{MAAP\_DEFEND};
1220     defend\_packet.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} = range\_base\_addr;
1221     defend\_packet.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} = range\_size;
1222     defend\_packet.\hyperlink{struct_m_a_a_p___packet_a75c1b7fade099765ff29a3302e3ad072}{conflict\_start\_address} = range\_base\_addr;
1223     defend\_packet.\hyperlink{struct_m_a_a_p___packet_a7454bb2b51c745c38822d008f1a322a1}{conflict\_count} = range\_size;
1224     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a219a9cbe130aa9f2aeb60e962cc0bee7}{pack\_maap}(&defend\_packet, defend\_buffer));
1225     \hyperlink{maap_8c_a7807b60e9a515b68da136756773bd576}{maap\_handle\_packet}(&mc, defend\_buffer, 
      \hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE});
1226 
1227     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1228 
1229     \textcolor{comment}{/* Verify that the status of each range is valid. */}
1230     \textcolor{keywordflow}{for} (i = 1; i < \hyperlink{maap__tests_8cpp_a58d3d99c3a186771d115e1f90e3d6867}{num\_reservations}; ++i) \{
1231         \hyperlink{maap_8c_a1f75df116573c750510198dda3dc69f3}{maap\_range\_status}(&mc, &sender\_in[i], \textcolor{keywordtype}{id}[i]);
1232         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1233         \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(sender\_out == &sender\_in[i]);
1234         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea993b057f5516f007248e70006319c846}{MAAP\_NOTIFY\_STATUS}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
1235         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\textcolor{keywordtype}{id}[i], mn.\hyperlink{struct_maap___notify_a2708c0bbb6f926149707c2c61fe43c3e}{id});
1236         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
1237     \}
1238 
1239 
1240     \textcolor{comment}{/*}
1241 \textcolor{comment}{     * Verify that a Defend conflicting with all the reservations from a lower address results in new
       addresses.}
1242 \textcolor{comment}{     *}
1243 \textcolor{comment}{     * The test uses Defend instead of Announce so that the app can use the defended range}
1244 \textcolor{comment}{     * for selecting a new reservation, which it can't do if tracking annoucements.}
1245 \textcolor{comment}{     */}
1246 
1247     \textcolor{comment}{/* Send a Defend packet that conflicts with all the ranges. */}
1248     \hyperlink{maap__packet_8c_a9063c2879e9df1c7c1164ff761f19b0d}{init\_packet}(&defend\_packet, \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR}, 
      \hyperlink{maap__tests_8cpp_a3e8161597923401b934507d7565c93d8}{TEST\_REMOTE\_ADDR\_LOWER});
1249     defend\_packet.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} = \hyperlink{maap__packet_8h_ac9b42f0f7f08abebfa62a425fc3c073b}{MAAP\_DEFEND};
1250     defend\_packet.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} = range\_base\_addr;
1251     defend\_packet.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} = range\_size;
1252     defend\_packet.\hyperlink{struct_m_a_a_p___packet_a75c1b7fade099765ff29a3302e3ad072}{conflict\_start\_address} = range\_base\_addr;
1253     defend\_packet.\hyperlink{struct_m_a_a_p___packet_a7454bb2b51c745c38822d008f1a322a1}{conflict\_count} = range\_size;
1254     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a219a9cbe130aa9f2aeb60e962cc0bee7}{pack\_maap}(&defend\_packet, defend\_buffer));
1255     \hyperlink{maap_8c_a7807b60e9a515b68da136756773bd576}{maap\_handle\_packet}(&mc, defend\_buffer, 
      \hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE});
1256 
1257     \textcolor{comment}{/* Wait for the right number of probes and announcements. */}
1258     probe\_packets\_detected = 0;
1259     announce\_packets\_detected = 0;
1260     \textcolor{keywordflow}{for} (countdown = 1000; countdown > 0 && announce\_packets\_detected < 
      \hyperlink{maap__tests_8cpp_a58d3d99c3a186771d115e1f90e3d6867}{num\_reservations}; --\hyperlink{_test_harness__c_8cpp_a41b8ee1d3a6b7a1b36bec9d663f05d2c}{countdown})
1261     \{
1262         \hyperlink{maap__timer__dummy_8c_ae19b2402ff50ae3e3689679f0b7bd6a5}{Time\_increaseNanos}(\hyperlink{maap_8c_ac4c7992b7ae19944422573787cdd8a87}{maap\_get\_delay\_to\_next\_timer}(&mc))
      ;
1263         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_aa1afbfc7f866343d5bd44b53325b4164}{maap\_handle\_timer}(&mc));
1264 
1265         \textcolor{keywordflow}{while} ((packet\_data = \hyperlink{maap__net_8c_aff8a3346e7beb052fe21a97a897318c1}{Net\_getNextQueuedPacket}(mc.
      \hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net})) != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
1266         \{
1267             \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a32695149ad598bfdb071eb146926950b}{unpack\_maap}(&packet\_contents, (\textcolor{keyword}{const} 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *) packet\_data));
1268             \hyperlink{maap__net_8c_aebee627140351b60d0b04cfe70c7f966}{Net\_freeQueuedPacket}(mc.\hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net}, packet\_data);
1269             \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(packet\_contents.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} >= \hyperlink{maap__packet_8h_a453ba2e1458fdbd8cddf68943d5ecc94}{MAAP\_PROBE} && packet\_contents.
      \hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} <= \hyperlink{maap__packet_8h_a1f3bb437d08b91177375d98db0ec96d6}{MAAP\_ANNOUNCE});
1270             \textcolor{keywordflow}{if} (packet\_contents.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} == \hyperlink{maap__packet_8h_a453ba2e1458fdbd8cddf68943d5ecc94}{MAAP\_PROBE})
1271             \{
1272                 (probe\_packets\_detected)++;
1273                 \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(probe\_packets\_detected <= 4 * num\_reservations);
1274                 \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(announce\_packets\_detected < probe\_packets\_detected / 4 + 1);
1275             \}
1276             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (packet\_contents.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} == \hyperlink{maap__packet_8h_a1f3bb437d08b91177375d98db0ec96d6}{MAAP\_ANNOUNCE})
1277             \{
1278                 (announce\_packets\_detected)++;
1279                 \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(probe\_packets\_detected > 3 * num\_reservations);
1280                 \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(announce\_packets\_detected <= num\_reservations);
1281             \}
1282             \textcolor{keywordflow}{else}
1283             \{
1284                 \textcolor{comment}{/* Unexpected MAAP\_DEFEND packet. */}
1285                 \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(0);
1286             \}
1287         \}
1288     \}
1289     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(countdown > 0);
1290     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} == \hyperlink{maap__net_8c_aff8a3346e7beb052fe21a97a897318c1}{Net\_getNextQueuedPacket}(mc.\hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net}));
1291 
1292     \textcolor{comment}{/* We should have a yield notification and announce notification for each reservation. */}
1293     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{maap__tests_8cpp_a58d3d99c3a186771d115e1f90e3d6867}{num\_reservations}; ++i) \{
1294         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1295         \textcolor{keywordflow}{while} (mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind} == \hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea0f5d99d0f124fe7233cacefd53f26127}{MAAP\_NOTIFY\_ACQUIRING}) \{
1296             \textcolor{comment}{/* Ignore any acquiring messages. */}
1297             \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1298         \}
1299         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea438f0d11e6e3a74550cab4c378f9aeba}{MAAP\_NOTIFY\_YIELDED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
1300         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
1301     \}
1302     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{maap__tests_8cpp_a58d3d99c3a186771d115e1f90e3d6867}{num\_reservations}; ++i) \{
1303         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1304         \textcolor{keywordflow}{while} (mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind} == \hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea0f5d99d0f124fe7233cacefd53f26127}{MAAP\_NOTIFY\_ACQUIRING}) \{
1305             \textcolor{comment}{/* Ignore any acquiring messages. */}
1306             \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(1, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1307         \}
1308         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea37a35b37b6f804ebc82248ae3ed110c6}{MAAP\_NOTIFY\_ACQUIRED}, mn.\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind});
1309         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(\hyperlink{maap__iface_8h_aad86c36b2cb1c22bfa5e2e5032f808ddaf7eb8886cefe2e917296e22c19bbebd0}{MAAP\_NOTIFY\_ERROR\_NONE}, mn.
      \hyperlink{struct_maap___notify_a9d66bc8bbfd0a30a80edda69603ea9ba}{result});
1310     \}
1311     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(&mc, &sender\_out, &mn));
1312 
1313 
1314     \textcolor{comment}{/* We are done with the Maap\_Client structure */}
1315     \hyperlink{maap_8c_abb26ec0dca0b97acd80b602bcfc2179a}{maap\_deinit\_client}(&mc);
1316 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{maap__tests_8cpp_afe4e3de7a3c4cb0b8abe9671504687d4_cgraph}
\end{center}
\end{figure}


\index{maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}!T\+E\+S\+T\+\_\+\+G\+R\+O\+UP@{T\+E\+S\+T\+\_\+\+G\+R\+O\+UP}}
\index{T\+E\+S\+T\+\_\+\+G\+R\+O\+UP@{T\+E\+S\+T\+\_\+\+G\+R\+O\+UP}!maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}}
\subsubsection[{\texorpdfstring{T\+E\+S\+T\+\_\+\+G\+R\+O\+U\+P(maap\+\_\+group)}{TEST_GROUP(maap_group)}}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+S\+T\+\_\+\+G\+R\+O\+UP (
\begin{DoxyParamCaption}
\item[{maap\+\_\+group}]{}
\end{DoxyParamCaption}
)}\hypertarget{maap__tests_8cpp_aad77ac96b1e35e25ad82156e7b532622}{}\label{maap__tests_8cpp_aad77ac96b1e35e25ad82156e7b532622}


maap\+\_\+tests.\+cpp 파일의 33 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
34 \{
35     \textcolor{keywordtype}{void} setup() \{
36         \textcolor{comment}{/* Try a variety of "random" values over subsequent tests. */}
37         srandom((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) time(\hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}));
38     \}
39 
40     \textcolor{keywordtype}{void} teardown() \{
41     \}
42 \};
\end{DoxyCode}
\index{maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}!verify\+\_\+sent\+\_\+packets@{verify\+\_\+sent\+\_\+packets}}
\index{verify\+\_\+sent\+\_\+packets@{verify\+\_\+sent\+\_\+packets}!maap\+\_\+tests.\+cpp@{maap\+\_\+tests.\+cpp}}
\subsubsection[{\texorpdfstring{verify\+\_\+sent\+\_\+packets(\+Maap\+\_\+\+Client $\ast$p\+\_\+mc, Maap\+\_\+\+Notify $\ast$p\+\_\+mn, const void $\ast$$\ast$p\+\_\+sender\+\_\+out, int $\ast$p\+\_\+probe\+\_\+packets\+\_\+detected, int $\ast$p\+\_\+announce\+\_\+packets\+\_\+detected, int send\+\_\+probe, int send\+\_\+announce, int send\+\_\+defend, uint64\+\_\+t remote\+\_\+addr, int stop\+\_\+after\+\_\+probe)}{verify_sent_packets(Maap_Client *p_mc, Maap_Notify *p_mn, const void **p_sender_out, int *p_probe_packets_detected, int *p_announce_packets_detected, int send_probe, int send_announce, int send_defend, uint64_t remote_addr, int stop_after_probe)}}]{\setlength{\rightskip}{0pt plus 5cm}static void verify\+\_\+sent\+\_\+packets (
\begin{DoxyParamCaption}
\item[{{\bf Maap\+\_\+\+Client} $\ast$}]{p\+\_\+mc, }
\item[{{\bf Maap\+\_\+\+Notify} $\ast$}]{p\+\_\+mn, }
\item[{const void $\ast$$\ast$}]{p\+\_\+sender\+\_\+out, }
\item[{int $\ast$}]{p\+\_\+probe\+\_\+packets\+\_\+detected, }
\item[{int $\ast$}]{p\+\_\+announce\+\_\+packets\+\_\+detected, }
\item[{int}]{send\+\_\+probe, }
\item[{int}]{send\+\_\+announce, }
\item[{int}]{send\+\_\+defend, }
\item[{{\bf uint64\+\_\+t}}]{remote\+\_\+addr, }
\item[{int}]{stop\+\_\+after\+\_\+probe}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}{}\label{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312}
\begin{DoxyRefDesc}{할일}
\item[\hyperlink{todo__todo000033}{할일}]Add more verification that the packet to send is a proper packet. \end{DoxyRefDesc}


maap\+\_\+tests.\+cpp 파일의 1319 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
1324 \{
1325     \textcolor{keywordtype}{int} \hyperlink{_test_harness__c_8cpp_a41b8ee1d3a6b7a1b36bec9d663f05d2c}{countdown};
1326     \textcolor{keywordtype}{void} *packet\_data;
1327     \hyperlink{struct_m_a_a_p___packet}{MAAP\_Packet} packet\_contents;
1328     \hyperlink{maap__timer_8h_a820ab516df7068a95c9e59f09e82859b}{Time} probe\_time[4], announce\_time;
1329     \textcolor{keywordtype}{int} acquiring\_notification = 0;
1330 
1331     \textcolor{comment}{/* Handle any packets generated during the activity.}
1332 \textcolor{comment}{     * Stop once we are notified of a result. */}
1333     *p\_sender\_out = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
1334     memset(p\_mn, 0, \textcolor{keyword}{sizeof}(\hyperlink{struct_maap___notify}{Maap\_Notify}));
1335     *p\_probe\_packets\_detected = 0;
1336     *p\_announce\_packets\_detected = 0;
1337     \textcolor{keywordflow}{for} (countdown = 1000; countdown > 0; --\hyperlink{_test_harness__c_8cpp_a41b8ee1d3a6b7a1b36bec9d663f05d2c}{countdown})
1338     \{
1339         \textcolor{keywordflow}{while} ((packet\_data = \hyperlink{maap__net_8c_aff8a3346e7beb052fe21a97a897318c1}{Net\_getNextQueuedPacket}(p\_mc->
      \hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net})) != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
1340         \{
1342             \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a32695149ad598bfdb071eb146926950b}{unpack\_maap}(&packet\_contents, (\textcolor{keyword}{const} 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *) packet\_data));
1343             \hyperlink{maap__net_8c_aebee627140351b60d0b04cfe70c7f966}{Net\_freeQueuedPacket}(p\_mc->\hyperlink{struct_maap___client_a504c73ff1a68c50e5435dece66bc2772}{net}, packet\_data);
1344             \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(packet\_contents.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} >= \hyperlink{maap__packet_8h_a453ba2e1458fdbd8cddf68943d5ecc94}{MAAP\_PROBE} && packet\_contents.
      \hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} <= \hyperlink{maap__packet_8h_a1f3bb437d08b91177375d98db0ec96d6}{MAAP\_ANNOUNCE});
1345             \textcolor{keywordflow}{if} (packet\_contents.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} == \hyperlink{maap__packet_8h_a453ba2e1458fdbd8cddf68943d5ecc94}{MAAP\_PROBE})
1346             \{
1347                 \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(*p\_probe\_packets\_detected < 4);
1348                 \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, *p\_announce\_packets\_detected);
1349 
1350                 \textcolor{comment}{/* Save and test the timing between probes. */}
1351                 \hyperlink{maap__timer_8h_abe1fa73a62adeef30aa8c8eb8fd614e9}{Time\_setFromMonotonicTimer}(&(probe\_time[*p\_probe\_packets\_detected
      ]));
1352                 \textcolor{keywordflow}{if} (*p\_probe\_packets\_detected > 0) \{
1353 
1354                     \textcolor{comment}{/* Determine the minimum time from the last probe. */}
1355                     \hyperlink{maap__timer_8h_a820ab516df7068a95c9e59f09e82859b}{Time} time\_min;
1356                     \hyperlink{maap__timer_8h_a90f59a555e6d8f8655218a63f6b1768e}{Time\_setFromNanos}(&time\_min, 
      \hyperlink{maap_8h_a973ed524cc009560abfe9820f643179c}{MAAP\_PROBE\_INTERVAL\_BASE} * 1000000LL);
1357                     \hyperlink{maap__timer_8h_a89f6a851fce064664ddac3d9b5b12d9f}{Time\_add}(&time\_min, &probe\_time[*p\_probe\_packets\_detected - 1]);
1358                     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\hyperlink{maap__timer_8h_a0fed899a04a952b1cfefd3832aa75a8b}{Time\_cmp}(&time\_min, &(probe\_time[*p\_probe\_packets\_detected])) < 0);
1359 
1360                     \textcolor{comment}{/* Determine the maximum time from the last probe. */}
1361                     \hyperlink{maap__timer_8h_a820ab516df7068a95c9e59f09e82859b}{Time} time\_max;
1362                     \hyperlink{maap__timer_8h_a90f59a555e6d8f8655218a63f6b1768e}{Time\_setFromNanos}(&time\_max, (
      \hyperlink{maap_8h_a973ed524cc009560abfe9820f643179c}{MAAP\_PROBE\_INTERVAL\_BASE} + \hyperlink{maap_8h_a2d064e4950dd3886c21ba637c8d672eb}{MAAP\_PROBE\_INTERVAL\_VARIATION}
      ) * 1000000LL);
1363                     \hyperlink{maap__timer_8h_a89f6a851fce064664ddac3d9b5b12d9f}{Time\_add}(&time\_max, &probe\_time[*p\_probe\_packets\_detected - 1]);
1364                     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\hyperlink{maap__timer_8h_a0fed899a04a952b1cfefd3832aa75a8b}{Time\_cmp}(&(probe\_time[*p\_probe\_packets\_detected]), &time\_max) < 0);
1365                 \}
1366 
1367                 (*p\_probe\_packets\_detected)++;
1368                 \textcolor{comment}{/* printf("Probe packet sent (%d)\(\backslash\)n", *p\_probe\_packets\_detected); */}
1369 
1370                 \textcolor{keywordflow}{if} (*p\_probe\_packets\_detected == \hyperlink{maap_8c_a3518a5176c421f589c9720bee301c977}{send\_probe})
1371                 \{
1372                     \hyperlink{struct_m_a_a_p___packet}{MAAP\_Packet} probe\_packet;
1373                     \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} probe\_buffer[\hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE}];
1374 
1375                     \textcolor{comment}{/* Send a probe packet in response to the probe packet. */}
1376                     \hyperlink{maap__packet_8c_a9063c2879e9df1c7c1164ff761f19b0d}{init\_packet}(&probe\_packet, \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR}, remote\_addr);
1377                     probe\_packet.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} = \hyperlink{maap__packet_8h_a453ba2e1458fdbd8cddf68943d5ecc94}{MAAP\_PROBE};
1378                     probe\_packet.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} = packet\_contents.
      \hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address};
1379                     probe\_packet.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} = 1;
1380                     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a219a9cbe130aa9f2aeb60e962cc0bee7}{pack\_maap}(&probe\_packet, probe\_buffer));
1381                     \hyperlink{maap_8c_a7807b60e9a515b68da136756773bd576}{maap\_handle\_packet}(p\_mc, probe\_buffer, 
      \hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE});
1382                     \textcolor{comment}{/* printf("Probe packet received\(\backslash\)n"); */}
1383                 \}
1384 
1385                 \textcolor{keywordflow}{if} (*p\_probe\_packets\_detected == \hyperlink{maap_8c_a347a548120a8564100386c1937b9bf0c}{send\_announce})
1386                 \{
1387                     \hyperlink{struct_m_a_a_p___packet}{MAAP\_Packet} announce\_packet;
1388                     \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} announce\_buffer[\hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE}];
1389 
1390                     \textcolor{comment}{/* Send an announce packet in response to the probe packet. */}
1391                     \hyperlink{maap__packet_8c_a9063c2879e9df1c7c1164ff761f19b0d}{init\_packet}(&announce\_packet, \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR}, remote\_addr);
1392                     announce\_packet.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} = \hyperlink{maap__packet_8h_a1f3bb437d08b91177375d98db0ec96d6}{MAAP\_ANNOUNCE};
1393                     announce\_packet.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} = packet\_contents.
      \hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address};
1394                     announce\_packet.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} = 1;
1395                     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a219a9cbe130aa9f2aeb60e962cc0bee7}{pack\_maap}(&announce\_packet, announce\_buffer));
1396                     \hyperlink{maap_8c_a7807b60e9a515b68da136756773bd576}{maap\_handle\_packet}(p\_mc, announce\_buffer, 
      \hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE});
1397                     \textcolor{comment}{/* printf("Announce packet received\(\backslash\)n"); */}
1398                 \}
1399 
1400                 \textcolor{keywordflow}{if} (*p\_probe\_packets\_detected == \hyperlink{maap_8c_a2f736d2d0d06de43bfcf25347618481b}{send\_defend})
1401                 \{
1402                     \hyperlink{struct_m_a_a_p___packet}{MAAP\_Packet} defend\_packet;
1403                     \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} defend\_buffer[\hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE}];
1404 
1405                     \textcolor{comment}{/* Send a defend packet in response to the probe packet. */}
1406                     \hyperlink{maap__packet_8c_a9063c2879e9df1c7c1164ff761f19b0d}{init\_packet}(&defend\_packet, \hyperlink{maap__tests_8cpp_af36f159821c232a57409226a5619bcdd}{TEST\_DEST\_ADDR}, remote\_addr);
1407                     defend\_packet.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} = \hyperlink{maap__packet_8h_ac9b42f0f7f08abebfa62a425fc3c073b}{MAAP\_DEFEND};
1408                     defend\_packet.\hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address} = packet\_contents.
      \hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address};
1409                     defend\_packet.\hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count} = packet\_contents.
      \hyperlink{struct_m_a_a_p___packet_a3b7ca808f59412368434591249aa8a79}{requested\_count};
1410                     defend\_packet.\hyperlink{struct_m_a_a_p___packet_a75c1b7fade099765ff29a3302e3ad072}{conflict\_start\_address} = packet\_contents.
      \hyperlink{struct_m_a_a_p___packet_a6e54c2881571f11a3a4a82c664794326}{requested\_start\_address}; \textcolor{comment}{/* Just use the same address */}
1411                     defend\_packet.\hyperlink{struct_m_a_a_p___packet_a7454bb2b51c745c38822d008f1a322a1}{conflict\_count} = 1;
1412                     \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap__packet_8c_a219a9cbe130aa9f2aeb60e962cc0bee7}{pack\_maap}(&defend\_packet, defend\_buffer));
1413                     \hyperlink{maap_8c_a7807b60e9a515b68da136756773bd576}{maap\_handle\_packet}(p\_mc, defend\_buffer, 
      \hyperlink{maap__net_8h_a7201d613d0bf5b69e51304c574a77022}{MAAP\_NET\_BUFFER\_SIZE});
1414                     \textcolor{comment}{/* printf("Defend packet received\(\backslash\)n"); */}
1415                 \}
1416 
1417                 \textcolor{comment}{/* If requested, stop the processing at this point so the caller can see what happens next.
       */}
1418                 \textcolor{keywordflow}{if} (*p\_probe\_packets\_detected == stop\_after\_probe) \{ \textcolor{keywordflow}{return}; \}
1419             \}
1420             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (packet\_contents.\hyperlink{struct_m_a_a_p___packet_aeaaffeace8c23899e558022f62ce6de4}{message\_type} == \hyperlink{maap__packet_8h_a1f3bb437d08b91177375d98db0ec96d6}{MAAP\_ANNOUNCE})
1421             \{
1422                 \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(4, *p\_probe\_packets\_detected);
1423                 \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, *p\_announce\_packets\_detected);
1424                 (*p\_announce\_packets\_detected)++;
1425                 \textcolor{comment}{/* printf("Announce packet sent (%d)\(\backslash\)n", *p\_announce\_packets\_detected); */}
1426 
1427                 \textcolor{comment}{/* Save and test the timing between the last probe and the announce. */}
1428                 \hyperlink{maap__timer_8h_abe1fa73a62adeef30aa8c8eb8fd614e9}{Time\_setFromMonotonicTimer}(&announce\_time);
1429 
1430                 \textcolor{comment}{/* Determine the minimum time from the last probe. */}
1431                 \hyperlink{maap__timer_8h_a820ab516df7068a95c9e59f09e82859b}{Time} time\_min;
1432                 \hyperlink{maap__timer_8h_a90f59a555e6d8f8655218a63f6b1768e}{Time\_setFromNanos}(&time\_min, 
      \hyperlink{maap_8h_a973ed524cc009560abfe9820f643179c}{MAAP\_PROBE\_INTERVAL\_BASE} * 1000000LL);
1433                 \hyperlink{maap__timer_8h_a89f6a851fce064664ddac3d9b5b12d9f}{Time\_add}(&time\_min, &probe\_time[*p\_probe\_packets\_detected - 1]);
1434                 \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\hyperlink{maap__timer_8h_a0fed899a04a952b1cfefd3832aa75a8b}{Time\_cmp}(&time\_min, &announce\_time) < 0);
1435 
1436                 \textcolor{comment}{/* Determine the maximum time from the last probe. */}
1437                 \hyperlink{maap__timer_8h_a820ab516df7068a95c9e59f09e82859b}{Time} time\_max;
1438                 \hyperlink{maap__timer_8h_a90f59a555e6d8f8655218a63f6b1768e}{Time\_setFromNanos}(&time\_max, (
      \hyperlink{maap_8h_a973ed524cc009560abfe9820f643179c}{MAAP\_PROBE\_INTERVAL\_BASE} + \hyperlink{maap_8h_a2d064e4950dd3886c21ba637c8d672eb}{MAAP\_PROBE\_INTERVAL\_VARIATION}
      ) * 1000000LL);
1439                 \hyperlink{maap__timer_8h_a89f6a851fce064664ddac3d9b5b12d9f}{Time\_add}(&time\_max, &probe\_time[*p\_probe\_packets\_detected - 1]);
1440                 \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(\hyperlink{maap__timer_8h_a0fed899a04a952b1cfefd3832aa75a8b}{Time\_cmp}(&announce\_time, &time\_max) < 0);
1441             \}
1442             \textcolor{keywordflow}{else}
1443             \{
1444                 \textcolor{comment}{/* Unexpected MAAP\_DEFEND packet. */}
1445                 \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(0);
1446             \}
1447         \}
1448 
1449         \textcolor{keywordflow}{if} (\hyperlink{maap_8c_a781fa6b6b28682a51333187f4a1970c0}{get\_notify}(p\_mc, p\_sender\_out, p\_mn)) \{
1450             \textcolor{keywordflow}{if} (p\_mn->\hyperlink{struct_maap___notify_a28725ddb5295895b12a48456f73a5665}{kind} == \hyperlink{maap__iface_8h_a0d45e125fb876b383321d96bc510285ea0f5d99d0f124fe7233cacefd53f26127}{MAAP\_NOTIFY\_ACQUIRING}) \{
1451                 \textcolor{comment}{/* This is a MAAP\_NOTIFY\_ACQUIRING notification.  We can ignore this once early on. */}
1452                 \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(!acquiring\_notification);
1453                 \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(*p\_probe\_packets\_detected <= 1);
1454                 acquiring\_notification++;
1455                 *p\_sender\_out = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
1456             \} \textcolor{keywordflow}{else} \{
1457                 \textcolor{comment}{/* We received a notification.  Stop processing so it can be evaluated by the caller. */}
1458                 \textcolor{keywordflow}{break};
1459             \}
1460         \}
1461 
1462         \textcolor{comment}{/* Wait for the next event. */}
1463         \hyperlink{maap__timer__dummy_8c_ae19b2402ff50ae3e3689679f0b7bd6a5}{Time\_increaseNanos}(\hyperlink{maap_8c_ac4c7992b7ae19944422573787cdd8a87}{maap\_get\_delay\_to\_next\_timer}(p\_mc)
      );
1464         \hyperlink{_utest_macros_8h_a7921a0c4f152a7879e78fe6fc2905590}{LONGS\_EQUAL}(0, \hyperlink{maap_8c_aa1afbfc7f866343d5bd44b53325b4164}{maap\_handle\_timer}(p\_mc));
1465     \}
1466     \hyperlink{_utest_macros_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}(countdown > 0);
1467 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312_cgraph}
\end{center}
\end{figure}




이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=262pt]{maap__tests_8cpp_a85813c177f5b08a4173307c27a08d312_icgraph}
\end{center}
\end{figure}


