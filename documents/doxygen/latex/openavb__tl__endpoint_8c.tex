\hypertarget{openavb__tl__endpoint_8c}{}\section{lib/avtp\+\_\+pipeline/tl/openavb\+\_\+tl\+\_\+endpoint.c 파일 참조}
\label{openavb__tl__endpoint_8c}\index{lib/avtp\+\_\+pipeline/tl/openavb\+\_\+tl\+\_\+endpoint.\+c@{lib/avtp\+\_\+pipeline/tl/openavb\+\_\+tl\+\_\+endpoint.\+c}}
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include \char`\"{}openavb\+\_\+tl.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}openavb\+\_\+trace.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}openavb\+\_\+mediaq.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}openavb\+\_\+talker.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}openavb\+\_\+listener.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}openavb\+\_\+endpoint.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}openavb\+\_\+avtp.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}openavb\+\_\+platform.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}openavb\+\_\+endpoint\+\_\+osal.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}openavb\+\_\+pub.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}openavb\+\_\+log.\+h\char`\"{}}\\*
openavb\+\_\+tl\+\_\+endpoint.\+c에 대한 include 의존 그래프
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{openavb__tl__endpoint_8c__incl}
\end{center}
\end{figure}
\subsection*{매크로}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{openavb__tl__endpoint_8c_abcfb21b6495585fe36058f57a9fe58fc}{A\+V\+B\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+NT}~\char`\"{}Talker / Listener\char`\"{}
\end{DoxyCompactItemize}
\subsection*{함수}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{openavb__tl__endpoint_8c_a1de4d8d9bd112c4bc0fde2055e399005}{openavb\+Ept\+Clnt\+Check\+Ver\+Matches\+Srvr} (int endpoint\+Handle, \hyperlink{openavb__types__base__pub_8h_a696390429f2f3b644bde8d0322a24124}{U32} A\+V\+B\+Version)
\item 
void $\ast$ \hyperlink{openavb__tl__endpoint_8c_a76b615460d934bc3c0443d3483c94818}{openavb\+T\+L\+Thread\+Fn} (void $\ast$pv)
\item 
\hyperlink{build_2sdk__eavb_2openavb__tl__pub_8h_af231d6531d24afcf31511425dd4869d2}{tl\+\_\+handle\+\_\+t} \hyperlink{openavb__tl__endpoint_8c_ad2f38bb797230bf2c03c44f4742a9815}{T\+L\+Handle\+List\+Get} (int endpoint\+Handle)
\end{DoxyCompactItemize}


\subsection{매크로 문서화}
\index{openavb\+\_\+tl\+\_\+endpoint.\+c@{openavb\+\_\+tl\+\_\+endpoint.\+c}!A\+V\+B\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+NT@{A\+V\+B\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+NT}}
\index{A\+V\+B\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+NT@{A\+V\+B\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+NT}!openavb\+\_\+tl\+\_\+endpoint.\+c@{openavb\+\_\+tl\+\_\+endpoint.\+c}}
\subsubsection[{\texorpdfstring{A\+V\+B\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+NT}{AVB_LOG_COMPONENT}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+V\+B\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+NT~\char`\"{}Talker / Listener\char`\"{}}\hypertarget{openavb__tl__endpoint_8c_abcfb21b6495585fe36058f57a9fe58fc}{}\label{openavb__tl__endpoint_8c_abcfb21b6495585fe36058f57a9fe58fc}


openavb\+\_\+tl\+\_\+endpoint.\+c 파일의 49 번째 라인에서 정의되었습니다.



\subsection{함수 문서화}
\index{openavb\+\_\+tl\+\_\+endpoint.\+c@{openavb\+\_\+tl\+\_\+endpoint.\+c}!openavb\+Ept\+Clnt\+Check\+Ver\+Matches\+Srvr@{openavb\+Ept\+Clnt\+Check\+Ver\+Matches\+Srvr}}
\index{openavb\+Ept\+Clnt\+Check\+Ver\+Matches\+Srvr@{openavb\+Ept\+Clnt\+Check\+Ver\+Matches\+Srvr}!openavb\+\_\+tl\+\_\+endpoint.\+c@{openavb\+\_\+tl\+\_\+endpoint.\+c}}
\subsubsection[{\texorpdfstring{openavb\+Ept\+Clnt\+Check\+Ver\+Matches\+Srvr(int endpoint\+Handle, U32 A\+V\+B\+Version)}{openavbEptClntCheckVerMatchesSrvr(int endpointHandle, U32 AVBVersion)}}]{\setlength{\rightskip}{0pt plus 5cm}void openavb\+Ept\+Clnt\+Check\+Ver\+Matches\+Srvr (
\begin{DoxyParamCaption}
\item[{int}]{endpoint\+Handle, }
\item[{{\bf U32}}]{A\+V\+B\+Version}
\end{DoxyParamCaption}
)}\hypertarget{openavb__tl__endpoint_8c_a1de4d8d9bd112c4bc0fde2055e399005}{}\label{openavb__tl__endpoint_8c_a1de4d8d9bd112c4bc0fde2055e399005}


openavb\+\_\+tl\+\_\+endpoint.\+c 파일의 53 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
54 \{
55     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_ae679116a5251aad926d752e57edbb7d3}{AVB\_TRACE\_TL});
56 
57     \hyperlink{structtl__state__t}{tl\_state\_t} *pTLState = \hyperlink{openavb__tl__endpoint_8c_ad2f38bb797230bf2c03c44f4742a9815}{TLHandleListGet}(endpointHandle);
58 
59     \textcolor{keywordflow}{if} (AVBVersion == \hyperlink{build_2sdk__eavb_2openavb__pub_8h_a6a3864d5243465709a043f35c310801b}{AVB\_CORE\_VER\_FULL}) \{
60         pTLState->\hyperlink{structtl__state__t_a9368e0b0a677e35e74adcd873e3f6b2b}{AVBVerState} = \hyperlink{openavb__tl_8h_a493ad4efce80f067372bcd6cca95b02aab4d1941e5a15e9f1d624b2159047f636}{OPENAVB\_TL\_AVB\_VER\_VALID};
61     \}
62     \textcolor{keywordflow}{else} \{
63         pTLState->\hyperlink{structtl__state__t_a9368e0b0a677e35e74adcd873e3f6b2b}{AVBVerState} = \hyperlink{openavb__tl_8h_a493ad4efce80f067372bcd6cca95b02aae72d1399a4a10c99cc019a55619ca5a0}{OPENAVB\_TL\_AVB\_VER\_INVALID};
64     \}
65 
66     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_ae679116a5251aad926d752e57edbb7d3}{AVB\_TRACE\_TL});
67 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{openavb__tl__endpoint_8c_a1de4d8d9bd112c4bc0fde2055e399005_cgraph}
\end{center}
\end{figure}


\index{openavb\+\_\+tl\+\_\+endpoint.\+c@{openavb\+\_\+tl\+\_\+endpoint.\+c}!openavb\+T\+L\+Thread\+Fn@{openavb\+T\+L\+Thread\+Fn}}
\index{openavb\+T\+L\+Thread\+Fn@{openavb\+T\+L\+Thread\+Fn}!openavb\+\_\+tl\+\_\+endpoint.\+c@{openavb\+\_\+tl\+\_\+endpoint.\+c}}
\subsubsection[{\texorpdfstring{openavb\+T\+L\+Thread\+Fn(void $\ast$pv)}{openavbTLThreadFn(void *pv)}}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ openavb\+T\+L\+Thread\+Fn (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{pv}
\end{DoxyParamCaption}
)}\hypertarget{openavb__tl__endpoint_8c_a76b615460d934bc3c0443d3483c94818}{}\label{openavb__tl__endpoint_8c_a76b615460d934bc3c0443d3483c94818}


openavb\+\_\+tl\+\_\+endpoint.\+c 파일의 71 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
72 \{
73     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_ae679116a5251aad926d752e57edbb7d3}{AVB\_TRACE\_TL});
74 
75     \hyperlink{structtl__state__t}{tl\_state\_t} *pTLState = (\hyperlink{structtl__state__t}{tl\_state\_t} *)pv;
76 
77     \textcolor{keywordflow}{while} (pTLState->\hyperlink{structtl__state__t_acf182b7b2127314d5d00c6df827734b5}{bRunning}) \{
78         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a1ba49b1b3841555131e277b8ab63e782}{AVB\_TRACE\_LINE}(\hyperlink{openavb__trace_8h_a2f025b8c2802c7c4c7c7ecd785f9acea}{AVB\_TRACE\_TL\_DETAIL});
79 
80         \textcolor{keywordtype}{int} endpointHandle = \hyperlink{openavb__endpoint_8h_a57bc13f9b1e43e761a648e763222c2c7}{openavbEptClntOpenSrvrConnection}(pTLState);
81 
82         \textcolor{keywordflow}{if} (endpointHandle == \hyperlink{openavb__endpoint_8h_a47f5b9bb6606fa543966788137fee02a}{AVB\_ENDPOINT\_HANDLE\_INVALID}) \{
83             \textcolor{comment}{// error connecting to endpoint, already logged}
84         \}
85         \textcolor{keywordflow}{else} \{
86             pTLState->\hyperlink{structtl__state__t_ab3ab35067245073649b909ddc82c2807}{endpointHandle} = endpointHandle;
87 
88             \textcolor{comment}{// Validate the AVB version for TL and Endpoint are the same before continuing}
89             pTLState->\hyperlink{structtl__state__t_a9368e0b0a677e35e74adcd873e3f6b2b}{AVBVerState} = \hyperlink{openavb__tl_8h_a493ad4efce80f067372bcd6cca95b02aa3de94dfd5d8f49e35ec9ade389fe5603}{OPENAVB\_TL\_AVB\_VER\_UNKNOWN};
90             pTLState->\hyperlink{structtl__state__t_a27fec7db63617379ec20651b83d27fc7}{bConnected} = 
      \hyperlink{openavb__endpoint_8h_a7bfaf611a37d803c42a09d3923408213}{openavbEptClntRequestVersionFromServer}(pTLState->
      \hyperlink{structtl__state__t_ab3ab35067245073649b909ddc82c2807}{endpointHandle});
91             \textcolor{keywordflow}{while} (pTLState->\hyperlink{structtl__state__t_acf182b7b2127314d5d00c6df827734b5}{bRunning} && pTLState->\hyperlink{structtl__state__t_a27fec7db63617379ec20651b83d27fc7}{bConnected} && pTLState->
      \hyperlink{structtl__state__t_a9368e0b0a677e35e74adcd873e3f6b2b}{AVBVerState} == \hyperlink{openavb__tl_8h_a493ad4efce80f067372bcd6cca95b02aa3de94dfd5d8f49e35ec9ade389fe5603}{OPENAVB\_TL\_AVB\_VER\_UNKNOWN}) \{
92                 \textcolor{comment}{// Check for endpoint version message. Timeout in 50 msec.}
93                 \textcolor{keywordflow}{if} (!\hyperlink{openavb__endpoint_8h_a04a97a5b51065f7ce1f99c1dcb891f52}{openavbEptClntService}(pTLState->
      \hyperlink{structtl__state__t_ab3ab35067245073649b909ddc82c2807}{endpointHandle}, 50)) \{
94                     \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a6e7cd550837a0406e98b81a840d10ea9}{AVB\_LOG\_WARNING}(\textcolor{stringliteral}{"Lost connection to endpoint, will retry"});
95                     pTLState->\hyperlink{structtl__state__t_a27fec7db63617379ec20651b83d27fc7}{bConnected} = \hyperlink{maap__log_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
96                     pTLState->\hyperlink{structtl__state__t_ab3ab35067245073649b909ddc82c2807}{endpointHandle} = 0;
97                 \}
98             \}
99             \textcolor{keywordflow}{if} (pTLState->\hyperlink{structtl__state__t_a9368e0b0a677e35e74adcd873e3f6b2b}{AVBVerState} == \hyperlink{openavb__tl_8h_a493ad4efce80f067372bcd6cca95b02aae72d1399a4a10c99cc019a55619ca5a0}{OPENAVB\_TL\_AVB\_VER\_INVALID}) \{
100                 \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"AVB core version is different than Endpoint AVB core version.
       Streams will not be started. Will reconnect to the endpoint and check again."});
101             \}
102 
103             \textcolor{keywordflow}{if} (pTLState->\hyperlink{structtl__state__t_a27fec7db63617379ec20651b83d27fc7}{bConnected} && pTLState->\hyperlink{structtl__state__t_a9368e0b0a677e35e74adcd873e3f6b2b}{AVBVerState} == 
      \hyperlink{openavb__tl_8h_a493ad4efce80f067372bcd6cca95b02aab4d1941e5a15e9f1d624b2159047f636}{OPENAVB\_TL\_AVB\_VER\_VALID}) \{
104                 \textcolor{keywordflow}{if} (pTLState->\hyperlink{structtl__state__t_a7b8161c0e9a273c59fbc1dfda943953e}{cfg}.\hyperlink{structopenavb__tl__cfg__t_a172ec388c6d270261a61a789b78dff45}{role} == \hyperlink{openavb__types__base__pub_8h_a590fdc081b8544206aabd58e32a6f6a2ad24b3afc356fd635f96a32dd89a1b6a2}{AVB\_ROLE\_TALKER}) \{
105                     \hyperlink{openavb__talker_8c_a1905d4c94ff976c580850b9e4ba4cf55}{openavbTLRunTalker}(pTLState);
106                 \}
107                 \textcolor{keywordflow}{else} \{
108                     \hyperlink{openavb__listener_8c_a4f7a88efb692fa68a4465d51980bc921}{openavbTLRunListener}(pTLState);
109                 \}
110             \}
111 
112             \textcolor{comment}{// Close the endpoint connection. unless connection already gone in which case the socket could
       already be reused.}
113             \textcolor{keywordflow}{if} (pTLState->\hyperlink{structtl__state__t_a27fec7db63617379ec20651b83d27fc7}{bConnected}) \{
114                 \hyperlink{openavb__endpoint_8h_ae614896dde01bc254d0fd5a6a59b0258}{openavbEptClntCloseSrvrConnection}(endpointHandle);
115                 pTLState->\hyperlink{structtl__state__t_a27fec7db63617379ec20651b83d27fc7}{bConnected} = \hyperlink{maap__log_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
116                 pTLState->\hyperlink{structtl__state__t_ab3ab35067245073649b909ddc82c2807}{endpointHandle} = 0;
117             \}
118         \}
119 
120         \textcolor{keywordflow}{if} (pTLState->\hyperlink{structtl__state__t_acf182b7b2127314d5d00c6df827734b5}{bRunning}) \{
121             \hyperlink{maap__helper__linux_8h_a63121b744a6265fe4bae4963b032ac02}{SLEEP\_MSEC}(1);
122         \}
123     \}
124 
125     \hyperlink{maap__helper__linux_8h_a75c94f5239423fe515fb11ce578b2801}{THREAD\_JOINABLE}(pTLState->TLThread);
126 
127     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_ae679116a5251aad926d752e57edbb7d3}{AVB\_TRACE\_TL});
128     \textcolor{keywordflow}{return} \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
129 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{openavb__tl__endpoint_8c_a76b615460d934bc3c0443d3483c94818_cgraph}
\end{center}
\end{figure}


\index{openavb\+\_\+tl\+\_\+endpoint.\+c@{openavb\+\_\+tl\+\_\+endpoint.\+c}!T\+L\+Handle\+List\+Get@{T\+L\+Handle\+List\+Get}}
\index{T\+L\+Handle\+List\+Get@{T\+L\+Handle\+List\+Get}!openavb\+\_\+tl\+\_\+endpoint.\+c@{openavb\+\_\+tl\+\_\+endpoint.\+c}}
\subsubsection[{\texorpdfstring{T\+L\+Handle\+List\+Get(int endpoint\+Handle)}{TLHandleListGet(int endpointHandle)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tl\+\_\+handle\+\_\+t} T\+L\+Handle\+List\+Get (
\begin{DoxyParamCaption}
\item[{int}]{endpoint\+Handle}
\end{DoxyParamCaption}
)}\hypertarget{openavb__tl__endpoint_8c_ad2f38bb797230bf2c03c44f4742a9815}{}\label{openavb__tl__endpoint_8c_ad2f38bb797230bf2c03c44f4742a9815}


openavb\+\_\+tl\+\_\+endpoint.\+c 파일의 132 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
133 \{
134     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_ae679116a5251aad926d752e57edbb7d3}{AVB\_TRACE\_TL});
135 
136     \textcolor{keywordflow}{if} (!endpointHandle || !\hyperlink{openavb__tl_8c_ae763c69b8fd7908fa992bf0a4ffaa01d}{gTLHandleList}) \{
137         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_ae679116a5251aad926d752e57edbb7d3}{AVB\_TRACE\_TL});
138         \textcolor{keywordflow}{return} \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
139     \}
140 
141     \hyperlink{openavb__tl_8h_a298bd01d98b67ac3fd35dd9ce07d2a1c}{TL\_LOCK}();
142     \textcolor{keywordtype}{int} i1;
143     \textcolor{keywordflow}{for} (i1 = 0; i1 < \hyperlink{openavb__tl_8c_ae541666b6e4d9d49cdb4d033dbbe60f0}{gMaxTL}; i1++) \{
144         \textcolor{keywordflow}{if} (\hyperlink{openavb__tl_8c_ae763c69b8fd7908fa992bf0a4ffaa01d}{gTLHandleList}[i1]) \{
145             \hyperlink{structtl__state__t}{tl\_state\_t} *pTLState = (\hyperlink{structtl__state__t}{tl\_state\_t} *)
      \hyperlink{openavb__tl_8c_ae763c69b8fd7908fa992bf0a4ffaa01d}{gTLHandleList}[i1];
146             \textcolor{keywordflow}{if} (pTLState->\hyperlink{structtl__state__t_ab3ab35067245073649b909ddc82c2807}{endpointHandle} == endpointHandle) \{
147                 \hyperlink{openavb__tl_8h_a9f0e3f12724995e5dfa6bb65a9c947a1}{TL\_UNLOCK}();
148                 \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_ae679116a5251aad926d752e57edbb7d3}{AVB\_TRACE\_TL});
149                 \textcolor{keywordflow}{return} pTLState;
150             \}
151         \}
152     \}
153     \hyperlink{openavb__tl_8h_a9f0e3f12724995e5dfa6bb65a9c947a1}{TL\_UNLOCK}();
154     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_ae679116a5251aad926d752e57edbb7d3}{AVB\_TRACE\_TL});
155     \textcolor{keywordflow}{return} \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
156 \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{openavb__tl__endpoint_8c_ad2f38bb797230bf2c03c44f4742a9815_icgraph}
\end{center}
\end{figure}


