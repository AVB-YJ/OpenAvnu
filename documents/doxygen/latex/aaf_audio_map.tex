\section*{Description}

Implements A\+AF (or \char`\"{}\+A\+V\+T\+P Audio Format\char`\"{}) as described in I\+E\+E\+E-\/1722a.

Works with the A\+L\+SA interface and the W\+AV file interface.

\section*{Mapping module configuration parameters}

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*2{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}{\bf Name }&{\bf Description  }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}{\bf Name }&{\bf Description  }\\\cline{1-2}
\endhead
map\+\_\+nv\+\_\+item\+\_\+count &The number of Media Queue items to hold. \\\cline{1-2}
map\+\_\+nv\+\_\+tx\+\_\+rate or map\+\_\+nv\+\_\+tx\+\_\+interval &Transmit interval in frames per second. \textbackslash{} \\\cline{1-2}
\end{longtabu}
0 = default for talker class. ~\newline
 The transmit rate for \textbackslash{} the mapping module should be set according to the sample \textbackslash{} rate, so that the transmit interval meets the suggested \textbackslash{} values in 1722a 
\begin{DoxyItemize}
\item sample rate which are multiple of \textbackslash{} 8000\+Hz 
\begin{DoxyItemize}
\item 8000 for class {\bfseries A}
\item 4000 for \textbackslash{} class {\bfseries B}
\end{DoxyItemize}
\item sample rate which are \textbackslash{} multiple of 44100\+Hz
\begin{DoxyItemize}
\item 7350 for class {\bfseries A} \textbackslash{} 
\item 3675 for class {\bfseries B}
\end{DoxyItemize}
\end{DoxyItemize}map\+\_\+nv\+\_\+packing\+\_\+factor$\vert$\+How many A\+V\+TP packets worth of audio data to accept in one Media Queue item

~\newline
 \section*{Notes}

There are additional parameters that have to be set by the interface module during the configuration process to ensure all sizes and rates calculate properly inside the mapping module. Those variables have to be set before {\itshape map\+\_\+gen\+\_\+init\+\_\+cb} is being called. Commonly these additional values are set during the interface module configuration which does occur before the gen\+\_\+init\+\_\+cb.

These are the fields of the \hyperlink{structmedia__q__pub__map__uncmp__audio__info__t}{media\+\_\+q\+\_\+pub\+\_\+map\+\_\+uncmp\+\_\+audio\+\_\+info\+\_\+t} structure that have to be set during the interface module configuration\+:

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*2{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}{\bf Name }&{\bf Description  }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}{\bf Name }&{\bf Description  }\\\cline{1-2}
\endhead
audio\+Rate &Rate of the audio \hyperlink{openavb__audio__pub_8h_a6070f1cfbb6824de6f0b2524cd306903}{avb\+\_\+audio\+\_\+rate\+\_\+t} \\\cline{1-2}
audio\+Type &How the data is organized -\/ what is the data type of \textbackslash{} \\\cline{1-2}
\end{longtabu}
samples \hyperlink{openavb__audio__pub_8h_a680efa0db2b29a63c5a0e8f11975682f}{avb\+\_\+audio\+\_\+type\+\_\+t} audio\+Bit\+Depth $\vert$\+What is the bit depth of audio \hyperlink{openavb__audio__pub_8h_ae64ee32f6ac9a6b2cf607f46ee4160bd}{avb\+\_\+audio\+\_\+bit\+\_\+depth\+\_\+t} audio\+Channels $\vert$\+How many channels there are \hyperlink{openavb__audio__pub_8h_a8cc6b9a1352da050ead620139f49acc4}{avb\+\_\+audio\+\_\+channels\+\_\+t} sparse\+Mode $\vert$\+Timestamping mode \hyperlink{openavb__map__aaf__audio_8c_af4359f8edef6a32baf92eb80ec13176a}{avb\+\_\+audio\+\_\+sparse\+\_\+mode\+\_\+t}

Below you can find description of how to set up those variables in interfaces
\begin{DoxyItemize}
\item \hyperlink{wav_file_intf}{wav file interface}
\item \hyperlink{alsa_intf}{alsa interface}
\end{DoxyItemize}

{\bfseries Note}\+: If any of these fields are not set correct the mapping module will not configure the Media Queue correctly.

{\bfseries Note}\+: Both the talker and listener must be configured with matching audio parameters. If the received data on the listener does not match the configured parameters the stream will still be started and data will still flow but no audio will be played. 