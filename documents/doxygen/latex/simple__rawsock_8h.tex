\hypertarget{simple__rawsock_8h}{}\section{lib/avtp\+\_\+pipeline/platform/\+Linux/rawsock/simple\+\_\+rawsock.h 파일 참조}
\label{simple__rawsock_8h}\index{lib/avtp\+\_\+pipeline/platform/\+Linux/rawsock/simple\+\_\+rawsock.\+h@{lib/avtp\+\_\+pipeline/platform/\+Linux/rawsock/simple\+\_\+rawsock.\+h}}
{\ttfamily \#include \char`\"{}rawsock\+\_\+impl.\+h\char`\"{}}\\*
simple\+\_\+rawsock.\+h에 대한 include 의존 그래프
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{simple__rawsock_8h__incl}
\end{center}
\end{figure}
이 그래프는 이 파일을 직/간접적으로 include 하는 파일들을 보여줍니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{simple__rawsock_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{데이타 구조}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structsimple__rawsock__t}{simple\+\_\+rawsock\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{함수}
\begin{DoxyCompactItemize}
\item 
\hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{simple__rawsock_8h_a4a74553012375bcbfc02684b3381f183}{simple\+Avb\+Check\+Interface} (const char $\ast$\hyperlink{aaf-talker_8c_ac7b430acaa92a7a26fbcdad47d2efc20}{ifname}, \hyperlink{structif__info__t}{if\+\_\+info\+\_\+t} $\ast$info)
\item 
void $\ast$ \hyperlink{simple__rawsock_8h_a3791f04c920de1731e2c08b009e30fdd}{simple\+Rawsock\+Open} (\hyperlink{structsimple__rawsock__t}{simple\+\_\+rawsock\+\_\+t} $\ast$rawsock, const char $\ast$\hyperlink{aaf-talker_8c_ac7b430acaa92a7a26fbcdad47d2efc20}{ifname}, \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} rx\+\_\+mode, \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} tx\+\_\+mode, \hyperlink{openavb__types__base__pub_8h_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16} \hyperlink{rawsock__tx_8c_af3d6d4ec5b93edfddc9de51233ae9f7e}{ethertype}, \hyperlink{openavb__types__base__pub_8h_a696390429f2f3b644bde8d0322a24124}{U32} \hyperlink{gstavbsink_8c_ad662aa56c1696f09c0ac6b97abafac6d}{frame\+\_\+size}, \hyperlink{openavb__types__base__pub_8h_a696390429f2f3b644bde8d0322a24124}{U32} num\+\_\+frames)
\item 
void \hyperlink{simple__rawsock_8h_aad9fe1265c59c18f7dea3d27057da7d8}{simple\+Rawsock\+Close} (void $\ast$pv\+Rawsock)
\item 
\hyperlink{openavb__types__base__pub_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8} $\ast$ \hyperlink{simple__rawsock_8h_afcf9f5fcd9f7a999262b82e0ed41ab7b}{simple\+Rawsock\+Get\+Tx\+Frame} (void $\ast$pv\+Rawsock, \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} blocking, unsigned int $\ast$len)
\item 
\hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{simple__rawsock_8h_a53146a27c3b2a89512d84875d720246c}{simple\+Rawsock\+Tx\+Set\+Mark} (void $\ast$pv\+Rawsock, int mark)
\item 
\hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{simple__rawsock_8h_af0b3af3f75fbd7270b047e0c6c83c8e3}{simple\+Rawsock\+Tx\+Set\+Hdr} (void $\ast$pv\+Rawsock, \hyperlink{structhdr__info__t}{hdr\+\_\+info\+\_\+t} $\ast$p\+Hdr)
\item 
\hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{simple__rawsock_8h_a22a9335ec218a3387e641c3dbf6404eb}{simple\+Rawsock\+Tx\+Frame\+Ready} (void $\ast$pv\+Rawsock, \hyperlink{openavb__types__base__pub_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8} $\ast$p\+Buffer, unsigned int len, \hyperlink{openavb__types__base__pub_8h_a25809e0734a149248fcf5831efa4e33d}{U64} time\+Nsec)
\item 
int \hyperlink{simple__rawsock_8h_a32de5da53ceb939ed6a5bc0eb137ca0a}{simple\+Rawsock\+Send} (void $\ast$pv\+Rawsock)
\item 
\hyperlink{openavb__types__base__pub_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8} $\ast$ \hyperlink{simple__rawsock_8h_afe312b491647cbed56e4aebd9b721307}{simple\+Rawsock\+Get\+Rx\+Frame} (void $\ast$pv\+Rawsock, \hyperlink{openavb__types__base__pub_8h_a696390429f2f3b644bde8d0322a24124}{U32} \hyperlink{aaf-listener_8c_a869c60cb165af7b6177060c00c5c416c}{timeout}, unsigned int $\ast$offset, unsigned int $\ast$len)
\item 
\hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{simple__rawsock_8h_a1a41f35bdfba4a39076106c042c2498d}{simple\+Rawsock\+Rx\+Multicast} (void $\ast$pv\+Rawsock, \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} add\+\_\+membership, const \hyperlink{openavb__types__base__pub_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8} addr\mbox{[}\hyperlink{avb__avtp_8h_a9822d89774e0d6ddaa06503950130423}{E\+T\+H\+\_\+\+A\+L\+EN}\mbox{]})
\item 
\hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{simple__rawsock_8h_a48027d2d6c434850c8a7d74ead783205}{simple\+Rawsock\+Rx\+A\+V\+T\+P\+Subtype} (void $\ast$rawsock, \hyperlink{openavb__types__base__pub_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8} subtype)
\item 
int \hyperlink{simple__rawsock_8h_a5edac48179356179e18a20e74e422c8f}{simple\+Rawsock\+Get\+Socket} (void $\ast$pv\+Rawsock)
\item 
\hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{simple__rawsock_8h_a61efa7cce6a2bd7cf5b541a7ddaef3b0}{simple\+Rawsock\+Rel\+Rx\+Frame} (void $\ast$pv\+Rawsock, \hyperlink{openavb__types__base__pub_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8} $\ast$p\+Frame)
\end{DoxyCompactItemize}


\subsection{함수 문서화}
\index{simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}!simple\+Avb\+Check\+Interface@{simple\+Avb\+Check\+Interface}}
\index{simple\+Avb\+Check\+Interface@{simple\+Avb\+Check\+Interface}!simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}}
\subsubsection[{\texorpdfstring{simple\+Avb\+Check\+Interface(const char $\ast$ifname, if\+\_\+info\+\_\+t $\ast$info)}{simpleAvbCheckInterface(const char *ifname, if_info_t *info)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} simple\+Avb\+Check\+Interface (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{ifname, }
\item[{{\bf if\+\_\+info\+\_\+t} $\ast$}]{info}
\end{DoxyParamCaption}
)}\hypertarget{simple__rawsock_8h_a4a74553012375bcbfc02684b3381f183}{}\label{simple__rawsock_8h_a4a74553012375bcbfc02684b3381f183}


simple\+\_\+rawsock.\+c 파일의 44 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
45 \{
46     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
47 
48     \textcolor{keywordflow}{if} (!\hyperlink{aaf-talker_8c_ac7b430acaa92a7a26fbcdad47d2efc20}{ifname} || !info) \{
49         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Checking interface; invalid arguments"});
50         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
51         \textcolor{keywordflow}{return} \hyperlink{maap__log_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
52     \}
53 
54     \textcolor{comment}{// zap the result struct}
55     memset(info, 0, \textcolor{keyword}{sizeof}(\hyperlink{structif__info__t}{if\_info\_t}));
56 
57     \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_afcf1f0c1d10ae9efe3782eb6cae78355}{AVB\_LOGF\_DEBUG}(\textcolor{stringliteral}{"ifname=%s"}, \hyperlink{aaf-talker_8c_ac7b430acaa92a7a26fbcdad47d2efc20}{ifname});
58     strncpy(info->\hyperlink{structif__info__t_a9ea12d6fc5b2c586092468ee1a86162a}{name}, \hyperlink{aaf-talker_8c_ac7b430acaa92a7a26fbcdad47d2efc20}{ifname}, \textcolor{keyword}{sizeof}(info->\hyperlink{structif__info__t_a9ea12d6fc5b2c586092468ee1a86162a}{name}) - 1);
59 
60     \textcolor{comment}{// open a throw-away socket - used for our ioctls}
61     \textcolor{keywordtype}{int} sk = socket(AF\_INET, SOCK\_STREAM, 0);
62     \textcolor{keywordflow}{if} (sk == -1) \{
63         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a7965828e6f132ce789a962b917519e24}{AVB\_LOGF\_ERROR}(\textcolor{stringliteral}{"Checking interface; socket open failed: %s"}, strerror(errno));
64         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
65         \textcolor{keywordflow}{return} \hyperlink{maap__log_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
66     \}
67 
68     \textcolor{comment}{// set the name of the interface in the ioctl request struct}
69     \textcolor{keyword}{struct }ifreq ifr;
70     memset(&ifr, 0, \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} ifreq));
71     strncpy(ifr.ifr\_name, \hyperlink{aaf-talker_8c_ac7b430acaa92a7a26fbcdad47d2efc20}{ifname}, \textcolor{keyword}{sizeof}(ifr.ifr\_name) - 1);
72 
73     \textcolor{comment}{// First check if the interface is up}
74     \textcolor{comment}{//  (also proves that the interface exists!)}
75     \textcolor{keywordtype}{int} r = ioctl(sk, SIOCGIFFLAGS, &ifr);
76     \textcolor{keywordflow}{if} (r != 0) \{
77         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a7965828e6f132ce789a962b917519e24}{AVB\_LOGF\_ERROR}(\textcolor{stringliteral}{"Checking interface; ioctl(SIOCGIFFLAGS) failed: %s"}, strerror(errno))
      ;
78         close(sk);
79         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
80         \textcolor{keywordflow}{return} \hyperlink{maap__log_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
81     \}
82 
83     \textcolor{keywordflow}{if} (!(ifr.ifr\_flags&IFF\_UP)) \{
84         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a7965828e6f132ce789a962b917519e24}{AVB\_LOGF\_ERROR}(\textcolor{stringliteral}{"Checking interface; interface is not up: %s"}, 
      \hyperlink{aaf-talker_8c_ac7b430acaa92a7a26fbcdad47d2efc20}{ifname});
85         close(sk);
86         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
87         \textcolor{keywordflow}{return} \hyperlink{maap__log_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
88     \}
89 
90     \textcolor{comment}{// get index for interface}
91     r = ioctl(sk, SIOCGIFINDEX, &ifr);
92     \textcolor{keywordflow}{if} (r != 0) \{
93         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a7965828e6f132ce789a962b917519e24}{AVB\_LOGF\_ERROR}(\textcolor{stringliteral}{"Checking interface; ioctl(SIOCGIFINDEX) failed: %s"}, strerror(errno))
      ;
94         close(sk);
95         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
96         \textcolor{keywordflow}{return} \hyperlink{maap__log_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
97     \}
98     info->\hyperlink{structif__info__t_a750b5d744c39a06bfb13e6eb010e35d0}{index} = ifr.ifr\_ifindex;
99 
100     \textcolor{comment}{// get the MAC address for the interface}
101     r = ioctl(sk, SIOCGIFHWADDR, &ifr);
102     \textcolor{keywordflow}{if} (r != 0) \{
103         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a7965828e6f132ce789a962b917519e24}{AVB\_LOGF\_ERROR}(\textcolor{stringliteral}{"Checking interface; ioctl(SIOCGIFHWADDR) failed: %s"}, strerror(errno)
      );
104         close(sk);
105         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
106         \textcolor{keywordflow}{return} \hyperlink{maap__log_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
107     \}
108     memcpy(&info->\hyperlink{structif__info__t_a42d8b5e2d1a2c12771953cdf097f7173}{mac}.ether\_addr\_octet, &ifr.ifr\_hwaddr.sa\_data, \hyperlink{openavb__avdecc__pub_8h_a9822d89774e0d6ddaa06503950130423}{ETH\_ALEN});
109 
110     \textcolor{comment}{// get the MTU for the interface}
111     r = ioctl(sk, SIOCGIFMTU, &ifr);
112     \textcolor{keywordflow}{if} (r != 0) \{
113         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a7965828e6f132ce789a962b917519e24}{AVB\_LOGF\_ERROR}(\textcolor{stringliteral}{"Checking interface; ioctl(SIOCGIFMTU) failed: %s"}, strerror(errno));
114         close(sk);
115         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
116         \textcolor{keywordflow}{return} \hyperlink{maap__log_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
117     \}
118     info->\hyperlink{structif__info__t_a5f8594e356005c64e4a2625755b6c849}{mtu} = ifr.ifr\_mtu;
119 
120     \textcolor{comment}{// close the temporary socket}
121     close(sk);
122 
123     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
124     \textcolor{keywordflow}{return} \hyperlink{maap__log_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
125 \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{simple__rawsock_8h_a4a74553012375bcbfc02684b3381f183_icgraph}
\end{center}
\end{figure}


\index{simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}!simple\+Rawsock\+Close@{simple\+Rawsock\+Close}}
\index{simple\+Rawsock\+Close@{simple\+Rawsock\+Close}!simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}}
\subsubsection[{\texorpdfstring{simple\+Rawsock\+Close(void $\ast$pv\+Rawsock)}{simpleRawsockClose(void *pvRawsock)}}]{\setlength{\rightskip}{0pt plus 5cm}void simple\+Rawsock\+Close (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{pv\+Rawsock}
\end{DoxyParamCaption}
)}\hypertarget{simple__rawsock_8h_aad9fe1265c59c18f7dea3d27057da7d8}{}\label{simple__rawsock_8h_aad9fe1265c59c18f7dea3d27057da7d8}


simple\+\_\+rawsock.\+c 파일의 217 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
218 \{
219     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
220     \hyperlink{structsimple__rawsock__t}{simple\_rawsock\_t} *rawsock = (\hyperlink{structsimple__rawsock__t}{simple\_rawsock\_t}*)pvRawsock;
221 
222     \textcolor{keywordflow}{if} (rawsock) \{
223         \textcolor{comment}{// close the socket}
224         \textcolor{keywordflow}{if} (rawsock->\hyperlink{structsimple__rawsock__t_a5903d0b282fc5eae503de618f896b5e1}{sock} != -1) \{
225             close(rawsock->\hyperlink{structsimple__rawsock__t_a5903d0b282fc5eae503de618f896b5e1}{sock});
226             rawsock->\hyperlink{structsimple__rawsock__t_a5903d0b282fc5eae503de618f896b5e1}{sock} = -1;
227         \}
228     \}
229 
230     \hyperlink{rawsock__impl_8c_a4b868d77584899fedc55c42e223df585}{baseRawsockClose}(rawsock);
231 
232     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
233 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=332pt]{simple__rawsock_8h_aad9fe1265c59c18f7dea3d27057da7d8_cgraph}
\end{center}
\end{figure}




이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{simple__rawsock_8h_aad9fe1265c59c18f7dea3d27057da7d8_icgraph}
\end{center}
\end{figure}


\index{simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}!simple\+Rawsock\+Get\+Rx\+Frame@{simple\+Rawsock\+Get\+Rx\+Frame}}
\index{simple\+Rawsock\+Get\+Rx\+Frame@{simple\+Rawsock\+Get\+Rx\+Frame}!simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}}
\subsubsection[{\texorpdfstring{simple\+Rawsock\+Get\+Rx\+Frame(void $\ast$pv\+Rawsock, U32 timeout, unsigned int $\ast$offset, unsigned int $\ast$len)}{simpleRawsockGetRxFrame(void *pvRawsock, U32 timeout, unsigned int *offset, unsigned int *len)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf U8}$\ast$ simple\+Rawsock\+Get\+Rx\+Frame (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{pv\+Rawsock, }
\item[{{\bf U32}}]{timeout, }
\item[{unsigned int $\ast$}]{offset, }
\item[{unsigned int $\ast$}]{len}
\end{DoxyParamCaption}
)}\hypertarget{simple__rawsock_8h_afe312b491647cbed56e4aebd9b721307}{}\label{simple__rawsock_8h_afe312b491647cbed56e4aebd9b721307}


simple\+\_\+rawsock.\+c 파일의 346 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
347 \{
348     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
349     \hyperlink{structsimple__rawsock__t}{simple\_rawsock\_t} *rawsock = (\hyperlink{structsimple__rawsock__t}{simple\_rawsock\_t}*)pvRawsock;
350     \textcolor{keywordflow}{if} (!\hyperlink{rawsock__impl_8h_a0215ee9cb615329e13dfb6b2f28107ff}{VALID\_RX\_RAWSOCK}(rawsock)) \{
351         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Getting RX frame; invalid arguments"});
352         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
353         \textcolor{keywordflow}{return} \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
354     \}
355 \textcolor{comment}{//  if (rawsock->buffersOut >= rawsock->frameCount) \{}
356 \textcolor{comment}{//      AVB\_LOG\_ERROR("Too many RX buffers in use");}
357 \textcolor{comment}{//      AVB\_TRACE\_EXIT(AVB\_TRACE\_RAWSOCK\_DETAIL);}
358 \textcolor{comment}{//      return NULL;}
359 \textcolor{comment}{//  \}}
360 
361     *offset = 0;
362     *len = 0;
363 
364     \textcolor{comment}{// Wait until a packet is available, or a timeout occurs.}
365     \textcolor{keyword}{struct }timeval tv\_timeout = \{ \hyperlink{aaf-listener_8c_a869c60cb165af7b6177060c00c5c416c}{timeout} / \hyperlink{maap__helper__linux_8h_a8a708413d6171e7d86056793abe2cd1a}{MICROSECONDS\_PER\_SECOND}, 
      \hyperlink{aaf-listener_8c_a869c60cb165af7b6177060c00c5c416c}{timeout} % \hyperlink{maap__helper__linux_8h_a8a708413d6171e7d86056793abe2cd1a}{MICROSECONDS\_PER\_SECOND} \};
366     fd\_set readfds;
367     FD\_ZERO( &readfds );
368     FD\_SET( rawsock->\hyperlink{structsimple__rawsock__t_a5903d0b282fc5eae503de618f896b5e1}{sock}, &readfds );
369     \textcolor{keywordtype}{int} \hyperlink{gst__avb__playbin_8c_a6ce68847c12434f60d1b2654a3dc3409}{err} = select( rawsock->\hyperlink{structsimple__rawsock__t_a5903d0b282fc5eae503de618f896b5e1}{sock} + 1, &readfds, \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, &tv\_timeout );
370     \textcolor{keywordflow}{if} (err <= 0) \{
371         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
372         \textcolor{keywordflow}{return} \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
373     \}
374 
375     \textcolor{keywordtype}{int} \hyperlink{namespaceavdecc__lib_ab6b306ef981f5e21bb41ea2c2dbe8cd9}{flags} = 0;
376 
377     \hyperlink{openavb__types__base__pub_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8} *pBuffer = rawsock->\hyperlink{structsimple__rawsock__t_a60a36f98faf9efc0f3447c6014c822ce}{rxBuffer};
378     *len = recv(rawsock->\hyperlink{structsimple__rawsock__t_a5903d0b282fc5eae503de618f896b5e1}{sock}, pBuffer, rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.\hyperlink{structbase__rawsock_aa3dad37bb3b3c95138a96b2668936923}{frameSize}, flags);
379 
380     \textcolor{keywordflow}{if} (*len == -1) \{
381         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a7965828e6f132ce789a962b917519e24}{AVB\_LOGF\_ERROR}(\textcolor{stringliteral}{"%s %s"}, \_\_func\_\_, strerror(errno));
382         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
383         \textcolor{keywordflow}{return} \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
384     \}
385 
386     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
387     \textcolor{keywordflow}{return} pBuffer;
388 \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{simple__rawsock_8h_afe312b491647cbed56e4aebd9b721307_icgraph}
\end{center}
\end{figure}


\index{simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}!simple\+Rawsock\+Get\+Socket@{simple\+Rawsock\+Get\+Socket}}
\index{simple\+Rawsock\+Get\+Socket@{simple\+Rawsock\+Get\+Socket}!simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}}
\subsubsection[{\texorpdfstring{simple\+Rawsock\+Get\+Socket(void $\ast$pv\+Rawsock)}{simpleRawsockGetSocket(void *pvRawsock)}}]{\setlength{\rightskip}{0pt plus 5cm}int simple\+Rawsock\+Get\+Socket (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{pv\+Rawsock}
\end{DoxyParamCaption}
)}\hypertarget{simple__rawsock_8h_a5edac48179356179e18a20e74e422c8f}{}\label{simple__rawsock_8h_a5edac48179356179e18a20e74e422c8f}


simple\+\_\+rawsock.\+c 파일의 482 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
483 \{
484     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
485     \hyperlink{structsimple__rawsock__t}{simple\_rawsock\_t} *rawsock = (\hyperlink{structsimple__rawsock__t}{simple\_rawsock\_t}*)pvRawsock;
486     \textcolor{keywordflow}{if} (!rawsock) \{
487         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Getting socket; invalid arguments"});
488         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
489         \textcolor{keywordflow}{return} -1;
490     \}
491 
492     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
493     \textcolor{keywordflow}{return} rawsock->\hyperlink{structsimple__rawsock__t_a5903d0b282fc5eae503de618f896b5e1}{sock};
494 \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{simple__rawsock_8h_a5edac48179356179e18a20e74e422c8f_icgraph}
\end{center}
\end{figure}


\index{simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}!simple\+Rawsock\+Get\+Tx\+Frame@{simple\+Rawsock\+Get\+Tx\+Frame}}
\index{simple\+Rawsock\+Get\+Tx\+Frame@{simple\+Rawsock\+Get\+Tx\+Frame}!simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}}
\subsubsection[{\texorpdfstring{simple\+Rawsock\+Get\+Tx\+Frame(void $\ast$pv\+Rawsock, bool blocking, unsigned int $\ast$len)}{simpleRawsockGetTxFrame(void *pvRawsock, bool blocking, unsigned int *len)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf U8}$\ast$ simple\+Rawsock\+Get\+Tx\+Frame (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{pv\+Rawsock, }
\item[{{\bf bool}}]{blocking, }
\item[{unsigned int $\ast$}]{len}
\end{DoxyParamCaption}
)}\hypertarget{simple__rawsock_8h_afcf9f5fcd9f7a999262b82e0ed41ab7b}{}\label{simple__rawsock_8h_afcf9f5fcd9f7a999262b82e0ed41ab7b}


simple\+\_\+rawsock.\+c 파일의 236 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
237 \{
238     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
239     \hyperlink{structsimple__rawsock__t}{simple\_rawsock\_t} *rawsock = (\hyperlink{structsimple__rawsock__t}{simple\_rawsock\_t}*)pvRawsock;
240 
241     \textcolor{keywordflow}{if} (!\hyperlink{rawsock__impl_8h_a4b69291961256f36eefc280eb2d3e447}{VALID\_TX\_RAWSOCK}(rawsock)) \{
242         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Getting TX frame; bad arguments"});
243         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
244         \textcolor{keywordflow}{return} \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
245     \}
246 \textcolor{comment}{//  if (rawsock->buffersOut >= rawsock->frameCount) \{}
247 \textcolor{comment}{//      AVB\_LOG\_ERROR("Getting TX frame; too many TX buffers in use");}
248 \textcolor{comment}{//      AVB\_TRACE\_EXIT(AVB\_TRACE\_RAWSOCK\_DETAIL);}
249 \textcolor{comment}{//      return NULL;}
250 \textcolor{comment}{//  \}}
251 
252     \hyperlink{openavb__types__base__pub_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8} *pBuffer = rawsock->\hyperlink{structsimple__rawsock__t_a7661fa3516bae1bdfe2000e2dea164ae}{txBuffer};
253 
254     \textcolor{comment}{// Remind client how big the frame buffer is}
255     \textcolor{keywordflow}{if} (len)
256         *len = rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.\hyperlink{structbase__rawsock_aa3dad37bb3b3c95138a96b2668936923}{frameSize};
257 
258     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
259     \textcolor{keywordflow}{return}  pBuffer;
260 \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{simple__rawsock_8h_afcf9f5fcd9f7a999262b82e0ed41ab7b_icgraph}
\end{center}
\end{figure}


\index{simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}!simple\+Rawsock\+Open@{simple\+Rawsock\+Open}}
\index{simple\+Rawsock\+Open@{simple\+Rawsock\+Open}!simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}}
\subsubsection[{\texorpdfstring{simple\+Rawsock\+Open(simple\+\_\+rawsock\+\_\+t $\ast$rawsock, const char $\ast$ifname, bool rx\+\_\+mode, bool tx\+\_\+mode, U16 ethertype, U32 frame\+\_\+size, U32 num\+\_\+frames)}{simpleRawsockOpen(simple_rawsock_t *rawsock, const char *ifname, bool rx_mode, bool tx_mode, U16 ethertype, U32 frame_size, U32 num_frames)}}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ simple\+Rawsock\+Open (
\begin{DoxyParamCaption}
\item[{{\bf simple\+\_\+rawsock\+\_\+t} $\ast$}]{rawsock, }
\item[{const char $\ast$}]{ifname, }
\item[{{\bf bool}}]{rx\+\_\+mode, }
\item[{{\bf bool}}]{tx\+\_\+mode, }
\item[{{\bf U16}}]{ethertype, }
\item[{{\bf U32}}]{frame\+\_\+size, }
\item[{{\bf U32}}]{num\+\_\+frames}
\end{DoxyParamCaption}
)}\hypertarget{simple__rawsock_8h_a3791f04c920de1731e2c08b009e30fdd}{}\label{simple__rawsock_8h_a3791f04c920de1731e2c08b009e30fdd}


simple\+\_\+rawsock.\+c 파일의 128 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
129 \{
130     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
131 
132     \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_afcf1f0c1d10ae9efe3782eb6cae78355}{AVB\_LOGF\_DEBUG}(\textcolor{stringliteral}{"Open, rx=%d, tx=%d, ethertype=%x size=%d, num=%d"},    rx\_mode, tx\_mode, 
      \hyperlink{avtp__rx_8c_af3d6d4ec5b93edfddc9de51233ae9f7e}{ethertype}, \hyperlink{gstavbsink_8c_ad662aa56c1696f09c0ac6b97abafac6d}{frame\_size}, num\_frames);
133 
134     \hyperlink{rawsock__impl_8c_a63d234ca58178da0dbe635962b70846d}{baseRawsockOpen}(&rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}, \hyperlink{aaf-talker_8c_ac7b430acaa92a7a26fbcdad47d2efc20}{ifname}, rx\_mode, tx\_mode, 
      \hyperlink{avtp__rx_8c_af3d6d4ec5b93edfddc9de51233ae9f7e}{ethertype}, \hyperlink{gstavbsink_8c_ad662aa56c1696f09c0ac6b97abafac6d}{frame\_size}, num\_frames);
135 
136     rawsock->\hyperlink{structsimple__rawsock__t_a5903d0b282fc5eae503de618f896b5e1}{sock} = -1;
137 
138     \textcolor{comment}{// Get info about the network device}
139     \textcolor{keywordflow}{if} (!\hyperlink{simple__rawsock_8c_a4a74553012375bcbfc02684b3381f183}{simpleAvbCheckInterface}(\hyperlink{aaf-talker_8c_ac7b430acaa92a7a26fbcdad47d2efc20}{ifname}, &(rawsock->
      \hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.\hyperlink{structbase__rawsock_a854c8024bff83a6b215a4897ac1d8944}{ifInfo}))) \{
140         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a7965828e6f132ce789a962b917519e24}{AVB\_LOGF\_ERROR}(\textcolor{stringliteral}{"Creating rawsock; bad interface name: %s"}, 
      \hyperlink{aaf-talker_8c_ac7b430acaa92a7a26fbcdad47d2efc20}{ifname});
141         \hyperlink{simple__rawsock_8c_aad9fe1265c59c18f7dea3d27057da7d8}{simpleRawsockClose}(rawsock);
142         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
143         \textcolor{keywordflow}{return} \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
144     \}
145 
146     \textcolor{comment}{// Deal with frame size.}
147     \textcolor{keywordflow}{if} (rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.\hyperlink{structbase__rawsock_aa3dad37bb3b3c95138a96b2668936923}{frameSize} == 0) \{
148         \textcolor{comment}{// use interface MTU as max frames size, if none specified}
149         rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.\hyperlink{structbase__rawsock_aa3dad37bb3b3c95138a96b2668936923}{frameSize} = rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.\hyperlink{structbase__rawsock_a854c8024bff83a6b215a4897ac1d8944}{ifInfo}.
      \hyperlink{structif__info__t_a5f8594e356005c64e4a2625755b6c849}{mtu} + ETH\_HLEN + \hyperlink{kcompat_8h_a0a381d2534972044eccae2ab96806991}{VLAN\_HLEN};
150     \}
151     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.\hyperlink{structbase__rawsock_aa3dad37bb3b3c95138a96b2668936923}{frameSize} > rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.\hyperlink{structbase__rawsock_a854c8024bff83a6b215a4897ac1d8944}{ifInfo}.
      \hyperlink{structif__info__t_a5f8594e356005c64e4a2625755b6c849}{mtu} + ETH\_HLEN + \hyperlink{kcompat_8h_a0a381d2534972044eccae2ab96806991}{VLAN\_HLEN}) \{
152         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Creating raswsock; requested frame size exceeds MTU"});
153         \hyperlink{simple__rawsock_8c_aad9fe1265c59c18f7dea3d27057da7d8}{simpleRawsockClose}(rawsock);
154         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
155         \textcolor{keywordflow}{return} \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
156     \}
157     rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.\hyperlink{structbase__rawsock_aa3dad37bb3b3c95138a96b2668936923}{frameSize} = TPACKET\_ALIGN(rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.
      \hyperlink{structbase__rawsock_aa3dad37bb3b3c95138a96b2668936923}{frameSize});
158 
159     \textcolor{comment}{// Prepare default Ethernet header.}
160     rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.\hyperlink{structbase__rawsock_aa718a737f571d39dde84a733a7dc08b3}{ethHdrLen} = \textcolor{keyword}{sizeof}(\hyperlink{mrpd_8h_adb02009b0d416a4c7ba2f427dbf0e5cb}{eth\_hdr\_t});
161     memset(&(rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.\hyperlink{structbase__rawsock_a96ca5b853db73607106ccfb108196547}{ethHdr}.\hyperlink{structbase__rawsock_a53fa4eb792bc48ddf828aa079f555c15}{notag}.dhost), 0xFF, \hyperlink{openavb__avdecc__pub_8h_a9822d89774e0d6ddaa06503950130423}{ETH\_ALEN});
162     memcpy(&(rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.\hyperlink{structbase__rawsock_a96ca5b853db73607106ccfb108196547}{ethHdr}.\hyperlink{structbase__rawsock_a53fa4eb792bc48ddf828aa079f555c15}{notag}.shost), &(rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.
      \hyperlink{structbase__rawsock_a854c8024bff83a6b215a4897ac1d8944}{ifInfo}.\hyperlink{structif__info__t_a42d8b5e2d1a2c12771953cdf097f7173}{mac}), \hyperlink{openavb__avdecc__pub_8h_a9822d89774e0d6ddaa06503950130423}{ETH\_ALEN});
163     rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.\hyperlink{structbase__rawsock_a96ca5b853db73607106ccfb108196547}{ethHdr}.\hyperlink{structbase__rawsock_a53fa4eb792bc48ddf828aa079f555c15}{notag}.ethertype = htons(rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.
      \hyperlink{structbase__rawsock_a71d9329c840aa95ce42cc15d25219bfb}{ethertype});
164 
165     \textcolor{comment}{// Create socket}
166     rawsock->\hyperlink{structsimple__rawsock__t_a5903d0b282fc5eae503de618f896b5e1}{sock} = socket(PF\_PACKET, SOCK\_RAW, htons(rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.
      \hyperlink{structbase__rawsock_a71d9329c840aa95ce42cc15d25219bfb}{ethertype}));
167     \textcolor{keywordflow}{if} (rawsock->\hyperlink{structsimple__rawsock__t_a5903d0b282fc5eae503de618f896b5e1}{sock} == -1) \{
168         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a7965828e6f132ce789a962b917519e24}{AVB\_LOGF\_ERROR}(\textcolor{stringliteral}{"Creating rawsock; opening socket: %s"}, strerror(errno));
169         \hyperlink{simple__rawsock_8c_aad9fe1265c59c18f7dea3d27057da7d8}{simpleRawsockClose}(rawsock);
170         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
171         \textcolor{keywordflow}{return} \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
172     \}
173 
174     \textcolor{comment}{// Allow address reuse}
175     \textcolor{keywordtype}{int} temp = 1;
176     \textcolor{keywordflow}{if}(setsockopt(rawsock->\hyperlink{structsimple__rawsock__t_a5903d0b282fc5eae503de618f896b5e1}{sock}, SOL\_SOCKET, SO\_REUSEADDR, &temp, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int})) < 0) \{
177         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Creating rawsock; failed to set reuseaddr"});
178         \hyperlink{simple__rawsock_8c_aad9fe1265c59c18f7dea3d27057da7d8}{simpleRawsockClose}(rawsock);
179         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
180         \textcolor{keywordflow}{return} \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
181     \}
182 
183     \textcolor{comment}{// Bind to interface}
184     \textcolor{keyword}{struct }sockaddr\_ll my\_addr;
185     memset(&my\_addr, 0, \textcolor{keyword}{sizeof}(my\_addr));
186     my\_addr.sll\_family = PF\_PACKET;
187     my\_addr.sll\_protocol = htons(rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.\hyperlink{structbase__rawsock_a71d9329c840aa95ce42cc15d25219bfb}{ethertype});
188     my\_addr.sll\_ifindex = rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.\hyperlink{structbase__rawsock_a854c8024bff83a6b215a4897ac1d8944}{ifInfo}.\hyperlink{structif__info__t_a750b5d744c39a06bfb13e6eb010e35d0}{index};
189 
190     \textcolor{keywordflow}{if} (bind(rawsock->\hyperlink{structsimple__rawsock__t_a5903d0b282fc5eae503de618f896b5e1}{sock}, (\textcolor{keyword}{struct} sockaddr*)&my\_addr, \textcolor{keyword}{sizeof}(my\_addr)) == -1) \{
191         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a7965828e6f132ce789a962b917519e24}{AVB\_LOGF\_ERROR}(\textcolor{stringliteral}{"Creating rawsock; bind socket: %s"}, strerror(errno));
192         \hyperlink{simple__rawsock_8c_aad9fe1265c59c18f7dea3d27057da7d8}{simpleRawsockClose}(rawsock);
193         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
194         \textcolor{keywordflow}{return} \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
195     \}
196 
197 
198     \textcolor{comment}{// fill virtual functions table}
199     \hyperlink{structrawsock__cb__t}{rawsock\_cb\_t} *cb = &rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.\hyperlink{structbase__rawsock_a2b12273a224877b0bbbe5e7f774c7568}{cb};
200     cb->\hyperlink{structrawsock__cb__t_a985e065be665d4efc528911317edb3fa}{close} = \hyperlink{simple__rawsock_8c_aad9fe1265c59c18f7dea3d27057da7d8}{simpleRawsockClose};
201     cb->\hyperlink{structrawsock__cb__t_abac4c30aae337d681176b220b37237fc}{getTxFrame} = \hyperlink{simple__rawsock_8c_afcf9f5fcd9f7a999262b82e0ed41ab7b}{simpleRawsockGetTxFrame};
202     cb->\hyperlink{structrawsock__cb__t_a926003e5137976663821b27ace9c3dbf}{txSetMark} = \hyperlink{simple__rawsock_8c_a53146a27c3b2a89512d84875d720246c}{simpleRawsockTxSetMark};
203     cb->\hyperlink{structrawsock__cb__t_ab875aa95ffb8d23ba35bd17d44e0bbb0}{txSetHdr} = \hyperlink{simple__rawsock_8c_af0b3af3f75fbd7270b047e0c6c83c8e3}{simpleRawsockTxSetHdr};
204     cb->\hyperlink{structrawsock__cb__t_ae06401a7fdbf21f6bfd7fd65d8e760d0}{txFrameReady} = \hyperlink{simple__rawsock_8c_a22a9335ec218a3387e641c3dbf6404eb}{simpleRawsockTxFrameReady};
205     cb->\hyperlink{structrawsock__cb__t_ae6202a72f83a5d92e126344ed22470a1}{send} = \hyperlink{simple__rawsock_8c_a32de5da53ceb939ed6a5bc0eb137ca0a}{simpleRawsockSend};
206     cb->\hyperlink{structrawsock__cb__t_ae9c0b8e9e26d88a6d7ef3191fec6cd5a}{getRxFrame} = \hyperlink{simple__rawsock_8c_afe312b491647cbed56e4aebd9b721307}{simpleRawsockGetRxFrame};
207     cb->\hyperlink{structrawsock__cb__t_a0683e53a5342e7e7aa9755ffcccb49cb}{rxMulticast} = \hyperlink{simple__rawsock_8c_a1a41f35bdfba4a39076106c042c2498d}{simpleRawsockRxMulticast};
208     cb->\hyperlink{structrawsock__cb__t_a0b3fe73f957260501eec27c9b0fb74ae}{rxAVTPSubtype} = \hyperlink{simple__rawsock_8c_a48027d2d6c434850c8a7d74ead783205}{simpleRawsockRxAVTPSubtype};
209     cb->\hyperlink{structrawsock__cb__t_a07a3216facf720770cc7a9f92d86496c}{getSocket} = \hyperlink{simple__rawsock_8c_a5edac48179356179e18a20e74e422c8f}{simpleRawsockGetSocket};
210     cb->\hyperlink{structrawsock__cb__t_a428063ea57178d7db91ee180d7028101}{relRxFrame} = \hyperlink{simple__rawsock_8c_a61efa7cce6a2bd7cf5b541a7ddaef3b0}{simpleRawsockRelRxFrame};
211 
212     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
213     \textcolor{keywordflow}{return} rawsock;
214 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{simple__rawsock_8h_a3791f04c920de1731e2c08b009e30fdd_cgraph}
\end{center}
\end{figure}




이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{simple__rawsock_8h_a3791f04c920de1731e2c08b009e30fdd_icgraph}
\end{center}
\end{figure}


\index{simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}!simple\+Rawsock\+Rel\+Rx\+Frame@{simple\+Rawsock\+Rel\+Rx\+Frame}}
\index{simple\+Rawsock\+Rel\+Rx\+Frame@{simple\+Rawsock\+Rel\+Rx\+Frame}!simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}}
\subsubsection[{\texorpdfstring{simple\+Rawsock\+Rel\+Rx\+Frame(void $\ast$pv\+Rawsock, U8 $\ast$p\+Frame)}{simpleRawsockRelRxFrame(void *pvRawsock, U8 *pFrame)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} simple\+Rawsock\+Rel\+Rx\+Frame (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{pv\+Rawsock, }
\item[{{\bf U8} $\ast$}]{p\+Frame}
\end{DoxyParamCaption}
)}\hypertarget{simple__rawsock_8h_a61efa7cce6a2bd7cf5b541a7ddaef3b0}{}\label{simple__rawsock_8h_a61efa7cce6a2bd7cf5b541a7ddaef3b0}


simple\+\_\+rawsock.\+c 파일의 496 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
497 \{
498     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
499 \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{simple__rawsock_8h_a61efa7cce6a2bd7cf5b541a7ddaef3b0_icgraph}
\end{center}
\end{figure}


\index{simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}!simple\+Rawsock\+Rx\+A\+V\+T\+P\+Subtype@{simple\+Rawsock\+Rx\+A\+V\+T\+P\+Subtype}}
\index{simple\+Rawsock\+Rx\+A\+V\+T\+P\+Subtype@{simple\+Rawsock\+Rx\+A\+V\+T\+P\+Subtype}!simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}}
\subsubsection[{\texorpdfstring{simple\+Rawsock\+Rx\+A\+V\+T\+P\+Subtype(void $\ast$rawsock, U8 subtype)}{simpleRawsockRxAVTPSubtype(void *rawsock, U8 subtype)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} simple\+Rawsock\+Rx\+A\+V\+T\+P\+Subtype (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{rawsock, }
\item[{{\bf U8}}]{subtype}
\end{DoxyParamCaption}
)}\hypertarget{simple__rawsock_8h_a48027d2d6c434850c8a7d74ead783205}{}\label{simple__rawsock_8h_a48027d2d6c434850c8a7d74ead783205}


simple\+\_\+rawsock.\+c 파일의 476 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
477 \{
478     \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \textcolor{comment}{//TODO: implement as BPF to improve performance}
479 \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{simple__rawsock_8h_a48027d2d6c434850c8a7d74ead783205_icgraph}
\end{center}
\end{figure}


\index{simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}!simple\+Rawsock\+Rx\+Multicast@{simple\+Rawsock\+Rx\+Multicast}}
\index{simple\+Rawsock\+Rx\+Multicast@{simple\+Rawsock\+Rx\+Multicast}!simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}}
\subsubsection[{\texorpdfstring{simple\+Rawsock\+Rx\+Multicast(void $\ast$pv\+Rawsock, bool add\+\_\+membership, const U8 addr[E\+T\+H\+\_\+\+A\+L\+EN])}{simpleRawsockRxMulticast(void *pvRawsock, bool add_membership, const U8 addr[ETH_ALEN])}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} simple\+Rawsock\+Rx\+Multicast (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{pv\+Rawsock, }
\item[{{\bf bool}}]{add\+\_\+membership, }
\item[{const {\bf U8}}]{addr\mbox{[}\+E\+T\+H\+\_\+\+A\+L\+E\+N\mbox{]}}
\end{DoxyParamCaption}
)}\hypertarget{simple__rawsock_8h_a1a41f35bdfba4a39076106c042c2498d}{}\label{simple__rawsock_8h_a1a41f35bdfba4a39076106c042c2498d}


simple\+\_\+rawsock.\+c 파일의 391 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
392 \{
393     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
394 
395     \hyperlink{structsimple__rawsock__t}{simple\_rawsock\_t} *rawsock = (\hyperlink{structsimple__rawsock__t}{simple\_rawsock\_t}*)pvRawsock;
396     \textcolor{keywordflow}{if} (!\hyperlink{rawsock__impl_8h_a0215ee9cb615329e13dfb6b2f28107ff}{VALID\_RX\_RAWSOCK}(rawsock)) \{
397         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Setting multicast; invalid arguments"});
398         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
399         \textcolor{keywordflow}{return} \hyperlink{maap__log_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
400     \}
401 
402     \textcolor{keyword}{struct }ether\_addr mcast\_addr;
403     memcpy(mcast\_addr.ether\_addr\_octet, addr, \hyperlink{openavb__avdecc__pub_8h_a9822d89774e0d6ddaa06503950130423}{ETH\_ALEN});
404 
405     \textcolor{comment}{// Fill in the structure for the multicast ioctl}
406     \textcolor{keyword}{struct }packet\_mreq mreq;
407     memset(&mreq, 0, \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} packet\_mreq));
408     mreq.mr\_ifindex = rawsock->\hyperlink{structsimple__rawsock__t_a1507c5af4508d59cb0a730a852763e94}{base}.\hyperlink{structbase__rawsock_a854c8024bff83a6b215a4897ac1d8944}{ifInfo}.\hyperlink{structif__info__t_a750b5d744c39a06bfb13e6eb010e35d0}{index};
409     mreq.mr\_type = PACKET\_MR\_MULTICAST;
410     mreq.mr\_alen = \hyperlink{openavb__avdecc__pub_8h_a9822d89774e0d6ddaa06503950130423}{ETH\_ALEN};
411     memcpy(&mreq.mr\_address, &mcast\_addr.ether\_addr\_octet, \hyperlink{openavb__avdecc__pub_8h_a9822d89774e0d6ddaa06503950130423}{ETH\_ALEN});
412 
413     \textcolor{comment}{// And call the ioctl to add/drop the multicast address}
414     \textcolor{keywordtype}{int} \hyperlink{namespaceastime__fitline_a2f4ab7bf743142dae2e459aa18f9f1d4}{action} = (add\_membership ? PACKET\_ADD\_MEMBERSHIP : PACKET\_DROP\_MEMBERSHIP);
415     \textcolor{keywordflow}{if} (setsockopt(rawsock->\hyperlink{structsimple__rawsock__t_a5903d0b282fc5eae503de618f896b5e1}{sock}, SOL\_PACKET, action,
416                     (\textcolor{keywordtype}{void}*)&mreq, \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} packet\_mreq)) < 0) \{
417         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a7965828e6f132ce789a962b917519e24}{AVB\_LOGF\_ERROR}(\textcolor{stringliteral}{"Setting multicast; setsockopt(%s) failed: %s"},
418                        (add\_membership ? \textcolor{stringliteral}{"PACKET\_ADD\_MEMBERSHIP"} : \textcolor{stringliteral}{"PACKET\_DROP\_MEMBERSHIP"}),
419                        strerror(errno));
420 
421         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
422         \textcolor{keywordflow}{return} \hyperlink{maap__log_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
423     \}
424 
425     \textcolor{comment}{// In addition to adding the multicast membership, we also want to}
426     \textcolor{comment}{//  add a packet filter to restrict the packets that we'll receive}
427     \textcolor{comment}{//  on this socket.  Multicast memberships are global - not}
428     \textcolor{comment}{//  per-socket, so without the filter, this socket would receive}
429     \textcolor{comment}{//  packets for all the multicast addresses added by all other}
430     \textcolor{comment}{//  sockets.}
431     \textcolor{comment}{//}
432     \textcolor{keywordflow}{if} (add\_membership)
433     \{
434         \textcolor{comment}{// Here's the template packet filter code.}
435         \textcolor{comment}{// It was produced by running:}
436         \textcolor{comment}{//   tcpdump -dd ether dest host 91:e0:01:02:03:04}
437         \textcolor{keyword}{struct }sock\_filter bpfCode[] = \{
438             \{ 0x20, 0, 0, 0x00000002 \},
439             \{ 0x15, 0, 3, 0x01020304 \},   \textcolor{comment}{// last 4 bytes of dest mac}
440             \{ 0x28, 0, 0, 0x00000000 \},
441             \{ 0x15, 0, 1, 0x000091e0 \},   \textcolor{comment}{// first 2 bytes of dest mac}
442             \{ 0x06, 0, 0, 0x0000ffff \},
443             \{ 0x06, 0, 0, 0x00000000 \}
444         \};
445 
446         \textcolor{comment}{// We need to graft our multicast dest address into bpfCode}
447         \hyperlink{openavb__types__base__pub_8h_a696390429f2f3b644bde8d0322a24124}{U32} tmp; \hyperlink{openavb__types__base__pub_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8} *buf = (\hyperlink{openavb__types__base__pub_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}*)&tmp;
448         memcpy(buf, mcast\_addr.ether\_addr\_octet + 2, 4);
449         bpfCode[1].k = ntohl(tmp);
450         memset(buf, 0, 4);
451         memcpy(buf + 2, mcast\_addr.ether\_addr\_octet, 2);
452         bpfCode[3].k = ntohl(tmp);
453 
454         \textcolor{comment}{// Now wrap the filter code in the appropriate structure}
455         \textcolor{keyword}{struct }sock\_fprog filter;
456         memset(&filter, 0, \textcolor{keyword}{sizeof}(filter));
457         filter.len = 6;
458         filter.filter = bpfCode;
459 
460         \textcolor{comment}{// And attach it to our socket}
461         \textcolor{keywordflow}{if} (setsockopt(rawsock->\hyperlink{structsimple__rawsock__t_a5903d0b282fc5eae503de618f896b5e1}{sock}, SOL\_SOCKET, SO\_ATTACH\_FILTER,
462                         &filter, \textcolor{keyword}{sizeof}(filter)) < 0) \{
463             \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a7965828e6f132ce789a962b917519e24}{AVB\_LOGF\_ERROR}(\textcolor{stringliteral}{"Setting multicast; setsockopt(SO\_ATTACH\_FILTER) failed: %s"}, 
      strerror(errno));
464         \}
465     \}
466     \textcolor{keywordflow}{else} \{
467         \textcolor{keywordflow}{if} (setsockopt(rawsock->\hyperlink{structsimple__rawsock__t_a5903d0b282fc5eae503de618f896b5e1}{sock}, SOL\_SOCKET, SO\_DETACH\_FILTER, \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, 0) < 0) \{
468             \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a7965828e6f132ce789a962b917519e24}{AVB\_LOGF\_ERROR}(\textcolor{stringliteral}{"Setting multicast; setsockopt(SO\_DETACH\_FILTER) failed: %s"}, 
      strerror(errno));
469         \}
470     \}
471 
472     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
473     \textcolor{keywordflow}{return} \hyperlink{maap__log_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
474 \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{simple__rawsock_8h_a1a41f35bdfba4a39076106c042c2498d_icgraph}
\end{center}
\end{figure}


\index{simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}!simple\+Rawsock\+Send@{simple\+Rawsock\+Send}}
\index{simple\+Rawsock\+Send@{simple\+Rawsock\+Send}!simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}}
\subsubsection[{\texorpdfstring{simple\+Rawsock\+Send(void $\ast$pv\+Rawsock)}{simpleRawsockSend(void *pvRawsock)}}]{\setlength{\rightskip}{0pt plus 5cm}int simple\+Rawsock\+Send (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{pv\+Rawsock}
\end{DoxyParamCaption}
)}\hypertarget{simple__rawsock_8h_a32de5da53ceb939ed6a5bc0eb137ca0a}{}\label{simple__rawsock_8h_a32de5da53ceb939ed6a5bc0eb137ca0a}


simple\+\_\+rawsock.\+c 파일의 335 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
336 \{
337     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
338 
339     \textcolor{comment}{// simpleRawsock sends frames in simpleRawsockTxFrameReady}
340 
341     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
342     \textcolor{keywordflow}{return} 1;
343 \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{simple__rawsock_8h_a32de5da53ceb939ed6a5bc0eb137ca0a_icgraph}
\end{center}
\end{figure}


\index{simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}!simple\+Rawsock\+Tx\+Frame\+Ready@{simple\+Rawsock\+Tx\+Frame\+Ready}}
\index{simple\+Rawsock\+Tx\+Frame\+Ready@{simple\+Rawsock\+Tx\+Frame\+Ready}!simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}}
\subsubsection[{\texorpdfstring{simple\+Rawsock\+Tx\+Frame\+Ready(void $\ast$pv\+Rawsock, U8 $\ast$p\+Buffer, unsigned int len, U64 time\+Nsec)}{simpleRawsockTxFrameReady(void *pvRawsock, U8 *pBuffer, unsigned int len, U64 timeNsec)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} simple\+Rawsock\+Tx\+Frame\+Ready (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{pv\+Rawsock, }
\item[{{\bf U8} $\ast$}]{p\+Buffer, }
\item[{unsigned int}]{len, }
\item[{{\bf U64}}]{time\+Nsec}
\end{DoxyParamCaption}
)}\hypertarget{simple__rawsock_8h_a22a9335ec218a3387e641c3dbf6404eb}{}\label{simple__rawsock_8h_a22a9335ec218a3387e641c3dbf6404eb}


simple\+\_\+rawsock.\+c 파일의 312 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
313 \{
314     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
315     \hyperlink{structsimple__rawsock__t}{simple\_rawsock\_t} *rawsock = (\hyperlink{structsimple__rawsock__t}{simple\_rawsock\_t}*)pvRawsock;
316 
317     \textcolor{keywordflow}{if} (!\hyperlink{rawsock__impl_8h_a4b69291961256f36eefc280eb2d3e447}{VALID\_TX\_RAWSOCK}(rawsock)) \{
318         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Marking TX frame ready; invalid argument"});
319         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
320         \textcolor{keywordflow}{return} \hyperlink{maap__log_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
321     \}
322 
323     \textcolor{keywordflow}{if} (timeNsec) \{
324         \hyperlink{maap__log_8h_ae9decd5440c360a6d0ab5175c9cf08be}{IF\_LOG\_INTERVAL}(1000) \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a6e7cd550837a0406e98b81a840d10ea9}{AVB\_LOG\_WARNING}("launch time is unsupported 
      \hyperlink{jack_8c_afc03a33132f7c0bcacbeeeaf5b8510c0}{in} simple\_rawsock");
325     \}
326 
327     \textcolor{keywordtype}{int} \hyperlink{namespaceavdecc__lib_ab6b306ef981f5e21bb41ea2c2dbe8cd9}{flags} = MSG\_DONTWAIT;
328     send(rawsock->sock, pBuffer, len, \hyperlink{namespaceavdecc__lib_ab6b306ef981f5e21bb41ea2c2dbe8cd9}{flags});
329 
330     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
331     return \hyperlink{maap__log_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
332 \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{simple__rawsock_8h_a22a9335ec218a3387e641c3dbf6404eb_icgraph}
\end{center}
\end{figure}


\index{simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}!simple\+Rawsock\+Tx\+Set\+Hdr@{simple\+Rawsock\+Tx\+Set\+Hdr}}
\index{simple\+Rawsock\+Tx\+Set\+Hdr@{simple\+Rawsock\+Tx\+Set\+Hdr}!simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}}
\subsubsection[{\texorpdfstring{simple\+Rawsock\+Tx\+Set\+Hdr(void $\ast$pv\+Rawsock, hdr\+\_\+info\+\_\+t $\ast$p\+Hdr)}{simpleRawsockTxSetHdr(void *pvRawsock, hdr_info_t *pHdr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} simple\+Rawsock\+Tx\+Set\+Hdr (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{pv\+Rawsock, }
\item[{{\bf hdr\+\_\+info\+\_\+t} $\ast$}]{p\+Hdr}
\end{DoxyParamCaption}
)}\hypertarget{simple__rawsock_8h_af0b3af3f75fbd7270b047e0c6c83c8e3}{}\label{simple__rawsock_8h_af0b3af3f75fbd7270b047e0c6c83c8e3}


simple\+\_\+rawsock.\+c 파일의 290 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
291 \{
292     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
293     \hyperlink{structsimple__rawsock__t}{simple\_rawsock\_t} *rawsock = (\hyperlink{structsimple__rawsock__t}{simple\_rawsock\_t}*)pvRawsock;
294 
295     \textcolor{keywordtype}{bool} ret = \hyperlink{rawsock__impl_8c_add65f99e1a5bbc1dec151b6b12ef59c1}{baseRawsockTxSetHdr}(pvRawsock, pHdr);
296     \textcolor{keywordflow}{if} (ret && pHdr->\hyperlink{structhdr__info__t_aae65321fd27fc2507a499a3f00660a93}{vlan}) \{
297         \textcolor{comment}{// set the class'es priority on the TX socket}
298         \textcolor{comment}{// (required by Telechips platform for FQTSS Credit Based Shaper to work)}
299         \hyperlink{openavb__types__base__pub_8h_a696390429f2f3b644bde8d0322a24124}{U32} pcp = pHdr->\hyperlink{structhdr__info__t_a394deccdf47e8dd6b4e6329e6fe0f8fc}{vlan\_pcp};
300         \textcolor{keywordflow}{if} (setsockopt(rawsock->\hyperlink{structsimple__rawsock__t_a5903d0b282fc5eae503de618f896b5e1}{sock}, SOL\_SOCKET, SO\_PRIORITY, (\textcolor{keywordtype}{char} *)&pcp, \textcolor{keyword}{sizeof}(pcp)) < 0) \{
301             \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a7965828e6f132ce789a962b917519e24}{AVB\_LOGF\_ERROR}(\textcolor{stringliteral}{"stcRawsockTxSetHdr; SO\_PRIORITY setsockopt failed (%d: %s)\(\backslash\)n"}, 
      errno, strerror(errno));
302             \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
303             \textcolor{keywordflow}{return} \hyperlink{maap__log_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
304         \}
305     \}
306 
307     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
308     \textcolor{keywordflow}{return} ret;
309 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{simple__rawsock_8h_af0b3af3f75fbd7270b047e0c6c83c8e3_cgraph}
\end{center}
\end{figure}




이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{simple__rawsock_8h_af0b3af3f75fbd7270b047e0c6c83c8e3_icgraph}
\end{center}
\end{figure}


\index{simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}!simple\+Rawsock\+Tx\+Set\+Mark@{simple\+Rawsock\+Tx\+Set\+Mark}}
\index{simple\+Rawsock\+Tx\+Set\+Mark@{simple\+Rawsock\+Tx\+Set\+Mark}!simple\+\_\+rawsock.\+h@{simple\+\_\+rawsock.\+h}}
\subsubsection[{\texorpdfstring{simple\+Rawsock\+Tx\+Set\+Mark(void $\ast$pv\+Rawsock, int mark)}{simpleRawsockTxSetMark(void *pvRawsock, int mark)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} simple\+Rawsock\+Tx\+Set\+Mark (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{pv\+Rawsock, }
\item[{int}]{mark}
\end{DoxyParamCaption}
)}\hypertarget{simple__rawsock_8h_a53146a27c3b2a89512d84875d720246c}{}\label{simple__rawsock_8h_a53146a27c3b2a89512d84875d720246c}


simple\+\_\+rawsock.\+c 파일의 265 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
266 \{
267     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
268     \hyperlink{structsimple__rawsock__t}{simple\_rawsock\_t} *rawsock = (\hyperlink{structsimple__rawsock__t}{simple\_rawsock\_t}*)pvRawsock;
269     \textcolor{keywordtype}{bool} retval = \hyperlink{maap__log_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
270 
271     \textcolor{keywordflow}{if} (!\hyperlink{rawsock__impl_8h_a4b69291961256f36eefc280eb2d3e447}{VALID\_TX\_RAWSOCK}(rawsock)) \{
272         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Setting TX mark; invalid argument passed"});
273         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
274         \textcolor{keywordflow}{return} \hyperlink{maap__log_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
275     \}
276 
277     \textcolor{keywordflow}{if} (setsockopt(rawsock->\hyperlink{structsimple__rawsock__t_a5903d0b282fc5eae503de618f896b5e1}{sock}, SOL\_SOCKET, SO\_MARK, &mark, \textcolor{keyword}{sizeof}(mark)) < 0) \{
278         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a7965828e6f132ce789a962b917519e24}{AVB\_LOGF\_ERROR}(\textcolor{stringliteral}{"Setting TX mark; setsockopt failed: %s"}, strerror(errno));
279     \}
280     \textcolor{keywordflow}{else} \{
281         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_afcf1f0c1d10ae9efe3782eb6cae78355}{AVB\_LOGF\_DEBUG}(\textcolor{stringliteral}{"SO\_MARK=%d OK"}, mark);
282         retval = \hyperlink{maap__log_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
283     \}
284 
285     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_afc31946eef39d8853f580f865dc0d09b}{AVB\_TRACE\_RAWSOCK\_DETAIL});
286     \textcolor{keywordflow}{return} retval;
287 \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{simple__rawsock_8h_a53146a27c3b2a89512d84875d720246c_icgraph}
\end{center}
\end{figure}


