\hypertarget{class_linux_g_p_t_p_persist_file}{}\section{Linux\+G\+P\+T\+P\+Persist\+File 클래스 참조}
\label{class_linux_g_p_t_p_persist_file}\index{Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}}


Linux\+G\+P\+T\+P\+Persist\+File에 대한 상속 다이어그램 \+: 
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=214pt]{class_linux_g_p_t_p_persist_file__inherit__graph}
\end{center}
\end{figure}


Linux\+G\+P\+T\+P\+Persist\+File에 대한 협력 다이어그램\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=214pt]{class_linux_g_p_t_p_persist_file__coll__graph}
\end{center}
\end{figure}
\subsection*{Public 멤버 함수}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_linux_g_p_t_p_persist_file_ad75b0e46727335ec9a84659dd83d2f82}{Linux\+G\+P\+T\+P\+Persist\+File} ()
\item 
\hyperlink{class_linux_g_p_t_p_persist_file_a23ed1f1232358792e55d1eda8c6ea13e}{$\sim$\+Linux\+G\+P\+T\+P\+Persist\+File} ()
\item 
\hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{class_linux_g_p_t_p_persist_file_af56cdac17e885d0127426865eab5cc00}{init\+Storage} (const char $\ast$persist\+ID)
\begin{DoxyCompactList}\small\item\em Initializes the G\+P\+T\+P\+\_\+\+P\+E\+R\+S\+I\+ST. \end{DoxyCompactList}\item 
\hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{class_linux_g_p_t_p_persist_file_aa8f88fd0e42358e8778ac3976dcc277a}{close\+Storage} (void)
\begin{DoxyCompactList}\small\item\em Closes the G\+P\+T\+P\+\_\+\+P\+E\+R\+S\+I\+ST instance. \end{DoxyCompactList}\item 
\hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{class_linux_g_p_t_p_persist_file_a1b1da8589008d673c6f4cce915bb3f1c}{read\+Storage} (char $\ast$$\ast$buf\+Ptr, \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\+\_\+t} $\ast$buf\+Size)
\begin{DoxyCompactList}\small\item\em Read the persistent data. \end{DoxyCompactList}\item 
void \hyperlink{class_linux_g_p_t_p_persist_file_a2afe60e7336516ae6cb5ca1164110669}{register\+Write\+CB} (\hyperlink{avbts__persist_8hpp_a79cbcb0be2bbb7984e94c586573cd5ba}{g\+P\+T\+P\+Persist\+Write\+C\+B\+\_\+t} \hyperlink{class_linux_g_p_t_p_persist_file_a914beb5a5d0085ceeea5f3f9f3143020}{write\+CB})
\begin{DoxyCompactList}\small\item\em Register the write call back. \end{DoxyCompactList}\item 
void \hyperlink{class_linux_g_p_t_p_persist_file_ae03861299439e6a6d11927d842443162}{set\+Write\+Size} (\hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\+\_\+t} data\+Size)
\begin{DoxyCompactList}\small\item\em Set write data size. \end{DoxyCompactList}\item 
\hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{class_linux_g_p_t_p_persist_file_a4520b43e56c0e75c40f48c1ed9ad4dc8}{trigger\+Write\+Storage} (void)
\begin{DoxyCompactList}\small\item\em Trigger the write callback. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private 속성}
\begin{DoxyCompactItemize}
\item 
std\+::string \hyperlink{class_linux_g_p_t_p_persist_file_a2f6a119a0e628824cfab261ed6dbcbeb}{persist\+I\+D\+Str}
\item 
\hyperlink{avbts__persist_8hpp_a79cbcb0be2bbb7984e94c586573cd5ba}{g\+P\+T\+P\+Persist\+Write\+C\+B\+\_\+t} \hyperlink{class_linux_g_p_t_p_persist_file_a914beb5a5d0085ceeea5f3f9f3143020}{write\+CB}
\item 
int \hyperlink{class_linux_g_p_t_p_persist_file_a35a9af9ac70e15dd5e84bc9b8776d993}{persist\+FD}
\item 
void $\ast$ \hyperlink{class_linux_g_p_t_p_persist_file_a28b6f2edcdfd82ce519236fe075a678c}{restoredata}
\item 
off\+\_\+t \hyperlink{class_linux_g_p_t_p_persist_file_a18b03182ab5a38eb86dc01dee48c13eb}{stored\+Data\+Length}
\item 
off\+\_\+t \hyperlink{class_linux_g_p_t_p_persist_file_ade3dd6ea20add2b147a0088d6a156d3d}{memory\+Data\+Length}
\end{DoxyCompactItemize}


\subsection{상세한 설명}


linux\+\_\+hal\+\_\+persist\+\_\+file.\+cpp 파일의 41 번째 라인에서 정의되었습니다.



\subsection{생성자 \& 소멸자 문서화}
\index{Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}!Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}}
\index{Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}!Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}}
\subsubsection[{\texorpdfstring{Linux\+G\+P\+T\+P\+Persist\+File()}{LinuxGPTPPersistFile()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Linux\+G\+P\+T\+P\+Persist\+File} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{class_linux_g_p_t_p_persist_file_ad75b0e46727335ec9a84659dd83d2f82}{}\label{class_linux_g_p_t_p_persist_file_ad75b0e46727335ec9a84659dd83d2f82}


linux\+\_\+hal\+\_\+persist\+\_\+file.\+cpp 파일의 52 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
52                            \{
53         \hyperlink{class_linux_g_p_t_p_persist_file_a35a9af9ac70e15dd5e84bc9b8776d993}{persistFD} = -1;
54         \hyperlink{class_linux_g_p_t_p_persist_file_a28b6f2edcdfd82ce519236fe075a678c}{restoredata} = ((\textcolor{keywordtype}{void} *)-1);
55         \hyperlink{class_linux_g_p_t_p_persist_file_a18b03182ab5a38eb86dc01dee48c13eb}{storedDataLength} = 0;
56         \hyperlink{class_linux_g_p_t_p_persist_file_ade3dd6ea20add2b147a0088d6a156d3d}{memoryDataLength} = 0;
57     \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_linux_g_p_t_p_persist_file_ad75b0e46727335ec9a84659dd83d2f82_icgraph}
\end{center}
\end{figure}


\index{Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}!````~Linux\+G\+P\+T\+P\+Persist\+File@{$\sim$\+Linux\+G\+P\+T\+P\+Persist\+File}}
\index{````~Linux\+G\+P\+T\+P\+Persist\+File@{$\sim$\+Linux\+G\+P\+T\+P\+Persist\+File}!Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}}
\subsubsection[{\texorpdfstring{$\sim$\+Linux\+G\+P\+T\+P\+Persist\+File()}{~LinuxGPTPPersistFile()}}]{\setlength{\rightskip}{0pt plus 5cm}$\sim${\bf Linux\+G\+P\+T\+P\+Persist\+File} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{class_linux_g_p_t_p_persist_file_a23ed1f1232358792e55d1eda8c6ea13e}{}\label{class_linux_g_p_t_p_persist_file_a23ed1f1232358792e55d1eda8c6ea13e}


linux\+\_\+hal\+\_\+persist\+\_\+file.\+cpp 파일의 59 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
59 \{\} ;
\end{DoxyCode}


\subsection{멤버 함수 문서화}
\index{Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}!close\+Storage@{close\+Storage}}
\index{close\+Storage@{close\+Storage}!Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}}
\subsubsection[{\texorpdfstring{close\+Storage(void)}{closeStorage(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} close\+Storage (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{class_linux_g_p_t_p_persist_file_aa8f88fd0e42358e8778ac3976dcc277a}{}\label{class_linux_g_p_t_p_persist_file_aa8f88fd0e42358e8778ac3976dcc277a}


Closes the G\+P\+T\+P\+\_\+\+P\+E\+R\+S\+I\+ST instance. 

\begin{DoxyReturn}{반환값}
True on success otherwise False 
\end{DoxyReturn}


\hyperlink{class_g_p_t_p_persist_a5cb33a278c6eb0c2aacffeb4ef06f7b5}{G\+P\+T\+P\+Persist}를 구현.



linux\+\_\+hal\+\_\+persist\+\_\+file.\+cpp 파일의 72 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
72                             \{
73         \textcolor{keywordflow}{if} (\hyperlink{class_linux_g_p_t_p_persist_file_a35a9af9ac70e15dd5e84bc9b8776d993}{persistFD} != -1) \{
74             \textcolor{keywordflow}{if} (\hyperlink{class_linux_g_p_t_p_persist_file_a28b6f2edcdfd82ce519236fe075a678c}{restoredata} != ((\textcolor{keywordtype}{void} *) -1))
75                 munmap(\hyperlink{class_linux_g_p_t_p_persist_file_a28b6f2edcdfd82ce519236fe075a678c}{restoredata}, \hyperlink{class_linux_g_p_t_p_persist_file_a18b03182ab5a38eb86dc01dee48c13eb}{storedDataLength});
76             close(\hyperlink{class_linux_g_p_t_p_persist_file_a35a9af9ac70e15dd5e84bc9b8776d993}{persistFD});
77         \}
78         \textcolor{keywordflow}{return} \textcolor{keyword}{true};
79     \}
\end{DoxyCode}
\index{Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}!init\+Storage@{init\+Storage}}
\index{init\+Storage@{init\+Storage}!Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}}
\subsubsection[{\texorpdfstring{init\+Storage(const char $\ast$persist\+I\+D)}{initStorage(const char *persistID)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} init\+Storage (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{persist\+ID}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{class_linux_g_p_t_p_persist_file_af56cdac17e885d0127426865eab5cc00}{}\label{class_linux_g_p_t_p_persist_file_af56cdac17e885d0127426865eab5cc00}


Initializes the G\+P\+T\+P\+\_\+\+P\+E\+R\+S\+I\+ST. 


\begin{DoxyParams}{매개변수}
{\em persist\+ID} & string identifer of the persistence storage. For example a file name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
True on success otherwise False 
\end{DoxyReturn}


\hyperlink{class_g_p_t_p_persist_ac74276c8d879ac7c9196d649d2936220}{G\+P\+T\+P\+Persist}를 구현.



linux\+\_\+hal\+\_\+persist\+\_\+file.\+cpp 파일의 61 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
61                                             \{
62         \hyperlink{class_linux_g_p_t_p_persist_file_a2f6a119a0e628824cfab261ed6dbcbeb}{persistIDStr} = persistID;
63 
64         \hyperlink{class_linux_g_p_t_p_persist_file_a35a9af9ac70e15dd5e84bc9b8776d993}{persistFD} = open(persistID, O\_RDWR | O\_CREAT, S\_IRUSR | S\_IWUSR);
65         \textcolor{keywordflow}{if} (\hyperlink{class_linux_g_p_t_p_persist_file_a35a9af9ac70e15dd5e84bc9b8776d993}{persistFD} == -1) \{
66             \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}(\textcolor{stringliteral}{"Failed to open restore file"});
67             \textcolor{keywordflow}{return} \textcolor{keyword}{false};
68         \}
69         \textcolor{keywordflow}{return} \textcolor{keyword}{true};
70     \}
\end{DoxyCode}
\index{Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}!read\+Storage@{read\+Storage}}
\index{read\+Storage@{read\+Storage}!Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}}
\subsubsection[{\texorpdfstring{read\+Storage(char $\ast$$\ast$buf\+Ptr, uint32\+\_\+t $\ast$buf\+Size)}{readStorage(char **bufPtr, uint32_t *bufSize)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} read\+Storage (
\begin{DoxyParamCaption}
\item[{char $\ast$$\ast$}]{buf\+Ptr, }
\item[{{\bf uint32\+\_\+t} $\ast$}]{buf\+Size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{class_linux_g_p_t_p_persist_file_a1b1da8589008d673c6f4cce915bb3f1c}{}\label{class_linux_g_p_t_p_persist_file_a1b1da8589008d673c6f4cce915bb3f1c}


Read the persistent data. 


\begin{DoxyParams}{매개변수}
{\em buf\+Ptr} & Buffer pointer where the restored persistent data is held. \\
\hline
{\em buf\+Size} & The size of the restored data. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
True on success otherwise False 
\end{DoxyReturn}


\hyperlink{class_g_p_t_p_persist_a5fac60570858ffddec27c8c848b198f1}{G\+P\+T\+P\+Persist}를 구현.



linux\+\_\+hal\+\_\+persist\+\_\+file.\+cpp 파일의 81 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
81                                                        \{
82         \textcolor{keywordtype}{bool} result = \textcolor{keyword}{false};
83         \textcolor{keywordflow}{if} (\hyperlink{class_linux_g_p_t_p_persist_file_a35a9af9ac70e15dd5e84bc9b8776d993}{persistFD} != -1) \{
84             \textcolor{comment}{// MMAP file}
85             \textcolor{keyword}{struct }stat stat0;
86             \textcolor{keywordflow}{if} (fstat(\hyperlink{class_linux_g_p_t_p_persist_file_a35a9af9ac70e15dd5e84bc9b8776d993}{persistFD}, &stat0) == -1) \{
87                 \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}(\textcolor{stringliteral}{"Failed to stat restore file, %s"}, strerror(errno));
88                 \hyperlink{class_linux_g_p_t_p_persist_file_a18b03182ab5a38eb86dc01dee48c13eb}{storedDataLength} = 0;
89             \}
90             \textcolor{keywordflow}{else} \{
91                 \hyperlink{class_linux_g_p_t_p_persist_file_a18b03182ab5a38eb86dc01dee48c13eb}{storedDataLength} = stat0.st\_size;
92                 \textcolor{keywordflow}{if} (\hyperlink{class_linux_g_p_t_p_persist_file_a18b03182ab5a38eb86dc01dee48c13eb}{storedDataLength} != 0) \{
93                     \textcolor{keywordflow}{if} ((\hyperlink{class_linux_g_p_t_p_persist_file_a28b6f2edcdfd82ce519236fe075a678c}{restoredata} = mmap(\hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, 
      \hyperlink{class_linux_g_p_t_p_persist_file_a18b03182ab5a38eb86dc01dee48c13eb}{storedDataLength}, PROT\_READ | PROT\_WRITE, MAP\_SHARED, \hyperlink{class_linux_g_p_t_p_persist_file_a35a9af9ac70e15dd5e84bc9b8776d993}{persistFD}, 0)) == ((\textcolor{keywordtype}{void} *)-
      1)) \{
94                         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}(\textcolor{stringliteral}{"Failed to mmap restore file, %s"}, strerror(errno));
95                     \}
96                     \textcolor{keywordflow}{else} \{
97                         *bufSize = \hyperlink{class_linux_g_p_t_p_persist_file_a18b03182ab5a38eb86dc01dee48c13eb}{storedDataLength};
98                         *bufPtr = (\textcolor{keywordtype}{char} *)\hyperlink{class_linux_g_p_t_p_persist_file_a28b6f2edcdfd82ce519236fe075a678c}{restoredata};
99                         result = \textcolor{keyword}{true};
100                     \}
101                 \}
102             \}
103         \}
104 
105         \textcolor{keywordflow}{return} result;
106     \}
\end{DoxyCode}
\index{Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}!register\+Write\+CB@{register\+Write\+CB}}
\index{register\+Write\+CB@{register\+Write\+CB}!Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}}
\subsubsection[{\texorpdfstring{register\+Write\+C\+B(g\+P\+T\+P\+Persist\+Write\+C\+B\+\_\+t write\+C\+B)}{registerWriteCB(gPTPPersistWriteCB_t writeCB)}}]{\setlength{\rightskip}{0pt plus 5cm}void register\+Write\+CB (
\begin{DoxyParamCaption}
\item[{{\bf g\+P\+T\+P\+Persist\+Write\+C\+B\+\_\+t}}]{write\+CB}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{class_linux_g_p_t_p_persist_file_a2afe60e7336516ae6cb5ca1164110669}{}\label{class_linux_g_p_t_p_persist_file_a2afe60e7336516ae6cb5ca1164110669}


Register the write call back. 


\begin{DoxyParams}{매개변수}
{\em write\+CB} & Write callback from \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
none 
\end{DoxyReturn}


\hyperlink{class_g_p_t_p_persist_a555f71de9acef16c5cd2eaf2b34f68ec}{G\+P\+T\+P\+Persist}를 구현.



linux\+\_\+hal\+\_\+persist\+\_\+file.\+cpp 파일의 108 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
109     \{
110         this->\hyperlink{class_linux_g_p_t_p_persist_file_a914beb5a5d0085ceeea5f3f9f3143020}{writeCB} = \hyperlink{class_linux_g_p_t_p_persist_file_a914beb5a5d0085ceeea5f3f9f3143020}{writeCB};
111     \}
\end{DoxyCode}
\index{Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}!set\+Write\+Size@{set\+Write\+Size}}
\index{set\+Write\+Size@{set\+Write\+Size}!Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}}
\subsubsection[{\texorpdfstring{set\+Write\+Size(uint32\+\_\+t data\+Size)}{setWriteSize(uint32_t dataSize)}}]{\setlength{\rightskip}{0pt plus 5cm}void set\+Write\+Size (
\begin{DoxyParamCaption}
\item[{{\bf uint32\+\_\+t}}]{data\+Size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{class_linux_g_p_t_p_persist_file_ae03861299439e6a6d11927d842443162}{}\label{class_linux_g_p_t_p_persist_file_ae03861299439e6a6d11927d842443162}


Set write data size. 


\begin{DoxyParams}{매개변수}
{\em data\+Siuze} & The size of data that will be written \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
none 
\end{DoxyReturn}


\hyperlink{class_g_p_t_p_persist_aed84eb3f99897b1a77cebbf1a9f7f7b6}{G\+P\+T\+P\+Persist}를 구현.



linux\+\_\+hal\+\_\+persist\+\_\+file.\+cpp 파일의 113 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
114     \{
115         \hyperlink{class_linux_g_p_t_p_persist_file_ade3dd6ea20add2b147a0088d6a156d3d}{memoryDataLength} = dataSize;
116     \}
\end{DoxyCode}
\index{Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}!trigger\+Write\+Storage@{trigger\+Write\+Storage}}
\index{trigger\+Write\+Storage@{trigger\+Write\+Storage}!Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}}
\subsubsection[{\texorpdfstring{trigger\+Write\+Storage(void)}{triggerWriteStorage(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} trigger\+Write\+Storage (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{class_linux_g_p_t_p_persist_file_a4520b43e56c0e75c40f48c1ed9ad4dc8}{}\label{class_linux_g_p_t_p_persist_file_a4520b43e56c0e75c40f48c1ed9ad4dc8}


Trigger the write callback. 

\begin{DoxyReturn}{반환값}
True on success otherwise False 
\end{DoxyReturn}


\hyperlink{class_g_p_t_p_persist_a0c61d64e8f30bb455de1b406c1236052}{G\+P\+T\+P\+Persist}를 구현.



linux\+\_\+hal\+\_\+persist\+\_\+file.\+cpp 파일의 118 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
119     \{
120         \textcolor{keywordflow}{if} (!\hyperlink{class_linux_g_p_t_p_persist_file_a914beb5a5d0085ceeea5f3f9f3143020}{writeCB}) \{
121             \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}(\textcolor{stringliteral}{"Persistent write callback not registered"});
122         \}
123 
124         \textcolor{keywordtype}{bool} result = \textcolor{keyword}{false};
125         \textcolor{keywordflow}{if} (\hyperlink{class_linux_g_p_t_p_persist_file_ade3dd6ea20add2b147a0088d6a156d3d}{memoryDataLength} > \hyperlink{class_linux_g_p_t_p_persist_file_a18b03182ab5a38eb86dc01dee48c13eb}{storedDataLength}) \{
126             \textcolor{keywordtype}{int} ret = ftruncate(\hyperlink{class_linux_g_p_t_p_persist_file_a35a9af9ac70e15dd5e84bc9b8776d993}{persistFD}, \hyperlink{class_linux_g_p_t_p_persist_file_ade3dd6ea20add2b147a0088d6a156d3d}{memoryDataLength});
127             \textcolor{keywordflow}{if} (ret != 0) \{
128                 \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}(\textcolor{stringliteral}{"Failed to extend stored data length from %ld to %ld, %s"}, 
      \hyperlink{class_linux_g_p_t_p_persist_file_a18b03182ab5a38eb86dc01dee48c13eb}{storedDataLength}, \hyperlink{class_linux_g_p_t_p_persist_file_ade3dd6ea20add2b147a0088d6a156d3d}{memoryDataLength}, strerror(errno));
129             \}
130             \textcolor{keywordflow}{if} (\hyperlink{class_linux_g_p_t_p_persist_file_a28b6f2edcdfd82ce519236fe075a678c}{restoredata} != ((\textcolor{keywordtype}{void} *)-1)) \{
131                 \hyperlink{class_linux_g_p_t_p_persist_file_a28b6f2edcdfd82ce519236fe075a678c}{restoredata} = mremap(\hyperlink{class_linux_g_p_t_p_persist_file_a28b6f2edcdfd82ce519236fe075a678c}{restoredata}, 
      \hyperlink{class_linux_g_p_t_p_persist_file_a18b03182ab5a38eb86dc01dee48c13eb}{storedDataLength}, \hyperlink{class_linux_g_p_t_p_persist_file_ade3dd6ea20add2b147a0088d6a156d3d}{memoryDataLength}, MREMAP\_MAYMOVE);
132             \}
133             \textcolor{keywordflow}{else} \{
134                 \hyperlink{class_linux_g_p_t_p_persist_file_a28b6f2edcdfd82ce519236fe075a678c}{restoredata} = mmap(\hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \hyperlink{class_linux_g_p_t_p_persist_file_ade3dd6ea20add2b147a0088d6a156d3d}{memoryDataLength}, PROT\_READ | 
      PROT\_WRITE, MAP\_SHARED, \hyperlink{class_linux_g_p_t_p_persist_file_a35a9af9ac70e15dd5e84bc9b8776d993}{persistFD}, 0);
135             \}
136             \textcolor{keywordflow}{if} (\hyperlink{class_linux_g_p_t_p_persist_file_a28b6f2edcdfd82ce519236fe075a678c}{restoredata} == ((\textcolor{keywordtype}{void} *)-1)) \{
137 
138             \}
139             \textcolor{keywordflow}{else} \{
140                 \hyperlink{class_linux_g_p_t_p_persist_file_a18b03182ab5a38eb86dc01dee48c13eb}{storedDataLength} = \hyperlink{class_linux_g_p_t_p_persist_file_ade3dd6ea20add2b147a0088d6a156d3d}{memoryDataLength};
141                 result = \textcolor{keyword}{true};
142             \}
143         \}
144 
145         \hyperlink{class_linux_g_p_t_p_persist_file_a914beb5a5d0085ceeea5f3f9f3143020}{writeCB}((\textcolor{keywordtype}{char} *)\hyperlink{class_linux_g_p_t_p_persist_file_a28b6f2edcdfd82ce519236fe075a678c}{restoredata}, \hyperlink{class_linux_g_p_t_p_persist_file_a18b03182ab5a38eb86dc01dee48c13eb}{storedDataLength});
146         \textcolor{keywordflow}{return} result;
147     \}
\end{DoxyCode}


\subsection{필드 문서화}
\index{Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}!memory\+Data\+Length@{memory\+Data\+Length}}
\index{memory\+Data\+Length@{memory\+Data\+Length}!Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}}
\subsubsection[{\texorpdfstring{memory\+Data\+Length}{memoryDataLength}}]{\setlength{\rightskip}{0pt plus 5cm}off\+\_\+t memory\+Data\+Length\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{class_linux_g_p_t_p_persist_file_ade3dd6ea20add2b147a0088d6a156d3d}{}\label{class_linux_g_p_t_p_persist_file_ade3dd6ea20add2b147a0088d6a156d3d}


linux\+\_\+hal\+\_\+persist\+\_\+file.\+cpp 파일의 49 번째 라인에서 정의되었습니다.

\index{Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}!persist\+FD@{persist\+FD}}
\index{persist\+FD@{persist\+FD}!Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}}
\subsubsection[{\texorpdfstring{persist\+FD}{persistFD}}]{\setlength{\rightskip}{0pt plus 5cm}int persist\+FD\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{class_linux_g_p_t_p_persist_file_a35a9af9ac70e15dd5e84bc9b8776d993}{}\label{class_linux_g_p_t_p_persist_file_a35a9af9ac70e15dd5e84bc9b8776d993}


linux\+\_\+hal\+\_\+persist\+\_\+file.\+cpp 파일의 46 번째 라인에서 정의되었습니다.

\index{Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}!persist\+I\+D\+Str@{persist\+I\+D\+Str}}
\index{persist\+I\+D\+Str@{persist\+I\+D\+Str}!Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}}
\subsubsection[{\texorpdfstring{persist\+I\+D\+Str}{persistIDStr}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string persist\+I\+D\+Str\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{class_linux_g_p_t_p_persist_file_a2f6a119a0e628824cfab261ed6dbcbeb}{}\label{class_linux_g_p_t_p_persist_file_a2f6a119a0e628824cfab261ed6dbcbeb}


linux\+\_\+hal\+\_\+persist\+\_\+file.\+cpp 파일의 43 번째 라인에서 정의되었습니다.

\index{Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}!restoredata@{restoredata}}
\index{restoredata@{restoredata}!Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}}
\subsubsection[{\texorpdfstring{restoredata}{restoredata}}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ restoredata\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{class_linux_g_p_t_p_persist_file_a28b6f2edcdfd82ce519236fe075a678c}{}\label{class_linux_g_p_t_p_persist_file_a28b6f2edcdfd82ce519236fe075a678c}


linux\+\_\+hal\+\_\+persist\+\_\+file.\+cpp 파일의 47 번째 라인에서 정의되었습니다.

\index{Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}!stored\+Data\+Length@{stored\+Data\+Length}}
\index{stored\+Data\+Length@{stored\+Data\+Length}!Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}}
\subsubsection[{\texorpdfstring{stored\+Data\+Length}{storedDataLength}}]{\setlength{\rightskip}{0pt plus 5cm}off\+\_\+t stored\+Data\+Length\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{class_linux_g_p_t_p_persist_file_a18b03182ab5a38eb86dc01dee48c13eb}{}\label{class_linux_g_p_t_p_persist_file_a18b03182ab5a38eb86dc01dee48c13eb}


linux\+\_\+hal\+\_\+persist\+\_\+file.\+cpp 파일의 48 번째 라인에서 정의되었습니다.

\index{Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}!write\+CB@{write\+CB}}
\index{write\+CB@{write\+CB}!Linux\+G\+P\+T\+P\+Persist\+File@{Linux\+G\+P\+T\+P\+Persist\+File}}
\subsubsection[{\texorpdfstring{write\+CB}{writeCB}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf g\+P\+T\+P\+Persist\+Write\+C\+B\+\_\+t} write\+CB\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{class_linux_g_p_t_p_persist_file_a914beb5a5d0085ceeea5f3f9f3143020}{}\label{class_linux_g_p_t_p_persist_file_a914beb5a5d0085ceeea5f3f9f3143020}


linux\+\_\+hal\+\_\+persist\+\_\+file.\+cpp 파일의 44 번째 라인에서 정의되었습니다.



이 클래스에 대한 문서화 페이지는 다음의 파일로부터 생성되었습니다.\+:\begin{DoxyCompactItemize}
\item 
daemons/gptp/linux/src/\hyperlink{linux__hal__persist__file_8cpp}{linux\+\_\+hal\+\_\+persist\+\_\+file.\+cpp}\end{DoxyCompactItemize}
