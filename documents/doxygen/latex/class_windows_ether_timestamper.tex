\hypertarget{class_windows_ether_timestamper}{}\section{Windows\+Ether\+Timestamper 클래스 참조}
\label{class_windows_ether_timestamper}\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}


Windows Ethernet H\+W\+Timestamper implementation.  




{\ttfamily \#include $<$windows\+\_\+hal.\+hpp$>$}



Windows\+Ether\+Timestamper에 대한 상속 다이어그램 \+: 
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{class_windows_ether_timestamper__inherit__graph}
\end{center}
\end{figure}


Windows\+Ether\+Timestamper에 대한 협력 다이어그램\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{class_windows_ether_timestamper__coll__graph}
\end{center}
\end{figure}
\subsection*{Public 멤버 함수}
\begin{DoxyCompactItemize}
\item 
virtual \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{class_windows_ether_timestamper_a0bb8baec58abb2771c343d0e7d26902d}{H\+W\+Timestamper\+\_\+init} (\hyperlink{class_interface_label}{Interface\+Label} $\ast$iface\+\_\+label, \hyperlink{class_o_s_network_interface}{O\+S\+Network\+Interface} $\ast$net\+\_\+iface)
\begin{DoxyCompactList}\small\item\em Initializes the network adaptor and the hw timestamper interface. \end{DoxyCompactList}\item 
virtual \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{class_windows_ether_timestamper_aa60d500a2e0fe863918056be78c109ce}{H\+W\+Timestamper\+\_\+gettime} (\hyperlink{class_timestamp}{Timestamp} $\ast$system\+\_\+time, \hyperlink{class_timestamp}{Timestamp} $\ast$device\+\_\+time, \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\+\_\+t} $\ast$local\+\_\+clock, \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\+\_\+t} $\ast$nominal\+\_\+clock\+\_\+rate) const 
\begin{DoxyCompactList}\small\item\em Get the cross timestamping information. The g\+P\+TP subsystem uses these samples to calculate ratios which can be used to translate or extrapolate one clock into another clock reference. The g\+P\+TP service uses these supplied cross timestamps to perform internal rate estimation and conversion functions. \end{DoxyCompactList}\item 
virtual int \hyperlink{class_windows_ether_timestamper_ade95e0e8d5fc8ec21dbf7b67bd1d9275}{H\+W\+Timestamper\+\_\+txtimestamp} (\hyperlink{class_port_identity}{Port\+Identity} $\ast$identity, \hyperlink{class_p_t_p_message_id}{P\+T\+P\+Message\+Id} message\+Id, \hyperlink{class_timestamp}{Timestamp} \&timestamp, unsigned \&clock\+\_\+value, \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} last)
\begin{DoxyCompactList}\small\item\em Gets the TX timestamp. \end{DoxyCompactList}\item 
virtual int \hyperlink{class_windows_ether_timestamper_a9dc0ab7dd51322bf334ba8fe1d4e77a9}{H\+W\+Timestamper\+\_\+rxtimestamp} (\hyperlink{class_port_identity}{Port\+Identity} $\ast$identity, \hyperlink{class_p_t_p_message_id}{P\+T\+P\+Message\+Id} message\+Id, \hyperlink{class_timestamp}{Timestamp} \&timestamp, unsigned \&clock\+\_\+value, \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} last)
\begin{DoxyCompactList}\small\item\em Gets the RX timestamp. \end{DoxyCompactList}\item 
virtual void \hyperlink{class_common_timestamper_a1ee6bfcaf63bef07bbed1306e52e7203}{H\+W\+Timestamper\+\_\+reset} (void)
\begin{DoxyCompactList}\small\item\em Reset the hardware timestamp unit. \end{DoxyCompactList}\item 
virtual void \hyperlink{class_common_timestamper_a866fc2519a7b2a696e350ed05df53f90}{H\+W\+Timestamper\+\_\+final} (void)
\begin{DoxyCompactList}\small\item\em This method is called before the object is de-\/allocated. \end{DoxyCompactList}\item 
virtual \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{class_common_timestamper_a557b905a4f8bb20481c28c8dd33cfb21}{H\+W\+Timestamper\+\_\+adjclockrate} (float frequency\+\_\+offset) const 
\begin{DoxyCompactList}\small\item\em Adjusts the hardware clock frequency. \end{DoxyCompactList}\item 
virtual \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{class_common_timestamper_aa9470ea1623c3718913fbff1c55e3115}{H\+W\+Timestamper\+\_\+adjclockphase} (\hyperlink{parse_8c_a67a9885ef4908cb72ce26d75b694386c}{int64\+\_\+t} phase\+\_\+adjust)
\begin{DoxyCompactList}\small\item\em Adjusts the hardware clock phase. \end{DoxyCompactList}\item 
virtual void \hyperlink{class_common_timestamper_a3b26113436dec73775d2cbc523a6e074}{H\+W\+Timestamper\+\_\+get\+\_\+extderror} (char $\ast$\hyperlink{openavb__log_8c_a0c7e58a50354c4a4d6dad428d0e47029}{msg}) const 
\begin{DoxyCompactList}\small\item\em Gets a string with the error from the hardware timestamp block. \end{DoxyCompactList}\item 
virtual \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{class_common_timestamper_a2cbaeb84807ca61af0bc56bcc475468d}{H\+W\+Timestamper\+\_\+\+P\+P\+S\+\_\+start} ()
\begin{DoxyCompactList}\small\item\em Starts the P\+PS (pulse per second) interface. \end{DoxyCompactList}\item 
virtual \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{class_common_timestamper_ac5d9f1e5eb402dffaa8897367e9fd7d3}{H\+W\+Timestamper\+\_\+\+P\+P\+S\+\_\+stop} ()
\begin{DoxyCompactList}\small\item\em Stops the P\+PS (pulse per second) interface. \end{DoxyCompactList}\item 
int \hyperlink{class_common_timestamper_a4d1414f8d9ed8d83c91769b148106307}{get\+Version} () const 
\begin{DoxyCompactList}\small\item\em Gets the H\+W\+Timestamper version. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected 속성}
\begin{DoxyCompactItemize}
\item 
\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} \hyperlink{class_common_timestamper_ab22abc2906422da61885ac6c8e6a1a59}{version}
\begin{DoxyCompactList}\small\item\em H\+W\+Timestamper version. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private 멤버 함수}
\begin{DoxyCompactItemize}
\item 
D\+W\+O\+RD \hyperlink{class_windows_ether_timestamper_ac5b503366553291b2c8f0a2b1a84219e}{read\+O\+ID} (N\+D\+I\+S\+\_\+\+O\+ID oid, void $\ast$output\+\_\+buffer, D\+W\+O\+RD \hyperlink{gst__avb__playbin_8c_a439227feff9d7f55384e8780cfc2eb82}{size}, D\+W\+O\+RD $\ast$size\+\_\+returned) const 
\item 
\hyperlink{class_timestamp}{Timestamp} \hyperlink{class_windows_ether_timestamper_a7c702f26e7228347c2dd9ca9f481ecb5}{nanoseconds64\+To\+Timestamp} (\hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t} time) const 
\item 
\hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t} \hyperlink{class_windows_ether_timestamper_a4644902a8381abd3a06e9caa3bdd8262}{scale\+Native\+Clock\+To\+Nanoseconds} (\hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t} time) const 
\item 
\hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t} \hyperlink{class_windows_ether_timestamper_ad446fba57a1868632d97b94f032c9e1a}{scale\+T\+S\+C\+Clock\+To\+Nanoseconds} (\hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t} time) const 
\end{DoxyCompactItemize}
\subsection*{Private 속성}
\begin{DoxyCompactItemize}
\item 
H\+A\+N\+D\+LE \hyperlink{class_windows_ether_timestamper_aa64b235fdc4f27df439a7e96278f2d9b}{miniport}
\item 
L\+A\+R\+G\+E\+\_\+\+I\+N\+T\+E\+G\+ER \hyperlink{class_windows_ether_timestamper_a259066718bc34c6231bbefd0b7093b6e}{tsc\+\_\+hz}
\item 
L\+A\+R\+G\+E\+\_\+\+I\+N\+T\+E\+G\+ER \hyperlink{class_windows_ether_timestamper_a9e4ba46145b31b628733af60187fc3c6}{netclock\+\_\+hz}
\end{DoxyCompactItemize}


\subsection{상세한 설명}
Windows Ethernet H\+W\+Timestamper implementation. 

windows\+\_\+hal.\+hpp 파일의 729 번째 라인에서 정의되었습니다.



\subsection{멤버 함수 문서화}
\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}!get\+Version@{get\+Version}}
\index{get\+Version@{get\+Version}!Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}
\subsubsection[{\texorpdfstring{get\+Version() const }{getVersion() const }}]{\setlength{\rightskip}{0pt plus 5cm}int get\+Version (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [inherited]}}\hypertarget{class_common_timestamper_a4d1414f8d9ed8d83c91769b148106307}{}\label{class_common_timestamper_a4d1414f8d9ed8d83c91769b148106307}


Gets the H\+W\+Timestamper version. 

\begin{DoxyReturn}{반환값}
version (signed integer) 
\end{DoxyReturn}


common\+\_\+tstamper.\+hpp 파일의 137 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
138     \{
139         \textcolor{keywordflow}{return} \hyperlink{class_common_timestamper_ab22abc2906422da61885ac6c8e6a1a59}{version};
140     \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_common_timestamper_a4d1414f8d9ed8d83c91769b148106307_icgraph}
\end{center}
\end{figure}


\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}!H\+W\+Timestamper\+\_\+adjclockphase@{H\+W\+Timestamper\+\_\+adjclockphase}}
\index{H\+W\+Timestamper\+\_\+adjclockphase@{H\+W\+Timestamper\+\_\+adjclockphase}!Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}
\subsubsection[{\texorpdfstring{H\+W\+Timestamper\+\_\+adjclockphase(int64\+\_\+t phase\+\_\+adjust)}{HWTimestamper_adjclockphase(int64_t phase_adjust)}}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf bool} H\+W\+Timestamper\+\_\+adjclockphase (
\begin{DoxyParamCaption}
\item[{{\bf int64\+\_\+t}}]{phase\+\_\+adjust}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}, {\ttfamily [inherited]}}\hypertarget{class_common_timestamper_aa9470ea1623c3718913fbff1c55e3115}{}\label{class_common_timestamper_aa9470ea1623c3718913fbff1c55e3115}


Adjusts the hardware clock phase. 


\begin{DoxyParams}{매개변수}
{\em phase\+\_\+adjust} & Phase offset \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
false 
\end{DoxyReturn}


\hyperlink{class_linux_timestamper_generic_abf6eb9134a918a1e218402f7d9b15468}{Linux\+Timestamper\+Generic}에서 재구현되었습니다.



common\+\_\+tstamper.\+hpp 파일의 89 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
90     \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}
\end{DoxyCode}
\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}!H\+W\+Timestamper\+\_\+adjclockrate@{H\+W\+Timestamper\+\_\+adjclockrate}}
\index{H\+W\+Timestamper\+\_\+adjclockrate@{H\+W\+Timestamper\+\_\+adjclockrate}!Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}
\subsubsection[{\texorpdfstring{H\+W\+Timestamper\+\_\+adjclockrate(float frequency\+\_\+offset) const }{HWTimestamper_adjclockrate(float frequency_offset) const }}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf bool} H\+W\+Timestamper\+\_\+adjclockrate (
\begin{DoxyParamCaption}
\item[{float}]{frequency\+\_\+offset}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}, {\ttfamily [inherited]}}\hypertarget{class_common_timestamper_a557b905a4f8bb20481c28c8dd33cfb21}{}\label{class_common_timestamper_a557b905a4f8bb20481c28c8dd33cfb21}


Adjusts the hardware clock frequency. 


\begin{DoxyParams}{매개변수}
{\em frequency\+\_\+offset} & Frequency offset \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
false 
\end{DoxyReturn}


\hyperlink{class_linux_timestamper_generic_a40688d4900827bb422a3a172614878f8}{Linux\+Timestamper\+Generic}에서 재구현되었습니다.



common\+\_\+tstamper.\+hpp 파일의 81 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
82     \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_common_timestamper_a557b905a4f8bb20481c28c8dd33cfb21_icgraph}
\end{center}
\end{figure}


\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}!H\+W\+Timestamper\+\_\+final@{H\+W\+Timestamper\+\_\+final}}
\index{H\+W\+Timestamper\+\_\+final@{H\+W\+Timestamper\+\_\+final}!Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}
\subsubsection[{\texorpdfstring{H\+W\+Timestamper\+\_\+final(void)}{HWTimestamper_final(void)}}]{\setlength{\rightskip}{0pt plus 5cm}virtual void H\+W\+Timestamper\+\_\+final (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}, {\ttfamily [inherited]}}\hypertarget{class_common_timestamper_a866fc2519a7b2a696e350ed05df53f90}{}\label{class_common_timestamper_a866fc2519a7b2a696e350ed05df53f90}


This method is called before the object is de-\/allocated. 

\begin{DoxyReturn}{반환값}
void 
\end{DoxyReturn}


common\+\_\+tstamper.\+hpp 파일의 72 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
72                                            \{
73     \}
\end{DoxyCode}
\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}!H\+W\+Timestamper\+\_\+get\+\_\+extderror@{H\+W\+Timestamper\+\_\+get\+\_\+extderror}}
\index{H\+W\+Timestamper\+\_\+get\+\_\+extderror@{H\+W\+Timestamper\+\_\+get\+\_\+extderror}!Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}
\subsubsection[{\texorpdfstring{H\+W\+Timestamper\+\_\+get\+\_\+extderror(char $\ast$msg) const }{HWTimestamper_get_extderror(char *msg) const }}]{\setlength{\rightskip}{0pt plus 5cm}virtual void H\+W\+Timestamper\+\_\+get\+\_\+extderror (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{msg}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}, {\ttfamily [inherited]}}\hypertarget{class_common_timestamper_a3b26113436dec73775d2cbc523a6e074}{}\label{class_common_timestamper_a3b26113436dec73775d2cbc523a6e074}


Gets a string with the error from the hardware timestamp block. 


\begin{DoxyParams}{매개변수}
{\em msg} & \mbox{[}out\mbox{]} String error \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
void 
\end{DoxyReturn}
\begin{DoxyRefDesc}{할일}
\item[\hyperlink{todo__todo000020}{할일}]There is no current implementation for this method. \end{DoxyRefDesc}


common\+\_\+tstamper.\+hpp 파일의 116 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
117     \{
118         *\hyperlink{maap__log__linux_8c_a0c7e58a50354c4a4d6dad428d0e47029}{msg} = \textcolor{charliteral}{'\(\backslash\)0'};
119     \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_common_timestamper_a3b26113436dec73775d2cbc523a6e074_icgraph}
\end{center}
\end{figure}


\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}!H\+W\+Timestamper\+\_\+gettime@{H\+W\+Timestamper\+\_\+gettime}}
\index{H\+W\+Timestamper\+\_\+gettime@{H\+W\+Timestamper\+\_\+gettime}!Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}
\subsubsection[{\texorpdfstring{H\+W\+Timestamper\+\_\+gettime(\+Timestamp $\ast$system\+\_\+time, Timestamp $\ast$device\+\_\+time, uint32\+\_\+t $\ast$local\+\_\+clock, uint32\+\_\+t $\ast$nominal\+\_\+clock\+\_\+rate) const }{HWTimestamper_gettime(Timestamp *system_time, Timestamp *device_time, uint32_t *local_clock, uint32_t *nominal_clock_rate) const }}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf bool} H\+W\+Timestamper\+\_\+gettime (
\begin{DoxyParamCaption}
\item[{{\bf Timestamp} $\ast$}]{system\+\_\+time, }
\item[{{\bf Timestamp} $\ast$}]{device\+\_\+time, }
\item[{{\bf uint32\+\_\+t} $\ast$}]{local\+\_\+clock, }
\item[{{\bf uint32\+\_\+t} $\ast$}]{nominal\+\_\+clock\+\_\+rate}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{class_windows_ether_timestamper_aa60d500a2e0fe863918056be78c109ce}{}\label{class_windows_ether_timestamper_aa60d500a2e0fe863918056be78c109ce}


Get the cross timestamping information. The g\+P\+TP subsystem uses these samples to calculate ratios which can be used to translate or extrapolate one clock into another clock reference. The g\+P\+TP service uses these supplied cross timestamps to perform internal rate estimation and conversion functions. 


\begin{DoxyParams}{매개변수}
{\em system\+\_\+time} & \mbox{[}out\mbox{]} System time \\
\hline
{\em device\+\_\+time} & \mbox{[}out\mbox{]} Device time \\
\hline
{\em local\+\_\+clock} & \mbox{[}out\mbox{]} Local clock \\
\hline
{\em nominal\+\_\+clock\+\_\+rate} & \mbox{[}out\mbox{]} Nominal clock rate \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
True in case of success. F\+A\+L\+SE in case of error 
\end{DoxyReturn}


\hyperlink{class_common_timestamper_a10b54d66a60067c0084748f955164073}{Common\+Timestamper}를 구현.



windows\+\_\+hal.\+hpp 파일의 787 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
788                                                              \{
789         DWORD buf[6];
790         DWORD returned;
791         \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t} now\_net, now\_tsc;
792         DWORD result;
793 
794         memset( buf, 0xFF, \textcolor{keyword}{sizeof}( buf ));
795         \textcolor{keywordflow}{if}(( result = \hyperlink{class_windows_ether_timestamper_ac5b503366553291b2c8f0a2b1a84219e}{readOID}( \hyperlink{windows__hal_8hpp_ae372f4cc7024263556f7c756b87fcc87}{OID\_INTEL\_GET\_SYSTIM}, buf, \textcolor{keyword}{sizeof}(buf), &returned
       )) != ERROR\_SUCCESS ) \textcolor{keywordflow}{return} \textcolor{keyword}{false};
796 
797         now\_net = (((\hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t})buf[1]) << 32) | buf[0];
798         now\_net = \hyperlink{class_windows_ether_timestamper_a4644902a8381abd3a06e9caa3bdd8262}{scaleNativeClockToNanoseconds}( now\_net );
799         *device\_time = \hyperlink{class_windows_ether_timestamper_a7c702f26e7228347c2dd9ca9f481ecb5}{nanoseconds64ToTimestamp}( now\_net );
800         device\_time->\hyperlink{class_timestamp_a8fab72cfd922b5757580642c2309e9bd}{\_version} = \hyperlink{class_common_timestamper_ab22abc2906422da61885ac6c8e6a1a59}{version};
801 
802         now\_tsc = (((\hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t})buf[3]) << 32) | buf[2];
803         now\_tsc = \hyperlink{class_windows_ether_timestamper_ad446fba57a1868632d97b94f032c9e1a}{scaleTSCClockToNanoseconds}( now\_tsc );
804         *system\_time = \hyperlink{class_windows_ether_timestamper_a7c702f26e7228347c2dd9ca9f481ecb5}{nanoseconds64ToTimestamp}( now\_tsc );
805         system\_time->\hyperlink{class_timestamp_a8fab72cfd922b5757580642c2309e9bd}{\_version} = \hyperlink{class_common_timestamper_ab22abc2906422da61885ac6c8e6a1a59}{version};
806 
807         \textcolor{keywordflow}{return} \textcolor{keyword}{true};
808     \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_windows_ether_timestamper_aa60d500a2e0fe863918056be78c109ce_cgraph}
\end{center}
\end{figure}


\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}!H\+W\+Timestamper\+\_\+init@{H\+W\+Timestamper\+\_\+init}}
\index{H\+W\+Timestamper\+\_\+init@{H\+W\+Timestamper\+\_\+init}!Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}
\subsubsection[{\texorpdfstring{H\+W\+Timestamper\+\_\+init(\+Interface\+Label $\ast$iface\+\_\+label, O\+S\+Network\+Interface $\ast$net\+\_\+iface)}{HWTimestamper_init(InterfaceLabel *iface_label, OSNetworkInterface *net_iface)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} H\+W\+Timestamper\+\_\+init (
\begin{DoxyParamCaption}
\item[{{\bf Interface\+Label} $\ast$}]{iface\+\_\+label, }
\item[{{\bf O\+S\+Network\+Interface} $\ast$}]{net\+\_\+iface}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{class_windows_ether_timestamper_a0bb8baec58abb2771c343d0e7d26902d}{}\label{class_windows_ether_timestamper_a0bb8baec58abb2771c343d0e7d26902d}


Initializes the network adaptor and the hw timestamper interface. 


\begin{DoxyParams}{매개변수}
{\em iface\+\_\+label} & \hyperlink{class_interface_label}{Interface\+Label} \\
\hline
{\em net\+\_\+iface} & Network interface \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
T\+R\+UE if success; F\+A\+L\+SE if error 
\end{DoxyReturn}


\hyperlink{class_common_timestamper_abde0de8253fd960807f7f2816c0c5225}{Common\+Timestamper}(으)로부터 재구현되었습니다.



windows\+\_\+hal.\+cpp 파일의 247 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
247                                                                                                            
        \{
248     \textcolor{keywordtype}{char} network\_card\_id[64];
249     \hyperlink{class_link_layer_address}{LinkLayerAddress} *addr = \textcolor{keyword}{dynamic\_cast<}\hyperlink{class_link_layer_address}{LinkLayerAddress} *\textcolor{keyword}{>}(iface\_label);
250     \textcolor{keywordflow}{if}( addr == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} ) \textcolor{keywordflow}{return} \textcolor{keyword}{false};
251     PIP\_ADAPTER\_INFO pAdapterInfo;
252     IP\_ADAPTER\_INFO AdapterInfo[32];       \textcolor{comment}{// Allocate information for up to 32 NICs}
253     DWORD dwBufLen = \textcolor{keyword}{sizeof}(AdapterInfo);  \textcolor{comment}{// Save memory size of buffer}
254 
255     DWORD dwStatus = GetAdaptersInfo( AdapterInfo, &dwBufLen );
256     \textcolor{keywordflow}{if}( dwStatus != ERROR\_SUCCESS ) \textcolor{keywordflow}{return} \textcolor{keyword}{false};
257 
258     \textcolor{keywordflow}{for}( pAdapterInfo = AdapterInfo; pAdapterInfo != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}; pAdapterInfo = pAdapterInfo->Next ) \{
259         \textcolor{keywordflow}{if}( pAdapterInfo->AddressLength == \hyperlink{ptptypes_8hpp_ab81d402a4929723091a6731508845125}{ETHER\_ADDR\_OCTETS} && *addr == 
      \hyperlink{class_link_layer_address}{LinkLayerAddress}( pAdapterInfo->Address )) \{
260             \textcolor{keywordflow}{break};
261         \}
262     \}
263 
264     \textcolor{keywordflow}{if}( pAdapterInfo == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} ) \textcolor{keywordflow}{return} \textcolor{keyword}{false};
265 
266     \hyperlink{struct_device_clock_rate_mapping}{DeviceClockRateMapping} *rate\_map = \hyperlink{windows__hal_8hpp_a279bd78690d5f4dc78890dc5e0a9564c}{DeviceClockRateMap};
267     \textcolor{keywordflow}{while} (rate\_map->\hyperlink{struct_device_clock_rate_mapping_af296ea48c692225a5d06a2675a82b0df}{device\_desc} != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
268     \{
269         \textcolor{keywordflow}{if} (strstr(pAdapterInfo->Description, rate\_map->\hyperlink{struct_device_clock_rate_mapping_af296ea48c692225a5d06a2675a82b0df}{device\_desc}) != 
      \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
270             \textcolor{keywordflow}{break};
271         ++rate\_map;
272     \}
273     \textcolor{keywordflow}{if} (rate\_map->\hyperlink{struct_device_clock_rate_mapping_af296ea48c692225a5d06a2675a82b0df}{device\_desc} != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}) \{
274         \hyperlink{class_windows_ether_timestamper_a9e4ba46145b31b628733af60187fc3c6}{netclock\_hz}.QuadPart = rate\_map->\hyperlink{struct_device_clock_rate_mapping_a4ff69d868409c6c16c86cab87ee0a3bf}{clock\_rate};
275     \}
276     \textcolor{keywordflow}{else} \{
277         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}(\textcolor{stringliteral}{"Unable to determine clock rate for interface %s"}, pAdapterInfo->
      Description);
278         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
279     \}
280 
281     \hyperlink{gptp__log_8hpp_ad59a6cd6d661bc3a4d13aaef2b0705a3}{GPTP\_LOG\_INFO}( \textcolor{stringliteral}{"Adapter UID: %s\(\backslash\)n"}, pAdapterInfo->AdapterName );
282     \hyperlink{linux_2src_2platform_8hpp_aed44a46556a58734a7351ddc2bfdb978}{PLAT\_strncpy}( network\_card\_id, \hyperlink{windows__hal_8hpp_a363e7820ec07f2290febc53a3da51e5a}{NETWORK\_CARD\_ID\_PREFIX}, 63 );
283     \hyperlink{linux_2src_2platform_8hpp_aed44a46556a58734a7351ddc2bfdb978}{PLAT\_strncpy}( network\_card\_id+strlen(network\_card\_id), pAdapterInfo->AdapterName, 63-strlen
      (network\_card\_id) );
284 
285     \hyperlink{class_windows_ether_timestamper_aa64b235fdc4f27df439a7e96278f2d9b}{miniport} = CreateFile( network\_card\_id,
286         GENERIC\_READ | GENERIC\_WRITE,
287         FILE\_SHARE\_READ | FILE\_SHARE\_WRITE,
288         \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, OPEN\_EXISTING, 0, \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} );
289     \textcolor{keywordflow}{if}( \hyperlink{class_windows_ether_timestamper_aa64b235fdc4f27df439a7e96278f2d9b}{miniport} == INVALID\_HANDLE\_VALUE ) \textcolor{keywordflow}{return} \textcolor{keyword}{false};
290 
291     \hyperlink{class_windows_ether_timestamper_a259066718bc34c6231bbefd0b7093b6e}{tsc\_hz}.QuadPart = \hyperlink{tsc_8hpp_a9da55c09944ef0da0cd43fcd0a5a3ee3}{getTSCFrequency}( \textcolor{keyword}{true} );
292     \textcolor{keywordflow}{if}( \hyperlink{class_windows_ether_timestamper_a259066718bc34c6231bbefd0b7093b6e}{tsc\_hz}.QuadPart == 0 ) \{
293         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
294     \}
295 
296     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
297 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_windows_ether_timestamper_a0bb8baec58abb2771c343d0e7d26902d_cgraph}
\end{center}
\end{figure}


\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}!H\+W\+Timestamper\+\_\+\+P\+P\+S\+\_\+start@{H\+W\+Timestamper\+\_\+\+P\+P\+S\+\_\+start}}
\index{H\+W\+Timestamper\+\_\+\+P\+P\+S\+\_\+start@{H\+W\+Timestamper\+\_\+\+P\+P\+S\+\_\+start}!Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}
\subsubsection[{\texorpdfstring{H\+W\+Timestamper\+\_\+\+P\+P\+S\+\_\+start()}{HWTimestamper_PPS_start()}}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf bool} H\+W\+Timestamper\+\_\+\+P\+P\+S\+\_\+start (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}, {\ttfamily [inherited]}}\hypertarget{class_common_timestamper_a2cbaeb84807ca61af0bc56bcc475468d}{}\label{class_common_timestamper_a2cbaeb84807ca61af0bc56bcc475468d}


Starts the P\+PS (pulse per second) interface. 

\begin{DoxyReturn}{반환값}
false 
\end{DoxyReturn}


common\+\_\+tstamper.\+hpp 파일의 125 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
125 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \};
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_common_timestamper_a2cbaeb84807ca61af0bc56bcc475468d_icgraph}
\end{center}
\end{figure}


\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}!H\+W\+Timestamper\+\_\+\+P\+P\+S\+\_\+stop@{H\+W\+Timestamper\+\_\+\+P\+P\+S\+\_\+stop}}
\index{H\+W\+Timestamper\+\_\+\+P\+P\+S\+\_\+stop@{H\+W\+Timestamper\+\_\+\+P\+P\+S\+\_\+stop}!Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}
\subsubsection[{\texorpdfstring{H\+W\+Timestamper\+\_\+\+P\+P\+S\+\_\+stop()}{HWTimestamper_PPS_stop()}}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf bool} H\+W\+Timestamper\+\_\+\+P\+P\+S\+\_\+stop (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}, {\ttfamily [inherited]}}\hypertarget{class_common_timestamper_ac5d9f1e5eb402dffaa8897367e9fd7d3}{}\label{class_common_timestamper_ac5d9f1e5eb402dffaa8897367e9fd7d3}


Stops the P\+PS (pulse per second) interface. 

\begin{DoxyReturn}{반환값}
true 
\end{DoxyReturn}


common\+\_\+tstamper.\+hpp 파일의 131 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
131 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \};
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_common_timestamper_ac5d9f1e5eb402dffaa8897367e9fd7d3_icgraph}
\end{center}
\end{figure}


\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}!H\+W\+Timestamper\+\_\+reset@{H\+W\+Timestamper\+\_\+reset}}
\index{H\+W\+Timestamper\+\_\+reset@{H\+W\+Timestamper\+\_\+reset}!Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}
\subsubsection[{\texorpdfstring{H\+W\+Timestamper\+\_\+reset(void)}{HWTimestamper_reset(void)}}]{\setlength{\rightskip}{0pt plus 5cm}virtual void H\+W\+Timestamper\+\_\+reset (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}, {\ttfamily [inherited]}}\hypertarget{class_common_timestamper_a1ee6bfcaf63bef07bbed1306e52e7203}{}\label{class_common_timestamper_a1ee6bfcaf63bef07bbed1306e52e7203}


Reset the hardware timestamp unit. 

\begin{DoxyReturn}{반환값}
void 
\end{DoxyReturn}


\hyperlink{class_linux_timestamper_generic_a4ad3a40de8c6141b2d26b9df5cc3cd97}{Linux\+Timestamper\+Generic}에서 재구현되었습니다.



common\+\_\+tstamper.\+hpp 파일의 65 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
65                                            \{
66     \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_common_timestamper_a1ee6bfcaf63bef07bbed1306e52e7203_icgraph}
\end{center}
\end{figure}


\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}!H\+W\+Timestamper\+\_\+rxtimestamp@{H\+W\+Timestamper\+\_\+rxtimestamp}}
\index{H\+W\+Timestamper\+\_\+rxtimestamp@{H\+W\+Timestamper\+\_\+rxtimestamp}!Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}
\subsubsection[{\texorpdfstring{H\+W\+Timestamper\+\_\+rxtimestamp(\+Port\+Identity $\ast$identity, P\+T\+P\+Message\+Id message\+Id, Timestamp \&timestamp, unsigned \&clock\+\_\+value, bool last)}{HWTimestamper_rxtimestamp(PortIdentity *identity, PTPMessageId messageId, Timestamp &timestamp, unsigned &clock_value, bool last)}}]{\setlength{\rightskip}{0pt plus 5cm}virtual int H\+W\+Timestamper\+\_\+rxtimestamp (
\begin{DoxyParamCaption}
\item[{{\bf Port\+Identity} $\ast$}]{identity, }
\item[{{\bf P\+T\+P\+Message\+Id}}]{message\+Id, }
\item[{{\bf Timestamp} \&}]{timestamp, }
\item[{unsigned \&}]{clock\+\_\+value, }
\item[{{\bf bool}}]{last}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{class_windows_ether_timestamper_a9dc0ab7dd51322bf334ba8fe1d4e77a9}{}\label{class_windows_ether_timestamper_a9dc0ab7dd51322bf334ba8fe1d4e77a9}


Gets the RX timestamp. 


\begin{DoxyParams}{매개변수}
{\em identity} & \hyperlink{class_port_identity}{Port\+Identity} interface \\
\hline
{\em \hyperlink{class_p_t_p_message_id}{P\+T\+P\+Message\+Id}} & Message ID \\
\hline
{\em timestamp} & \mbox{[}out\mbox{]} RX hardware timestamp \\
\hline
{\em clock\+\_\+value} & \mbox{[}out\mbox{]} Not used \\
\hline
{\em last} & Not used \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
G\+P\+T\+P\+\_\+\+E\+C\+\_\+\+S\+U\+C\+C\+E\+SS if no error, G\+P\+T\+P\+\_\+\+E\+C\+\_\+\+F\+A\+I\+L\+U\+RE if error and G\+P\+T\+P\+\_\+\+E\+C\+\_\+\+E\+A\+G\+A\+IN to try again. 
\end{DoxyReturn}


\hyperlink{class_ether_timestamper_afcc61feb25861ff20edbb657170a3c9e}{Ether\+Timestamper}를 구현.



windows\+\_\+hal.\+hpp 파일의 851 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
852     \{
853         DWORD buf[4], buf\_tmp[4];
854         DWORD returned;
855         \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t} rx\_r,rx\_s;
856         DWORD result;
857         uint16\_t packet\_sequence\_id;
858 
859         \textcolor{keywordflow}{while}(( result = \hyperlink{class_windows_ether_timestamper_ac5b503366553291b2c8f0a2b1a84219e}{readOID}( \hyperlink{windows__hal_8hpp_ad4b6bad3efdf67de170fad274a68ba40}{OID\_INTEL\_GET\_RXSTAMP}, buf\_tmp, \textcolor{keyword}{sizeof}(
      buf\_tmp), &returned )) == ERROR\_SUCCESS ) \{
860             memcpy( buf, buf\_tmp, \textcolor{keyword}{sizeof}( buf ));
861         \}
862         \textcolor{keywordflow}{if}( result != ERROR\_GEN\_FAILURE ) \textcolor{keywordflow}{return} \hyperlink{ieee1588_8hpp_ab75a746f471bd4537a099d86b38d78c1}{GPTP\_EC\_FAILURE};
863         \textcolor{keywordflow}{if}( returned != \textcolor{keyword}{sizeof}(buf\_tmp) ) \textcolor{keywordflow}{return} \hyperlink{ieee1588_8hpp_aee74e806e4f7deb78c6adee61f5dac87}{GPTP\_EC\_EAGAIN};
864         packet\_sequence\_id = *((\hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\_t} *) buf+3) >> 16;
865         \textcolor{keywordflow}{if} (\hyperlink{linux_2src_2platform_8cpp_a6b8f3e7b87b66fa774a07ddc67f883a7}{PLAT\_ntohs}(packet\_sequence\_id) != messageId.\hyperlink{class_p_t_p_message_id_abd5cac5701120cbbfc56129b31fa801f}{getSequenceId}()) \textcolor{keywordflow}{return} 
      \hyperlink{ieee1588_8hpp_aee74e806e4f7deb78c6adee61f5dac87}{GPTP\_EC\_EAGAIN};
866         rx\_r = (((\hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t})buf[1]) << 32) | buf[0];
867         rx\_s = \hyperlink{class_windows_ether_timestamper_a4644902a8381abd3a06e9caa3bdd8262}{scaleNativeClockToNanoseconds}( rx\_r );
868         timestamp = \hyperlink{class_windows_ether_timestamper_a7c702f26e7228347c2dd9ca9f481ecb5}{nanoseconds64ToTimestamp}( rx\_s );
869         timestamp.\hyperlink{class_timestamp_a8fab72cfd922b5757580642c2309e9bd}{\_version} = \hyperlink{class_common_timestamper_ab22abc2906422da61885ac6c8e6a1a59}{version};
870 
871         \textcolor{keywordflow}{return} \hyperlink{ieee1588_8hpp_a57ed3a54df25c6db88b00f685f517920}{GPTP\_EC\_SUCCESS};
872     \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_windows_ether_timestamper_a9dc0ab7dd51322bf334ba8fe1d4e77a9_cgraph}
\end{center}
\end{figure}


\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}!H\+W\+Timestamper\+\_\+txtimestamp@{H\+W\+Timestamper\+\_\+txtimestamp}}
\index{H\+W\+Timestamper\+\_\+txtimestamp@{H\+W\+Timestamper\+\_\+txtimestamp}!Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}
\subsubsection[{\texorpdfstring{H\+W\+Timestamper\+\_\+txtimestamp(\+Port\+Identity $\ast$identity, P\+T\+P\+Message\+Id message\+Id, Timestamp \&timestamp, unsigned \&clock\+\_\+value, bool last)}{HWTimestamper_txtimestamp(PortIdentity *identity, PTPMessageId messageId, Timestamp &timestamp, unsigned &clock_value, bool last)}}]{\setlength{\rightskip}{0pt plus 5cm}virtual int H\+W\+Timestamper\+\_\+txtimestamp (
\begin{DoxyParamCaption}
\item[{{\bf Port\+Identity} $\ast$}]{identity, }
\item[{{\bf P\+T\+P\+Message\+Id}}]{message\+Id, }
\item[{{\bf Timestamp} \&}]{timestamp, }
\item[{unsigned \&}]{clock\+\_\+value, }
\item[{{\bf bool}}]{last}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{class_windows_ether_timestamper_ade95e0e8d5fc8ec21dbf7b67bd1d9275}{}\label{class_windows_ether_timestamper_ade95e0e8d5fc8ec21dbf7b67bd1d9275}


Gets the TX timestamp. 


\begin{DoxyParams}{매개변수}
{\em identity} & \mbox{[}in\mbox{]} \hyperlink{class_port_identity}{Port\+Identity} interface \\
\hline
{\em \hyperlink{class_p_t_p_message_id}{P\+T\+P\+Message\+Id}} & Message ID \\
\hline
{\em timestamp} & \mbox{[}out\mbox{]} TX hardware timestamp \\
\hline
{\em clock\+\_\+value} & Not used \\
\hline
{\em last} & Not used \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
G\+P\+T\+P\+\_\+\+E\+C\+\_\+\+S\+U\+C\+C\+E\+SS if no error, G\+P\+T\+P\+\_\+\+E\+C\+\_\+\+F\+A\+I\+L\+U\+RE if error and G\+P\+T\+P\+\_\+\+E\+C\+\_\+\+E\+A\+G\+A\+IN to try again. 
\end{DoxyReturn}


\hyperlink{class_ether_timestamper_a82619058d136ce4314189f1c9db91914}{Ether\+Timestamper}를 구현.



windows\+\_\+hal.\+hpp 파일의 819 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
820     \{
821         DWORD buf[4], buf\_tmp[4];
822         DWORD returned = 0;
823         \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t} tx\_r,tx\_s;
824         DWORD result;
825 
826         \textcolor{keywordflow}{while}(( result = \hyperlink{class_windows_ether_timestamper_ac5b503366553291b2c8f0a2b1a84219e}{readOID}( \hyperlink{windows__hal_8hpp_abd559c9adf4f4f6e28887254eb31a779}{OID\_INTEL\_GET\_TXSTAMP}, buf\_tmp, \textcolor{keyword}{sizeof}(
      buf\_tmp), &returned )) == ERROR\_SUCCESS ) \{
827             memcpy( buf, buf\_tmp, \textcolor{keyword}{sizeof}( buf ));
828         \}
829         \textcolor{keywordflow}{if}( result != ERROR\_GEN\_FAILURE ) \{
830             fprintf( stderr, \textcolor{stringliteral}{"Error is: %d\(\backslash\)n"}, result );
831             \textcolor{keywordflow}{return} \hyperlink{ieee1588_8hpp_ab75a746f471bd4537a099d86b38d78c1}{GPTP\_EC\_FAILURE};
832         \}
833         \textcolor{keywordflow}{if}( returned != \textcolor{keyword}{sizeof}(buf\_tmp) ) \textcolor{keywordflow}{return} \hyperlink{ieee1588_8hpp_aee74e806e4f7deb78c6adee61f5dac87}{GPTP\_EC\_EAGAIN};
834         tx\_r = (((\hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t})buf[1]) << 32) | buf[0];
835         tx\_s = \hyperlink{class_windows_ether_timestamper_a4644902a8381abd3a06e9caa3bdd8262}{scaleNativeClockToNanoseconds}( tx\_r );
836         timestamp = \hyperlink{class_windows_ether_timestamper_a7c702f26e7228347c2dd9ca9f481ecb5}{nanoseconds64ToTimestamp}( tx\_s );
837         timestamp.\hyperlink{class_timestamp_a8fab72cfd922b5757580642c2309e9bd}{\_version} = \hyperlink{class_common_timestamper_ab22abc2906422da61885ac6c8e6a1a59}{version};
838 
839         \textcolor{keywordflow}{return} \hyperlink{ieee1588_8hpp_a57ed3a54df25c6db88b00f685f517920}{GPTP\_EC\_SUCCESS};
840     \}
\end{DoxyCode}
\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}!nanoseconds64\+To\+Timestamp@{nanoseconds64\+To\+Timestamp}}
\index{nanoseconds64\+To\+Timestamp@{nanoseconds64\+To\+Timestamp}!Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}
\subsubsection[{\texorpdfstring{nanoseconds64\+To\+Timestamp(uint64\+\_\+t time) const }{nanoseconds64ToTimestamp(uint64_t time) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Timestamp} nanoseconds64\+To\+Timestamp (
\begin{DoxyParamCaption}
\item[{{\bf uint64\+\_\+t}}]{time}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}\hypertarget{class_windows_ether_timestamper_a7c702f26e7228347c2dd9ca9f481ecb5}{}\label{class_windows_ether_timestamper_a7c702f26e7228347c2dd9ca9f481ecb5}


windows\+\_\+hal.\+hpp 파일의 749 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
749                                                               \{
750         \hyperlink{class_timestamp}{Timestamp} timestamp;
751         timestamp.\hyperlink{class_timestamp_a78ae11d98fcfe738239d0a853d82c84a}{nanoseconds} = time % 1000000000;
752         timestamp.\hyperlink{class_timestamp_a2bf200e58cd268d8b86cf93c51500a44}{seconds\_ls} = (time / 1000000000) & 0xFFFFFFFF;
753         timestamp.\hyperlink{class_timestamp_a5d98378d782519e6f9c17db70f1620f0}{seconds\_ms} = (uint16\_t)((time / 1000000000) >> 32);
754         \textcolor{keywordflow}{return} timestamp;
755     \}
\end{DoxyCode}
\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}!read\+O\+ID@{read\+O\+ID}}
\index{read\+O\+ID@{read\+O\+ID}!Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}
\subsubsection[{\texorpdfstring{read\+O\+I\+D(\+N\+D\+I\+S\+\_\+\+O\+I\+D oid, void $\ast$output\+\_\+buffer, D\+W\+O\+R\+D size, D\+W\+O\+R\+D $\ast$size\+\_\+returned) const }{readOID(NDIS_OID oid, void *output_buffer, DWORD size, DWORD *size_returned) const }}]{\setlength{\rightskip}{0pt plus 5cm}D\+W\+O\+RD read\+O\+ID (
\begin{DoxyParamCaption}
\item[{N\+D\+I\+S\+\_\+\+O\+ID}]{oid, }
\item[{void $\ast$}]{output\+\_\+buffer, }
\item[{D\+W\+O\+RD}]{size, }
\item[{D\+W\+O\+RD $\ast$}]{size\+\_\+returned}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}\hypertarget{class_windows_ether_timestamper_ac5b503366553291b2c8f0a2b1a84219e}{}\label{class_windows_ether_timestamper_ac5b503366553291b2c8f0a2b1a84219e}


windows\+\_\+hal.\+hpp 파일의 735 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
735                                                                                                \{
736         NDIS\_OID oid\_l = oid;
737         DWORD rc = DeviceIoControl(
738             \hyperlink{class_windows_ether_timestamper_aa64b235fdc4f27df439a7e96278f2d9b}{miniport},
739             IOCTL\_NDIS\_QUERY\_GLOBAL\_STATS,
740             &oid\_l,
741             \textcolor{keyword}{sizeof}(oid\_l),
742             output\_buffer,
743             \hyperlink{gst__avb__playbin_8c_a439227feff9d7f55384e8780cfc2eb82}{size},
744             size\_returned,
745             \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} );
746         \textcolor{keywordflow}{if}( rc == 0 ) \textcolor{keywordflow}{return} GetLastError();
747         \textcolor{keywordflow}{return} ERROR\_SUCCESS;
748     \}
\end{DoxyCode}
\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}!scale\+Native\+Clock\+To\+Nanoseconds@{scale\+Native\+Clock\+To\+Nanoseconds}}
\index{scale\+Native\+Clock\+To\+Nanoseconds@{scale\+Native\+Clock\+To\+Nanoseconds}!Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}
\subsubsection[{\texorpdfstring{scale\+Native\+Clock\+To\+Nanoseconds(uint64\+\_\+t time) const }{scaleNativeClockToNanoseconds(uint64_t time) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint64\+\_\+t} scale\+Native\+Clock\+To\+Nanoseconds (
\begin{DoxyParamCaption}
\item[{{\bf uint64\+\_\+t}}]{time}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}\hypertarget{class_windows_ether_timestamper_a4644902a8381abd3a06e9caa3bdd8262}{}\label{class_windows_ether_timestamper_a4644902a8381abd3a06e9caa3bdd8262}


windows\+\_\+hal.\+hpp 파일의 756 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
756                                                                   \{
757         \textcolor{keywordtype}{long} \textcolor{keywordtype}{double} scaled\_output = ((\textcolor{keywordtype}{long} double)\hyperlink{class_windows_ether_timestamper_a9e4ba46145b31b628733af60187fc3c6}{netclock\_hz}.QuadPart)/1000000000;
758         scaled\_output = ((\textcolor{keywordtype}{long} double) time)/scaled\_output;
759         \textcolor{keywordflow}{return} (\hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}) scaled\_output;
760     \}
\end{DoxyCode}
\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}!scale\+T\+S\+C\+Clock\+To\+Nanoseconds@{scale\+T\+S\+C\+Clock\+To\+Nanoseconds}}
\index{scale\+T\+S\+C\+Clock\+To\+Nanoseconds@{scale\+T\+S\+C\+Clock\+To\+Nanoseconds}!Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}
\subsubsection[{\texorpdfstring{scale\+T\+S\+C\+Clock\+To\+Nanoseconds(uint64\+\_\+t time) const }{scaleTSCClockToNanoseconds(uint64_t time) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint64\+\_\+t} scale\+T\+S\+C\+Clock\+To\+Nanoseconds (
\begin{DoxyParamCaption}
\item[{{\bf uint64\+\_\+t}}]{time}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}\hypertarget{class_windows_ether_timestamper_ad446fba57a1868632d97b94f032c9e1a}{}\label{class_windows_ether_timestamper_ad446fba57a1868632d97b94f032c9e1a}


windows\+\_\+hal.\+hpp 파일의 761 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
761                                                                \{
762         \textcolor{keywordtype}{long} \textcolor{keywordtype}{double} scaled\_output = ((\textcolor{keywordtype}{long} double)\hyperlink{class_windows_ether_timestamper_a259066718bc34c6231bbefd0b7093b6e}{tsc\_hz}.QuadPart)/1000000000;
763         scaled\_output = ((\textcolor{keywordtype}{long} double) time)/scaled\_output;
764         \textcolor{keywordflow}{return} (\hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}) scaled\_output;
765     \}
\end{DoxyCode}


\subsection{필드 문서화}
\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}!miniport@{miniport}}
\index{miniport@{miniport}!Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}
\subsubsection[{\texorpdfstring{miniport}{miniport}}]{\setlength{\rightskip}{0pt plus 5cm}H\+A\+N\+D\+LE miniport\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{class_windows_ether_timestamper_aa64b235fdc4f27df439a7e96278f2d9b}{}\label{class_windows_ether_timestamper_aa64b235fdc4f27df439a7e96278f2d9b}


windows\+\_\+hal.\+hpp 파일의 732 번째 라인에서 정의되었습니다.

\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}!netclock\+\_\+hz@{netclock\+\_\+hz}}
\index{netclock\+\_\+hz@{netclock\+\_\+hz}!Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}
\subsubsection[{\texorpdfstring{netclock\+\_\+hz}{netclock_hz}}]{\setlength{\rightskip}{0pt plus 5cm}L\+A\+R\+G\+E\+\_\+\+I\+N\+T\+E\+G\+ER netclock\+\_\+hz\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{class_windows_ether_timestamper_a9e4ba46145b31b628733af60187fc3c6}{}\label{class_windows_ether_timestamper_a9e4ba46145b31b628733af60187fc3c6}


windows\+\_\+hal.\+hpp 파일의 734 번째 라인에서 정의되었습니다.

\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}!tsc\+\_\+hz@{tsc\+\_\+hz}}
\index{tsc\+\_\+hz@{tsc\+\_\+hz}!Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}
\subsubsection[{\texorpdfstring{tsc\+\_\+hz}{tsc_hz}}]{\setlength{\rightskip}{0pt plus 5cm}L\+A\+R\+G\+E\+\_\+\+I\+N\+T\+E\+G\+ER tsc\+\_\+hz\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{class_windows_ether_timestamper_a259066718bc34c6231bbefd0b7093b6e}{}\label{class_windows_ether_timestamper_a259066718bc34c6231bbefd0b7093b6e}


windows\+\_\+hal.\+hpp 파일의 733 번째 라인에서 정의되었습니다.

\index{Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}!version@{version}}
\index{version@{version}!Windows\+Ether\+Timestamper@{Windows\+Ether\+Timestamper}}
\subsubsection[{\texorpdfstring{version}{version}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint8\+\_\+t} version\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}\hypertarget{class_common_timestamper_ab22abc2906422da61885ac6c8e6a1a59}{}\label{class_common_timestamper_ab22abc2906422da61885ac6c8e6a1a59}


H\+W\+Timestamper version. 



common\+\_\+tstamper.\+hpp 파일의 48 번째 라인에서 정의되었습니다.



이 클래스에 대한 문서화 페이지는 다음의 파일들로부터 생성되었습니다.\+:\begin{DoxyCompactItemize}
\item 
daemons/gptp/windows/daemon\+\_\+cl/\hyperlink{windows__hal_8hpp}{windows\+\_\+hal.\+hpp}\item 
daemons/gptp/windows/daemon\+\_\+cl/\hyperlink{windows__hal_8cpp}{windows\+\_\+hal.\+cpp}\end{DoxyCompactItemize}
