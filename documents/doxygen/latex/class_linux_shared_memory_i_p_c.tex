\hypertarget{class_linux_shared_memory_i_p_c}{}\section{Linux\+Shared\+Memory\+I\+PC 클래스 참조}
\label{class_linux_shared_memory_i_p_c}\index{Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}}


Linux shared memory interface.  




{\ttfamily \#include $<$linux\+\_\+hal\+\_\+common.\+hpp$>$}



Linux\+Shared\+Memory\+I\+P\+C에 대한 상속 다이어그램 \+: 
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=224pt]{class_linux_shared_memory_i_p_c__inherit__graph}
\end{center}
\end{figure}


Linux\+Shared\+Memory\+I\+P\+C에 대한 협력 다이어그램\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=224pt]{class_linux_shared_memory_i_p_c__coll__graph}
\end{center}
\end{figure}
\subsection*{Public 멤버 함수}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_linux_shared_memory_i_p_c_a5f9cb1732c5cd54813f256289d48e4dc}{Linux\+Shared\+Memory\+I\+PC} ()
\begin{DoxyCompactList}\small\item\em Initializes the internal flags. \end{DoxyCompactList}\item 
\hyperlink{class_linux_shared_memory_i_p_c_a7e343598b44f9404bb87fa4a2425dbfa}{$\sim$\+Linux\+Shared\+Memory\+I\+PC} ()
\begin{DoxyCompactList}\small\item\em Destroys and unlinks shared memory. \end{DoxyCompactList}\item 
virtual \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{class_linux_shared_memory_i_p_c_a85bbef59c73cce4fa55073cbe8b33e48}{init} (\hyperlink{class_o_s___i_p_c___a_r_g}{O\+S\+\_\+\+I\+P\+C\+\_\+\+A\+RG} $\ast$barg=\hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{N\+U\+LL})
\begin{DoxyCompactList}\small\item\em Initializes shared memory with D\+E\+F\+A\+U\+L\+T\+\_\+\+G\+R\+O\+U\+P\+N\+A\+ME case arg is null. \end{DoxyCompactList}\item 
virtual \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{class_linux_shared_memory_i_p_c_a9787157f53c3480d0182833ddd05d20c}{update} (\hyperlink{parse_8c_a67a9885ef4908cb72ce26d75b694386c}{int64\+\_\+t} ml\+\_\+phoffset, \hyperlink{parse_8c_a67a9885ef4908cb72ce26d75b694386c}{int64\+\_\+t} ls\+\_\+phoffset, \hyperlink{ptptypes_8hpp_a84de47dc2ed889ecd2b61706d3ad0f2e}{Frequency\+Ratio} ml\+\_\+freqoffset, \hyperlink{ptptypes_8hpp_a84de47dc2ed889ecd2b61706d3ad0f2e}{Frequency\+Ratio} ls\+\_\+freqoffset, \hyperlink{parse_8c_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t} local\+\_\+time, \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\+\_\+t} sync\+\_\+count, \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\+\_\+t} pdelay\+\_\+count, \hyperlink{ptptypes_8hpp_a679431f1afc75d7bb9e972c022e53672}{Port\+State} port\+\_\+state, \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} as\+Capable)
\begin{DoxyCompactList}\small\item\em Updates I\+PC values. \end{DoxyCompactList}\item 
virtual \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{class_linux_shared_memory_i_p_c_ab4218ec21d3322c365b300cfdb23b263}{update\+\_\+grandmaster} (\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} gptp\+\_\+grandmaster\+\_\+id\mbox{[}$\,$\mbox{]}, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} gptp\+\_\+domain\+\_\+number)
\begin{DoxyCompactList}\small\item\em Updates grandmaster I\+PC values. \end{DoxyCompactList}\item 
virtual \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{class_linux_shared_memory_i_p_c_ad971ad6fa412e49d34a5ca927815e715}{update\+\_\+network\+\_\+interface} (\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} clock\+\_\+identity\mbox{[}$\,$\mbox{]}, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} priority1, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} clock\+\_\+class, int16\+\_\+t offset\+\_\+scaled\+\_\+log\+\_\+variance, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} clock\+\_\+accuracy, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} priority2, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} domain\+\_\+number, int8\+\_\+t log\+\_\+sync\+\_\+interval, int8\+\_\+t log\+\_\+announce\+\_\+interval, int8\+\_\+t log\+\_\+pdelay\+\_\+interval, uint16\+\_\+t port\+\_\+number)
\begin{DoxyCompactList}\small\item\em Updates network interface I\+PC values. \end{DoxyCompactList}\item 
void \hyperlink{class_linux_shared_memory_i_p_c_a8c528baf37154d347366083f0f816846}{stop} ()
\begin{DoxyCompactList}\small\item\em unmaps and unlink shared memory \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private 속성}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{class_linux_shared_memory_i_p_c_a67ca3e78936424920539c340223a0b0a}{shm\+\_\+fd}
\item 
char $\ast$ \hyperlink{class_linux_shared_memory_i_p_c_a028459163bd8b988344f6837036cb0be}{master\+\_\+offset\+\_\+buffer}
\item 
int \hyperlink{class_linux_shared_memory_i_p_c_a6ce68847c12434f60d1b2654a3dc3409}{err}
\end{DoxyCompactItemize}


\subsection{상세한 설명}
Linux shared memory interface. 

linux\+\_\+hal\+\_\+common.\+hpp 파일의 621 번째 라인에서 정의되었습니다.



\subsection{생성자 \& 소멸자 문서화}
\index{Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}!Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}}
\index{Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}!Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}}
\subsubsection[{\texorpdfstring{Linux\+Shared\+Memory\+I\+P\+C()}{LinuxSharedMemoryIPC()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Linux\+Shared\+Memory\+I\+PC} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{class_linux_shared_memory_i_p_c_a5f9cb1732c5cd54813f256289d48e4dc}{}\label{class_linux_shared_memory_i_p_c_a5f9cb1732c5cd54813f256289d48e4dc}


Initializes the internal flags. 



linux\+\_\+hal\+\_\+common.\+hpp 파일의 630 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
630                            \{
631         \hyperlink{class_linux_shared_memory_i_p_c_a67ca3e78936424920539c340223a0b0a}{shm\_fd} = 0;
632         \hyperlink{class_linux_shared_memory_i_p_c_a6ce68847c12434f60d1b2654a3dc3409}{err} = 0;
633         \hyperlink{class_linux_shared_memory_i_p_c_a028459163bd8b988344f6837036cb0be}{master\_offset\_buffer} = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
634     \};
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_linux_shared_memory_i_p_c_a5f9cb1732c5cd54813f256289d48e4dc_cgraph}
\end{center}
\end{figure}


\index{Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}!````~Linux\+Shared\+Memory\+I\+PC@{$\sim$\+Linux\+Shared\+Memory\+I\+PC}}
\index{````~Linux\+Shared\+Memory\+I\+PC@{$\sim$\+Linux\+Shared\+Memory\+I\+PC}!Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}}
\subsubsection[{\texorpdfstring{$\sim$\+Linux\+Shared\+Memory\+I\+P\+C()}{~LinuxSharedMemoryIPC()}}]{\setlength{\rightskip}{0pt plus 5cm}$\sim${\bf Linux\+Shared\+Memory\+I\+PC} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{class_linux_shared_memory_i_p_c_a7e343598b44f9404bb87fa4a2425dbfa}{}\label{class_linux_shared_memory_i_p_c_a7e343598b44f9404bb87fa4a2425dbfa}


Destroys and unlinks shared memory. 



linux\+\_\+hal\+\_\+common.\+cpp 파일의 849 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
849                                             \{
850     munmap(\hyperlink{class_linux_shared_memory_i_p_c_a028459163bd8b988344f6837036cb0be}{master\_offset\_buffer}, \hyperlink{linux__ipc_8hpp_a16e67aa18d42bbdb08ac9af1c8d0f4f9}{SHM\_SIZE});
851     shm\_unlink(\hyperlink{linux__ipc_8hpp_a86393b21e6f74e9870d92149e7fe7f20}{SHM\_NAME});
852 \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_linux_shared_memory_i_p_c_a7e343598b44f9404bb87fa4a2425dbfa_icgraph}
\end{center}
\end{figure}




\subsection{멤버 함수 문서화}
\index{Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}!init@{init}}
\index{init@{init}!Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}}
\subsubsection[{\texorpdfstring{init(\+O\+S\+\_\+\+I\+P\+C\+\_\+\+A\+R\+G $\ast$barg=\+N\+U\+L\+L)}{init(OS_IPC_ARG *barg=NULL)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} init (
\begin{DoxyParamCaption}
\item[{{\bf O\+S\+\_\+\+I\+P\+C\+\_\+\+A\+RG} $\ast$}]{barg = {\ttfamily {\bf N\+U\+LL}}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{class_linux_shared_memory_i_p_c_a85bbef59c73cce4fa55073cbe8b33e48}{}\label{class_linux_shared_memory_i_p_c_a85bbef59c73cce4fa55073cbe8b33e48}


Initializes shared memory with D\+E\+F\+A\+U\+L\+T\+\_\+\+G\+R\+O\+U\+P\+N\+A\+ME case arg is null. 


\begin{DoxyParams}{매개변수}
{\em barg} & Groupname of the shared memory \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
T\+R\+UE if no error, F\+A\+L\+SE otherwise 
\end{DoxyReturn}


\hyperlink{class_o_s___i_p_c_af0461840a5fc47851aa77477baf10f6b}{O\+S\+\_\+\+I\+PC}를 구현.



linux\+\_\+hal\+\_\+common.\+cpp 파일의 854 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
854                                                   \{
855     \hyperlink{class_linux_i_p_c_arg}{LinuxIPCArg} *arg;
856     \textcolor{keyword}{struct }group *grp;
857     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *group\_name;
858     pthread\_mutexattr\_t shared;
859     mode\_t oldumask = umask(0);
860 
861     \textcolor{keywordflow}{if}( barg == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} ) \{
862         group\_name = \hyperlink{linux__hal__common_8hpp_a0d266ad5e945d9d5c8ad50ceef299d1a}{DEFAULT\_GROUPNAME};
863     \} \textcolor{keywordflow}{else} \{
864         arg = \textcolor{keyword}{dynamic\_cast<}\hyperlink{class_linux_i_p_c_arg}{LinuxIPCArg} *\textcolor{keyword}{>} (barg);
865         \textcolor{keywordflow}{if}( arg == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} ) \{
866             \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}( \textcolor{stringliteral}{"Wrong IPC init arg type"} );
867             \textcolor{keywordflow}{goto} exit\_error;
868         \} \textcolor{keywordflow}{else} \{
869             group\_name = arg->\hyperlink{class_linux_i_p_c_arg_af79ba313643b1c6e634d705221930b84}{group\_name};
870         \}
871     \}
872     grp = getgrnam( group\_name );
873     \textcolor{keywordflow}{if}( grp == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} ) \{
874         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}( \textcolor{stringliteral}{"Group %s not found, will try root (0) instead"}, group\_name );
875     \}
876 
877     \hyperlink{class_linux_shared_memory_i_p_c_a67ca3e78936424920539c340223a0b0a}{shm\_fd} = shm\_open( \hyperlink{linux__ipc_8hpp_a86393b21e6f74e9870d92149e7fe7f20}{SHM\_NAME}, O\_RDWR | O\_CREAT, 0660 );
878     \textcolor{keywordflow}{if}( \hyperlink{class_linux_shared_memory_i_p_c_a67ca3e78936424920539c340223a0b0a}{shm\_fd} == -1 ) \{
879         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}( \textcolor{stringliteral}{"shm\_open(): %s"}, strerror(errno) );
880         \textcolor{keywordflow}{goto} exit\_error;
881     \}
882     (void) umask(oldumask);
883     \textcolor{keywordflow}{if} (fchown(\hyperlink{class_linux_shared_memory_i_p_c_a67ca3e78936424920539c340223a0b0a}{shm\_fd}, -1, grp != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} ? grp->gr\_gid : 0) < 0) \{
884         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}(\textcolor{stringliteral}{"shm\_open(): Failed to set ownership"});
885     \}
886     \textcolor{keywordflow}{if}( ftruncate( \hyperlink{class_linux_shared_memory_i_p_c_a67ca3e78936424920539c340223a0b0a}{shm\_fd}, \hyperlink{linux__ipc_8hpp_a16e67aa18d42bbdb08ac9af1c8d0f4f9}{SHM\_SIZE} ) == -1 ) \{
887         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}( \textcolor{stringliteral}{"ftruncate()"} );
888         \textcolor{keywordflow}{goto} exit\_unlink;
889     \}
890     \hyperlink{class_linux_shared_memory_i_p_c_a028459163bd8b988344f6837036cb0be}{master\_offset\_buffer} = (\textcolor{keywordtype}{char} *) mmap
891         ( \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \hyperlink{linux__ipc_8hpp_a16e67aa18d42bbdb08ac9af1c8d0f4f9}{SHM\_SIZE}, PROT\_READ | PROT\_WRITE, MAP\_LOCKED | MAP\_SHARED,
892           \hyperlink{class_linux_shared_memory_i_p_c_a67ca3e78936424920539c340223a0b0a}{shm\_fd}, 0 );
893     \textcolor{keywordflow}{if}( \hyperlink{class_linux_shared_memory_i_p_c_a028459163bd8b988344f6837036cb0be}{master\_offset\_buffer} == (\textcolor{keywordtype}{char} *) -1 ) \{
894         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}( \textcolor{stringliteral}{"mmap()"} );
895         \textcolor{keywordflow}{goto} exit\_unlink;
896     \}
897     \textcolor{comment}{/*create mutex attr */}
898     \hyperlink{class_linux_shared_memory_i_p_c_a6ce68847c12434f60d1b2654a3dc3409}{err} = pthread\_mutexattr\_init(&shared);
899     \textcolor{keywordflow}{if}(\hyperlink{class_linux_shared_memory_i_p_c_a6ce68847c12434f60d1b2654a3dc3409}{err} != 0) \{
900         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}
901             (\textcolor{stringliteral}{"mutex attr initialization failed - %s"},
902              strerror(errno));
903         \textcolor{keywordflow}{goto} exit\_unlink;
904     \}
905     pthread\_mutexattr\_setpshared(&shared,1);
906     \textcolor{comment}{/*create a mutex */}
907     \hyperlink{class_linux_shared_memory_i_p_c_a6ce68847c12434f60d1b2654a3dc3409}{err} = pthread\_mutex\_init((pthread\_mutex\_t *) \hyperlink{class_linux_shared_memory_i_p_c_a028459163bd8b988344f6837036cb0be}{master\_offset\_buffer}, &shared);
908     \textcolor{keywordflow}{if}(\hyperlink{class_linux_shared_memory_i_p_c_a6ce68847c12434f60d1b2654a3dc3409}{err} != 0) \{
909         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}
910             (\textcolor{stringliteral}{"sharedmem - Mutex initialization failed - %s"},
911              strerror(errno));
912         \textcolor{keywordflow}{goto} exit\_unlink;
913     \}
914     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
915  exit\_unlink:
916     shm\_unlink( \hyperlink{linux__ipc_8hpp_a86393b21e6f74e9870d92149e7fe7f20}{SHM\_NAME} );
917  exit\_error:
918     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
919 \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=183pt]{class_linux_shared_memory_i_p_c_a85bbef59c73cce4fa55073cbe8b33e48_icgraph}
\end{center}
\end{figure}


\index{Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}!stop@{stop}}
\index{stop@{stop}!Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}}
\subsubsection[{\texorpdfstring{stop()}{stop()}}]{\setlength{\rightskip}{0pt plus 5cm}void stop (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{class_linux_shared_memory_i_p_c_a8c528baf37154d347366083f0f816846}{}\label{class_linux_shared_memory_i_p_c_a8c528baf37154d347366083f0f816846}


unmaps and unlink shared memory 

\begin{DoxyReturn}{반환값}
void 
\end{DoxyReturn}


linux\+\_\+hal\+\_\+common.\+cpp 파일의 1015 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
1015                                 \{
1016     \textcolor{keywordflow}{if}( \hyperlink{class_linux_shared_memory_i_p_c_a028459163bd8b988344f6837036cb0be}{master\_offset\_buffer} != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} ) \{
1017         munmap( \hyperlink{class_linux_shared_memory_i_p_c_a028459163bd8b988344f6837036cb0be}{master\_offset\_buffer}, \hyperlink{linux__ipc_8hpp_a16e67aa18d42bbdb08ac9af1c8d0f4f9}{SHM\_SIZE} );
1018         shm\_unlink( \hyperlink{linux__ipc_8hpp_a86393b21e6f74e9870d92149e7fe7f20}{SHM\_NAME} );
1019     \}
1020 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_linux_shared_memory_i_p_c_a8c528baf37154d347366083f0f816846_cgraph}
\end{center}
\end{figure}




이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=274pt]{class_linux_shared_memory_i_p_c_a8c528baf37154d347366083f0f816846_icgraph}
\end{center}
\end{figure}


\index{Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}!update@{update}}
\index{update@{update}!Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}}
\subsubsection[{\texorpdfstring{update(int64\+\_\+t ml\+\_\+phoffset, int64\+\_\+t ls\+\_\+phoffset, Frequency\+Ratio ml\+\_\+freqoffset, Frequency\+Ratio ls\+\_\+freqoffset, uint64\+\_\+t local\+\_\+time, uint32\+\_\+t sync\+\_\+count, uint32\+\_\+t pdelay\+\_\+count, Port\+State port\+\_\+state, bool as\+Capable)}{update(int64_t ml_phoffset, int64_t ls_phoffset, FrequencyRatio ml_freqoffset, FrequencyRatio ls_freqoffset, uint64_t local_time, uint32_t sync_count, uint32_t pdelay_count, PortState port_state, bool asCapable)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} update (
\begin{DoxyParamCaption}
\item[{{\bf int64\+\_\+t}}]{ml\+\_\+phoffset, }
\item[{{\bf int64\+\_\+t}}]{ls\+\_\+phoffset, }
\item[{{\bf Frequency\+Ratio}}]{ml\+\_\+freqoffset, }
\item[{{\bf Frequency\+Ratio}}]{ls\+\_\+freqoffset, }
\item[{{\bf uint64\+\_\+t}}]{local\+\_\+time, }
\item[{{\bf uint32\+\_\+t}}]{sync\+\_\+count, }
\item[{{\bf uint32\+\_\+t}}]{pdelay\+\_\+count, }
\item[{{\bf Port\+State}}]{port\+\_\+state, }
\item[{{\bf bool}}]{as\+Capable}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{class_linux_shared_memory_i_p_c_a9787157f53c3480d0182833ddd05d20c}{}\label{class_linux_shared_memory_i_p_c_a9787157f53c3480d0182833ddd05d20c}


Updates I\+PC values. 


\begin{DoxyParams}{매개변수}
{\em ml\+\_\+phoffset} & Master to local phase offset \\
\hline
{\em ls\+\_\+phoffset} & Local to slave phase offset \\
\hline
{\em ml\+\_\+freqoffset} & Master to local frequency offset \\
\hline
{\em ls\+\_\+freqoffset} & Local to slave frequency offset \\
\hline
{\em local\+\_\+time} & Local time \\
\hline
{\em sync\+\_\+count} & Count of syncs \\
\hline
{\em pdelay\+\_\+count} & Count of pdelays \\
\hline
{\em port\+\_\+state} & Port\textquotesingle{}s state \\
\hline
{\em as\+Capable} & as\+Capable flag\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
T\+R\+UE 
\end{DoxyReturn}


\hyperlink{class_o_s___i_p_c_a33745dd660255c4161278e3bf75387dc}{O\+S\+\_\+\+I\+PC}를 구현.



linux\+\_\+hal\+\_\+common.\+cpp 파일의 921 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
931 \{
932     \textcolor{keywordtype}{int} buf\_offset = 0;
933     pid\_t process\_id = getpid();
934     \textcolor{keywordtype}{char} *shm\_buffer = \hyperlink{class_linux_shared_memory_i_p_c_a028459163bd8b988344f6837036cb0be}{master\_offset\_buffer};
935     \hyperlink{structg_ptp_time_data}{gPtpTimeData} *ptimedata;
936     \textcolor{keywordflow}{if}( shm\_buffer != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} ) \{
937         \textcolor{comment}{/* lock */}
938         pthread\_mutex\_lock((pthread\_mutex\_t *) shm\_buffer);
939         buf\_offset += \textcolor{keyword}{sizeof}(pthread\_mutex\_t);
940         ptimedata   = (\hyperlink{structg_ptp_time_data}{gPtpTimeData} *) (shm\_buffer + buf\_offset);
941         ptimedata->\hyperlink{structg_ptp_time_data_a707b32410dd96584191405fcc6b1b10d}{ml\_phoffset} = ml\_phoffset;
942         ptimedata->\hyperlink{structg_ptp_time_data_a092b9f356daa2757877b51e4084366be}{ls\_phoffset} = ls\_phoffset;
943         ptimedata->\hyperlink{structg_ptp_time_data_aafeb4d0fa7d3cb53ee3686b804e47617}{ml\_freqoffset} = ml\_freqoffset;
944         ptimedata->\hyperlink{structg_ptp_time_data_a396f365f5e7c66610f076359c5d99c6e}{ls\_freqoffset} = ls\_freqoffset;
945         ptimedata->\hyperlink{structg_ptp_time_data_a77a3c33b68032d5db3c0c556a80ef651}{local\_time} = local\_time;
946         ptimedata->\hyperlink{structg_ptp_time_data_ab918355ca94ac81d7397800a7ef77c0a}{sync\_count}   = sync\_count;
947         ptimedata->\hyperlink{structg_ptp_time_data_a7557e8c3c5a258ba096b5c1c274f17bf}{pdelay\_count} = pdelay\_count;
948         ptimedata->\hyperlink{structg_ptp_time_data_a15a09cf240fb37b905e4d4e1e9f5b9a1}{asCapable} = asCapable;
949         ptimedata->\hyperlink{structg_ptp_time_data_ae66554126902ed959a3b296ddd3204e8}{port\_state}   = port\_state;
950         ptimedata->\hyperlink{structg_ptp_time_data_aa5e5e89995d6bfb4b61b08fa89656812}{process\_id}   = process\_id;
951         \textcolor{comment}{/* unlock */}
952         pthread\_mutex\_unlock((pthread\_mutex\_t *) shm\_buffer);
953     \}
954     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
955 \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=285pt]{class_linux_shared_memory_i_p_c_a9787157f53c3480d0182833ddd05d20c_icgraph}
\end{center}
\end{figure}


\index{Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}!update\+\_\+grandmaster@{update\+\_\+grandmaster}}
\index{update\+\_\+grandmaster@{update\+\_\+grandmaster}!Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}}
\subsubsection[{\texorpdfstring{update\+\_\+grandmaster(uint8\+\_\+t gptp\+\_\+grandmaster\+\_\+id[], uint8\+\_\+t gptp\+\_\+domain\+\_\+number)}{update_grandmaster(uint8_t gptp_grandmaster_id[], uint8_t gptp_domain_number)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} update\+\_\+grandmaster (
\begin{DoxyParamCaption}
\item[{{\bf uint8\+\_\+t}}]{gptp\+\_\+grandmaster\+\_\+id\mbox{[}$\,$\mbox{]}, }
\item[{{\bf uint8\+\_\+t}}]{gptp\+\_\+domain\+\_\+number}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{class_linux_shared_memory_i_p_c_ab4218ec21d3322c365b300cfdb23b263}{}\label{class_linux_shared_memory_i_p_c_ab4218ec21d3322c365b300cfdb23b263}


Updates grandmaster I\+PC values. 


\begin{DoxyParams}{매개변수}
{\em gptp\+\_\+grandmaster\+\_\+id} & Current grandmaster id (all 0\textquotesingle{}s if no grandmaster selected) \\
\hline
{\em gptp\+\_\+domain\+\_\+number} & g\+P\+TP domain number\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
T\+R\+UE 
\end{DoxyReturn}


\hyperlink{class_o_s___i_p_c_a322c3dc7306144448f366a525f634fdf}{O\+S\+\_\+\+I\+PC}를 구현.



linux\+\_\+hal\+\_\+common.\+cpp 파일의 957 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
960 \{
961     \textcolor{keywordtype}{int} buf\_offset = 0;
962     \textcolor{keywordtype}{char} *shm\_buffer = \hyperlink{class_linux_shared_memory_i_p_c_a028459163bd8b988344f6837036cb0be}{master\_offset\_buffer};
963     \hyperlink{structg_ptp_time_data}{gPtpTimeData} *ptimedata;
964     \textcolor{keywordflow}{if}( shm\_buffer != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} ) \{
965         \textcolor{comment}{/* lock */}
966         pthread\_mutex\_lock((pthread\_mutex\_t *) shm\_buffer);
967         buf\_offset += \textcolor{keyword}{sizeof}(pthread\_mutex\_t);
968         ptimedata   = (\hyperlink{structg_ptp_time_data}{gPtpTimeData} *) (shm\_buffer + buf\_offset);
969         memcpy(ptimedata->\hyperlink{structg_ptp_time_data_a91da646ac8f2da272fe3b8941c3f4d54}{gptp\_grandmaster\_id}, gptp\_grandmaster\_id, 
      \hyperlink{ptptypes_8hpp_afd1566058ed7927c2b790c9d4a0051ec}{PTP\_CLOCK\_IDENTITY\_LENGTH});
970         ptimedata->\hyperlink{structg_ptp_time_data_ac53b4e61c0f960e16c86cfe678ca256d}{gptp\_domain\_number} = gptp\_domain\_number;
971         \textcolor{comment}{/* unlock */}
972         pthread\_mutex\_unlock((pthread\_mutex\_t *) shm\_buffer);
973     \}
974     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
975 \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=344pt]{class_linux_shared_memory_i_p_c_ab4218ec21d3322c365b300cfdb23b263_icgraph}
\end{center}
\end{figure}


\index{Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}!update\+\_\+network\+\_\+interface@{update\+\_\+network\+\_\+interface}}
\index{update\+\_\+network\+\_\+interface@{update\+\_\+network\+\_\+interface}!Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}}
\subsubsection[{\texorpdfstring{update\+\_\+network\+\_\+interface(uint8\+\_\+t clock\+\_\+identity[], uint8\+\_\+t priority1, uint8\+\_\+t clock\+\_\+class, int16\+\_\+t offset\+\_\+scaled\+\_\+log\+\_\+variance, uint8\+\_\+t clock\+\_\+accuracy, uint8\+\_\+t priority2, uint8\+\_\+t domain\+\_\+number, int8\+\_\+t log\+\_\+sync\+\_\+interval, int8\+\_\+t log\+\_\+announce\+\_\+interval, int8\+\_\+t log\+\_\+pdelay\+\_\+interval, uint16\+\_\+t port\+\_\+number)}{update_network_interface(uint8_t clock_identity[], uint8_t priority1, uint8_t clock_class, int16_t offset_scaled_log_variance, uint8_t clock_accuracy, uint8_t priority2, uint8_t domain_number, int8_t log_sync_interval, int8_t log_announce_interval, int8_t log_pdelay_interval, uint16_t port_number)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} update\+\_\+network\+\_\+interface (
\begin{DoxyParamCaption}
\item[{{\bf uint8\+\_\+t}}]{clock\+\_\+identity\mbox{[}$\,$\mbox{]}, }
\item[{{\bf uint8\+\_\+t}}]{priority1, }
\item[{{\bf uint8\+\_\+t}}]{clock\+\_\+class, }
\item[{int16\+\_\+t}]{offset\+\_\+scaled\+\_\+log\+\_\+variance, }
\item[{{\bf uint8\+\_\+t}}]{clock\+\_\+accuracy, }
\item[{{\bf uint8\+\_\+t}}]{priority2, }
\item[{{\bf uint8\+\_\+t}}]{domain\+\_\+number, }
\item[{int8\+\_\+t}]{log\+\_\+sync\+\_\+interval, }
\item[{int8\+\_\+t}]{log\+\_\+announce\+\_\+interval, }
\item[{int8\+\_\+t}]{log\+\_\+pdelay\+\_\+interval, }
\item[{uint16\+\_\+t}]{port\+\_\+number}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{class_linux_shared_memory_i_p_c_ad971ad6fa412e49d34a5ca927815e715}{}\label{class_linux_shared_memory_i_p_c_ad971ad6fa412e49d34a5ca927815e715}


Updates network interface I\+PC values. 


\begin{DoxyParams}{매개변수}
{\em clock\+\_\+identity} & The clock identity of the interface \\
\hline
{\em priority1} & The priority1 field of the grandmaster functionality of the interface, or 0x\+FF if not supported \\
\hline
{\em clock\+\_\+class} & The clock\+Class field of the grandmaster functionality of the interface, or 0x\+FF if not supported \\
\hline
{\em offset\+\_\+scaled\+\_\+log\+\_\+variance} & The offset\+Scaled\+Log\+Variance field of the grandmaster functionality of the interface, or 0x0000 if not supported \\
\hline
{\em clock\+\_\+accuracy} & The clock\+Accuracy field of the grandmaster functionality of the interface, or 0x\+FF if not supported \\
\hline
{\em priority2} & The priority2 field of the grandmaster functionality of the interface, or 0x\+FF if not supported \\
\hline
{\em domain\+\_\+number} & The domain\+Number field of the grandmaster functionality of the interface, or 0 if not supported \\
\hline
{\em log\+\_\+sync\+\_\+interval} & The current\+Log\+Sync\+Interval field of the grandmaster functionality of the interface, or 0 if not supported \\
\hline
{\em log\+\_\+announce\+\_\+interval} & The current\+Log\+Announce\+Interval field of the grandmaster functionality of the interface, or 0 if not supported \\
\hline
{\em log\+\_\+pdelay\+\_\+interval} & The current\+Log\+P\+Delay\+Req\+Interval field of the grandmaster functionality of the interface, or 0 if not supported \\
\hline
{\em port\+\_\+number} & The port\+Number field of the interface, or 0x0000 if not supported\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
T\+R\+UE 
\end{DoxyReturn}


\hyperlink{class_o_s___i_p_c_a4c9324307028ffad704ed6cb56b5a73d}{O\+S\+\_\+\+I\+PC}를 구현.



linux\+\_\+hal\+\_\+common.\+cpp 파일의 977 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
989 \{
990     \textcolor{keywordtype}{int} buf\_offset = 0;
991     \textcolor{keywordtype}{char} *shm\_buffer = \hyperlink{class_linux_shared_memory_i_p_c_a028459163bd8b988344f6837036cb0be}{master\_offset\_buffer};
992     \hyperlink{structg_ptp_time_data}{gPtpTimeData} *ptimedata;
993     \textcolor{keywordflow}{if}( shm\_buffer != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} ) \{
994         \textcolor{comment}{/* lock */}
995         pthread\_mutex\_lock((pthread\_mutex\_t *) shm\_buffer);
996         buf\_offset += \textcolor{keyword}{sizeof}(pthread\_mutex\_t);
997         ptimedata   = (\hyperlink{structg_ptp_time_data}{gPtpTimeData} *) (shm\_buffer + buf\_offset);
998         memcpy(ptimedata->\hyperlink{structg_ptp_time_data_af57b2186850d88240e6095da54758a2e}{clock\_identity}, clock\_identity, 
      \hyperlink{ptptypes_8hpp_afd1566058ed7927c2b790c9d4a0051ec}{PTP\_CLOCK\_IDENTITY\_LENGTH});
999         ptimedata->\hyperlink{structg_ptp_time_data_af98f08e3d1b016cd549310197ba8673c}{priority1} = priority1;
1000         ptimedata->\hyperlink{structg_ptp_time_data_aafe98ca785cdce0ce5eaa26f2930d2fe}{clock\_class} = clock\_class;
1001         ptimedata->\hyperlink{structg_ptp_time_data_a022841cfc4d83dc906f116eec53f1d9a}{offset\_scaled\_log\_variance} = offset\_scaled\_log\_variance;
1002         ptimedata->\hyperlink{structg_ptp_time_data_a708d6d971b6be997cf8d3e683951ceb0}{clock\_accuracy} = clock\_accuracy;
1003         ptimedata->\hyperlink{structg_ptp_time_data_ac04b889463a96b43985cb82020e3c39b}{priority2} = priority2;
1004         ptimedata->\hyperlink{structg_ptp_time_data_a96702548f5b9222af26319c695764b29}{domain\_number} = domain\_number;
1005         ptimedata->\hyperlink{structg_ptp_time_data_a2d4950b4c6da4dfa67688dcaf6139c9d}{log\_sync\_interval} = log\_sync\_interval;
1006         ptimedata->\hyperlink{structg_ptp_time_data_a15bb50a04ecd3ec11563012afc7e24a7}{log\_announce\_interval} = log\_announce\_interval;
1007         ptimedata->\hyperlink{structg_ptp_time_data_a26544b553c0b251da8e632533f260a5d}{log\_pdelay\_interval} = log\_pdelay\_interval;
1008         ptimedata->\hyperlink{structg_ptp_time_data_af0afa7bb85d49ac5ff873fad86a48ec5}{port\_number}   = port\_number;
1009         \textcolor{comment}{/* unlock */}
1010         pthread\_mutex\_unlock((pthread\_mutex\_t *) shm\_buffer);
1011     \}
1012     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
1013 \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_linux_shared_memory_i_p_c_ad971ad6fa412e49d34a5ca927815e715_icgraph}
\end{center}
\end{figure}




\subsection{필드 문서화}
\index{Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}!err@{err}}
\index{err@{err}!Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}}
\subsubsection[{\texorpdfstring{err}{err}}]{\setlength{\rightskip}{0pt plus 5cm}int err\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{class_linux_shared_memory_i_p_c_a6ce68847c12434f60d1b2654a3dc3409}{}\label{class_linux_shared_memory_i_p_c_a6ce68847c12434f60d1b2654a3dc3409}


linux\+\_\+hal\+\_\+common.\+hpp 파일의 625 번째 라인에서 정의되었습니다.

\index{Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}!master\+\_\+offset\+\_\+buffer@{master\+\_\+offset\+\_\+buffer}}
\index{master\+\_\+offset\+\_\+buffer@{master\+\_\+offset\+\_\+buffer}!Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}}
\subsubsection[{\texorpdfstring{master\+\_\+offset\+\_\+buffer}{master_offset_buffer}}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ master\+\_\+offset\+\_\+buffer\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{class_linux_shared_memory_i_p_c_a028459163bd8b988344f6837036cb0be}{}\label{class_linux_shared_memory_i_p_c_a028459163bd8b988344f6837036cb0be}


linux\+\_\+hal\+\_\+common.\+hpp 파일의 624 번째 라인에서 정의되었습니다.

\index{Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}!shm\+\_\+fd@{shm\+\_\+fd}}
\index{shm\+\_\+fd@{shm\+\_\+fd}!Linux\+Shared\+Memory\+I\+PC@{Linux\+Shared\+Memory\+I\+PC}}
\subsubsection[{\texorpdfstring{shm\+\_\+fd}{shm_fd}}]{\setlength{\rightskip}{0pt plus 5cm}int shm\+\_\+fd\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{class_linux_shared_memory_i_p_c_a67ca3e78936424920539c340223a0b0a}{}\label{class_linux_shared_memory_i_p_c_a67ca3e78936424920539c340223a0b0a}


linux\+\_\+hal\+\_\+common.\+hpp 파일의 623 번째 라인에서 정의되었습니다.



이 클래스에 대한 문서화 페이지는 다음의 파일들로부터 생성되었습니다.\+:\begin{DoxyCompactItemize}
\item 
daemons/gptp/linux/src/\hyperlink{linux__hal__common_8hpp}{linux\+\_\+hal\+\_\+common.\+hpp}\item 
daemons/gptp/linux/src/\hyperlink{linux__hal__common_8cpp}{linux\+\_\+hal\+\_\+common.\+cpp}\end{DoxyCompactItemize}
