\hypertarget{openavb__endpoint__client__osal_8c}{}\section{lib/avtp\+\_\+pipeline/platform/\+Linux/endpoint/openavb\+\_\+endpoint\+\_\+client\+\_\+osal.c 파일 참조}
\label{openavb__endpoint__client__osal_8c}\index{lib/avtp\+\_\+pipeline/platform/\+Linux/endpoint/openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c@{lib/avtp\+\_\+pipeline/platform/\+Linux/endpoint/openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c}}
이 그래프는 이 파일을 직/간접적으로 include 하는 파일들을 보여줍니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=215pt]{openavb__endpoint__client__osal_8c__dep__incl}
\end{center}
\end{figure}
\subsection*{매크로}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{openavb__endpoint__client__osal_8c_a96fd819050cde6aafa91a7776030985a}{O\+P\+E\+N\+A\+V\+B\+\_\+\+E\+N\+D\+P\+O\+I\+N\+T\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+O\+S\+A\+L\+\_\+C}
\end{DoxyCompactItemize}
\subsection*{함수}
\begin{DoxyCompactItemize}
\item 
static void \hyperlink{openavb__endpoint__client__osal_8c_a997118c3d9b394cb957b442f0b021114}{socket\+Close} (int h)
\item 
static \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{openavb__endpoint__client__osal_8c_a5d009d32a5183e5ef658073607044134}{openavb\+Ept\+Clnt\+Send\+To\+Server} (int h, \hyperlink{structopenavb_endpoint_message__t}{openavb\+Endpoint\+Message\+\_\+t} $\ast$\hyperlink{openavb__log_8c_a0c7e58a50354c4a4d6dad428d0e47029}{msg})
\item 
int \hyperlink{openavb__endpoint__client__osal_8c_a57bc13f9b1e43e761a648e763222c2c7}{openavb\+Ept\+Clnt\+Open\+Srvr\+Connection} (\hyperlink{structtl__state__t}{tl\+\_\+state\+\_\+t} $\ast$p\+T\+L\+State)
\item 
void \hyperlink{openavb__endpoint__client__osal_8c_ae614896dde01bc254d0fd5a6a59b0258}{openavb\+Ept\+Clnt\+Close\+Srvr\+Connection} (int h)
\item 
\hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{openavb__endpoint__client__osal_8c_a04a97a5b51065f7ce1f99c1dcb891f52}{openavb\+Ept\+Clnt\+Service} (int h, int \hyperlink{aaf-listener_8c_a869c60cb165af7b6177060c00c5c416c}{timeout})
\end{DoxyCompactItemize}


\subsection{매크로 문서화}
\index{openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c@{openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c}!O\+P\+E\+N\+A\+V\+B\+\_\+\+E\+N\+D\+P\+O\+I\+N\+T\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+O\+S\+A\+L\+\_\+C@{O\+P\+E\+N\+A\+V\+B\+\_\+\+E\+N\+D\+P\+O\+I\+N\+T\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+O\+S\+A\+L\+\_\+C}}
\index{O\+P\+E\+N\+A\+V\+B\+\_\+\+E\+N\+D\+P\+O\+I\+N\+T\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+O\+S\+A\+L\+\_\+C@{O\+P\+E\+N\+A\+V\+B\+\_\+\+E\+N\+D\+P\+O\+I\+N\+T\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+O\+S\+A\+L\+\_\+C}!openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c@{openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c}}
\subsubsection[{\texorpdfstring{O\+P\+E\+N\+A\+V\+B\+\_\+\+E\+N\+D\+P\+O\+I\+N\+T\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+O\+S\+A\+L\+\_\+C}{OPENAVB_ENDPOINT_CLIENT_OSAL_C}}]{\setlength{\rightskip}{0pt plus 5cm}\#define O\+P\+E\+N\+A\+V\+B\+\_\+\+E\+N\+D\+P\+O\+I\+N\+T\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+O\+S\+A\+L\+\_\+C}\hypertarget{openavb__endpoint__client__osal_8c_a96fd819050cde6aafa91a7776030985a}{}\label{openavb__endpoint__client__osal_8c_a96fd819050cde6aafa91a7776030985a}


openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c 파일의 33 번째 라인에서 정의되었습니다.



\subsection{함수 문서화}
\index{openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c@{openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c}!openavb\+Ept\+Clnt\+Close\+Srvr\+Connection@{openavb\+Ept\+Clnt\+Close\+Srvr\+Connection}}
\index{openavb\+Ept\+Clnt\+Close\+Srvr\+Connection@{openavb\+Ept\+Clnt\+Close\+Srvr\+Connection}!openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c@{openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c}}
\subsubsection[{\texorpdfstring{openavb\+Ept\+Clnt\+Close\+Srvr\+Connection(int h)}{openavbEptClntCloseSrvrConnection(int h)}}]{\setlength{\rightskip}{0pt plus 5cm}void openavb\+Ept\+Clnt\+Close\+Srvr\+Connection (
\begin{DoxyParamCaption}
\item[{int}]{h}
\end{DoxyParamCaption}
)}\hypertarget{openavb__endpoint__client__osal_8c_ae614896dde01bc254d0fd5a6a59b0258}{}\label{openavb__endpoint__client__osal_8c_ae614896dde01bc254d0fd5a6a59b0258}


openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c 파일의 104 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
105 \{
106     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_ae556b1548b3dcb1b8d51811611bcd57e}{AVB\_TRACE\_ENDPOINT});
107     \hyperlink{openavb__endpoint__client__osal_8c_a997118c3d9b394cb957b442f0b021114}{socketClose}(h);
108     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_ae556b1548b3dcb1b8d51811611bcd57e}{AVB\_TRACE\_ENDPOINT});
109 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{openavb__endpoint__client__osal_8c_ae614896dde01bc254d0fd5a6a59b0258_cgraph}
\end{center}
\end{figure}




이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{openavb__endpoint__client__osal_8c_ae614896dde01bc254d0fd5a6a59b0258_icgraph}
\end{center}
\end{figure}


\index{openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c@{openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c}!openavb\+Ept\+Clnt\+Open\+Srvr\+Connection@{openavb\+Ept\+Clnt\+Open\+Srvr\+Connection}}
\index{openavb\+Ept\+Clnt\+Open\+Srvr\+Connection@{openavb\+Ept\+Clnt\+Open\+Srvr\+Connection}!openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c@{openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c}}
\subsubsection[{\texorpdfstring{openavb\+Ept\+Clnt\+Open\+Srvr\+Connection(tl\+\_\+state\+\_\+t $\ast$p\+T\+L\+State)}{openavbEptClntOpenSrvrConnection(tl_state_t *pTLState)}}]{\setlength{\rightskip}{0pt plus 5cm}int openavb\+Ept\+Clnt\+Open\+Srvr\+Connection (
\begin{DoxyParamCaption}
\item[{{\bf tl\+\_\+state\+\_\+t} $\ast$}]{p\+T\+L\+State}
\end{DoxyParamCaption}
)}\hypertarget{openavb__endpoint__client__osal_8c_a57bc13f9b1e43e761a648e763222c2c7}{}\label{openavb__endpoint__client__osal_8c_a57bc13f9b1e43e761a648e763222c2c7}


openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c 파일의 76 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
77 \{
78     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_ae556b1548b3dcb1b8d51811611bcd57e}{AVB\_TRACE\_ENDPOINT});
79     \textcolor{keyword}{struct }sockaddr\_un server;
80     server.sun\_family = AF\_UNIX;
81     snprintf(server.sun\_path, UNIX\_PATH\_MAX, \hyperlink{openavb__endpoint_8h_ab48bf88bc30656f89729aad0993c692e}{AVB\_ENDPOINT\_UNIX\_PATH});
82 
83     \textcolor{keywordtype}{int} h = socket(AF\_UNIX, SOCK\_STREAM, 0);
84     \textcolor{keywordflow}{if} (h < 0) \{
85         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_afcf1f0c1d10ae9efe3782eb6cae78355}{AVB\_LOGF\_DEBUG}(\textcolor{stringliteral}{"Failed to open socket: %s"}, strerror(errno));
86         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_ae556b1548b3dcb1b8d51811611bcd57e}{AVB\_TRACE\_ENDPOINT});
87         \textcolor{keywordflow}{return} \hyperlink{openavb__endpoint_8h_a47f5b9bb6606fa543966788137fee02a}{AVB\_ENDPOINT\_HANDLE\_INVALID};
88     \}
89 
90     \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_afcf1f0c1d10ae9efe3782eb6cae78355}{AVB\_LOGF\_DEBUG}(\textcolor{stringliteral}{"Connecting to %s"}, server.sun\_path);
91     \textcolor{keywordtype}{int} rslt = connect(h, (\textcolor{keyword}{struct} sockaddr*)&server, \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} sockaddr\_un));
92     \textcolor{keywordflow}{if} (rslt < 0) \{
93         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_afcf1f0c1d10ae9efe3782eb6cae78355}{AVB\_LOGF\_DEBUG}(\textcolor{stringliteral}{"Failed to connect socket: %s"}, strerror(errno));
94         \hyperlink{openavb__endpoint__client__osal_8c_a997118c3d9b394cb957b442f0b021114}{socketClose}(h);
95         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_ae556b1548b3dcb1b8d51811611bcd57e}{AVB\_TRACE\_ENDPOINT});
96         \textcolor{keywordflow}{return} \hyperlink{openavb__endpoint_8h_a47f5b9bb6606fa543966788137fee02a}{AVB\_ENDPOINT\_HANDLE\_INVALID};
97     \}
98 
99     \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a28a4d0350d530ad95c95b8383c00cd9c}{AVB\_LOG\_DEBUG}(\textcolor{stringliteral}{"Connected to endpoint"});
100     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_ae556b1548b3dcb1b8d51811611bcd57e}{AVB\_TRACE\_ENDPOINT});
101     \textcolor{keywordflow}{return} h;
102 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{openavb__endpoint__client__osal_8c_a57bc13f9b1e43e761a648e763222c2c7_cgraph}
\end{center}
\end{figure}




이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{openavb__endpoint__client__osal_8c_a57bc13f9b1e43e761a648e763222c2c7_icgraph}
\end{center}
\end{figure}


\index{openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c@{openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c}!openavb\+Ept\+Clnt\+Send\+To\+Server@{openavb\+Ept\+Clnt\+Send\+To\+Server}}
\index{openavb\+Ept\+Clnt\+Send\+To\+Server@{openavb\+Ept\+Clnt\+Send\+To\+Server}!openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c@{openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c}}
\subsubsection[{\texorpdfstring{openavb\+Ept\+Clnt\+Send\+To\+Server(int h, openavb\+Endpoint\+Message\+\_\+t $\ast$msg)}{openavbEptClntSendToServer(int h, openavbEndpointMessage_t *msg)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf bool} openavb\+Ept\+Clnt\+Send\+To\+Server (
\begin{DoxyParamCaption}
\item[{int}]{h, }
\item[{{\bf openavb\+Endpoint\+Message\+\_\+t} $\ast$}]{msg}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{openavb__endpoint__client__osal_8c_a5d009d32a5183e5ef658073607044134}{}\label{openavb__endpoint__client__osal_8c_a5d009d32a5183e5ef658073607044134}


openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c 파일의 44 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
45 \{
46     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_ae556b1548b3dcb1b8d51811611bcd57e}{AVB\_TRACE\_ENDPOINT});
47 
48     \textcolor{keywordflow}{if} (!msg || h == \hyperlink{openavb__endpoint_8h_a47f5b9bb6606fa543966788137fee02a}{AVB\_ENDPOINT\_HANDLE\_INVALID}) \{
49         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Client send: invalid argument passed"});
50         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_ae556b1548b3dcb1b8d51811611bcd57e}{AVB\_TRACE\_ENDPOINT});
51         \textcolor{keywordflow}{return} \hyperlink{maap__log_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
52     \}
53 
54     ssize\_t nWrite = write(h, msg, \hyperlink{openavb__endpoint_8h_a9b0d07d9793de5e3bb74858c5067306a}{OPENAVB\_ENDPOINT\_MSG\_LEN});
55     \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a6a12c45e5eafd615acb82399ffff16c7}{AVB\_LOGF\_VERBOSE}(\textcolor{stringliteral}{"Sent message, len=%zu, nWrite=%zu"}, 
      \hyperlink{openavb__endpoint_8h_a9b0d07d9793de5e3bb74858c5067306a}{OPENAVB\_ENDPOINT\_MSG\_LEN}, nWrite);
56 
57     \textcolor{keywordflow}{if} (nWrite < \hyperlink{openavb__endpoint_8h_a9b0d07d9793de5e3bb74858c5067306a}{OPENAVB\_ENDPOINT\_MSG\_LEN}) \{
58         \textcolor{keywordflow}{if} (nWrite < 0) \{
59             \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a7965828e6f132ce789a962b917519e24}{AVB\_LOGF\_ERROR}(\textcolor{stringliteral}{"Client failed to write socket: %s"}, strerror(errno));
60         \}
61         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (nWrite == 0) \{
62             \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Client send: socket closed unexpectedly"});
63         \}
64         \textcolor{keywordflow}{else} \{
65             \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Client send: short write"});
66         \}
67         \hyperlink{openavb__endpoint__client__osal_8c_a997118c3d9b394cb957b442f0b021114}{socketClose}(h);
68         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_ae556b1548b3dcb1b8d51811611bcd57e}{AVB\_TRACE\_ENDPOINT});
69         \textcolor{keywordflow}{return} \hyperlink{maap__log_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
70     \}
71 
72     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_ae556b1548b3dcb1b8d51811611bcd57e}{AVB\_TRACE\_ENDPOINT});
73     \textcolor{keywordflow}{return} \hyperlink{maap__log_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
74 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=336pt]{openavb__endpoint__client__osal_8c_a5d009d32a5183e5ef658073607044134_cgraph}
\end{center}
\end{figure}




이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{openavb__endpoint__client__osal_8c_a5d009d32a5183e5ef658073607044134_icgraph}
\end{center}
\end{figure}


\index{openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c@{openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c}!openavb\+Ept\+Clnt\+Service@{openavb\+Ept\+Clnt\+Service}}
\index{openavb\+Ept\+Clnt\+Service@{openavb\+Ept\+Clnt\+Service}!openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c@{openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c}}
\subsubsection[{\texorpdfstring{openavb\+Ept\+Clnt\+Service(int h, int timeout)}{openavbEptClntService(int h, int timeout)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} openavb\+Ept\+Clnt\+Service (
\begin{DoxyParamCaption}
\item[{int}]{h, }
\item[{int}]{timeout}
\end{DoxyParamCaption}
)}\hypertarget{openavb__endpoint__client__osal_8c_a04a97a5b51065f7ce1f99c1dcb891f52}{}\label{openavb__endpoint__client__osal_8c_a04a97a5b51065f7ce1f99c1dcb891f52}


openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c 파일의 111 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
112 \{
113     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_ae556b1548b3dcb1b8d51811611bcd57e}{AVB\_TRACE\_ENDPOINT});
114     \textcolor{keywordtype}{bool} rc = \hyperlink{maap__log_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
115 
116     \textcolor{keywordflow}{if} (h == \hyperlink{openavb__endpoint_8h_a47f5b9bb6606fa543966788137fee02a}{AVB\_ENDPOINT\_HANDLE\_INVALID}) \{
117         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Client service: invalid socket"});
118         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_ae556b1548b3dcb1b8d51811611bcd57e}{AVB\_TRACE\_ENDPOINT});
119         \textcolor{keywordflow}{return} \hyperlink{maap__log_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
120     \}
121     
122     \textcolor{keyword}{struct }pollfd \hyperlink{openavb__avdecc__msg__server__osal_8c_ae18b289099c8c9be5f76acee6311699a}{fds}[1];
123     memset(\hyperlink{openavb__avdecc__msg__server__osal_8c_ae18b289099c8c9be5f76acee6311699a}{fds}, 0, \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} pollfd));
124     \hyperlink{openavb__avdecc__msg__server__osal_8c_ae18b289099c8c9be5f76acee6311699a}{fds}[0].fd = h;
125     \hyperlink{openavb__avdecc__msg__server__osal_8c_ae18b289099c8c9be5f76acee6311699a}{fds}[0].events = POLLIN;
126 
127     \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a5579be334577e5c29b8794e8f2831ce5}{AVB\_LOG\_VERBOSE}(\textcolor{stringliteral}{"Waiting for event..."});
128     \textcolor{keywordtype}{int} pRet = poll(\hyperlink{openavb__avdecc__msg__server__osal_8c_ae18b289099c8c9be5f76acee6311699a}{fds}, 1, \hyperlink{aaf-listener_8c_a869c60cb165af7b6177060c00c5c416c}{timeout});
129 
130     \textcolor{keywordflow}{if} (pRet == 0) \{
131         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a5579be334577e5c29b8794e8f2831ce5}{AVB\_LOG\_VERBOSE}(\textcolor{stringliteral}{"Poll timeout"});
132         \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_ae556b1548b3dcb1b8d51811611bcd57e}{AVB\_TRACE\_ENDPOINT});
133         \textcolor{keywordflow}{return} \hyperlink{maap__log_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
134     \}
135     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (pRet < 0) \{
136         \textcolor{keywordflow}{if} (errno == EINTR) \{
137             \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a5579be334577e5c29b8794e8f2831ce5}{AVB\_LOG\_VERBOSE}(\textcolor{stringliteral}{"Poll interrupted"});
138             \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_ae556b1548b3dcb1b8d51811611bcd57e}{AVB\_TRACE\_ENDPOINT});
139             \textcolor{keywordflow}{return} \hyperlink{maap__log_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
140         \}
141         \textcolor{keywordflow}{else} \{
142             \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a7965828e6f132ce789a962b917519e24}{AVB\_LOGF\_ERROR}(\textcolor{stringliteral}{"Poll error: %s"}, strerror(errno));
143         \}
144     \}
145     \textcolor{keywordflow}{else} \{
146         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_afcf1f0c1d10ae9efe3782eb6cae78355}{AVB\_LOGF\_DEBUG}(\textcolor{stringliteral}{"Poll returned %d events"}, pRet);
147         \textcolor{comment}{// only one fd, so it's readable.}
148         \hyperlink{structopenavb_endpoint_message__t}{openavbEndpointMessage\_t} msgBuf;
149         memset(&msgBuf, 0, \hyperlink{openavb__endpoint_8h_a9b0d07d9793de5e3bb74858c5067306a}{OPENAVB\_ENDPOINT\_MSG\_LEN});
150         ssize\_t nRead = read(h, &msgBuf, \hyperlink{openavb__endpoint_8h_a9b0d07d9793de5e3bb74858c5067306a}{OPENAVB\_ENDPOINT\_MSG\_LEN});
151                     
152         \textcolor{keywordflow}{if} (nRead < \hyperlink{openavb__endpoint_8h_a9b0d07d9793de5e3bb74858c5067306a}{OPENAVB\_ENDPOINT\_MSG\_LEN}) \{
153             \textcolor{comment}{// sock closed}
154             \textcolor{keywordflow}{if} (nRead == 0) \{
155                 \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Socket closed unexpectedly"});
156             \}
157             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (nRead < 0) \{
158                 \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a7965828e6f132ce789a962b917519e24}{AVB\_LOGF\_ERROR}(\textcolor{stringliteral}{"Socket read error: %s"}, strerror(errno));
159             \}
160             \textcolor{keywordflow}{else} \{
161                 \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Socket read to short"});
162             \}
163             \hyperlink{openavb__endpoint__client__osal_8c_a997118c3d9b394cb957b442f0b021114}{socketClose}(h);
164         \}
165         \textcolor{keywordflow}{else} \{
166             \textcolor{comment}{// got a message}
167             \textcolor{keywordflow}{if} (\hyperlink{openavb__endpoint__client_8c_a54517b06c73820ec92a7a93f1477be1e}{openavbEptClntReceiveFromServer}(h, &msgBuf)) \{
168                 rc = \hyperlink{maap__log_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
169             \}
170             \textcolor{keywordflow}{else} \{
171                 \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Invalid message received"});
172                 \hyperlink{openavb__endpoint__client__osal_8c_a997118c3d9b394cb957b442f0b021114}{socketClose}(h);
173             \}
174         \}
175     \}
176     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_ae556b1548b3dcb1b8d51811611bcd57e}{AVB\_TRACE\_ENDPOINT});
177     \textcolor{keywordflow}{return} rc;
178 \}
\end{DoxyCode}
\index{openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c@{openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c}!socket\+Close@{socket\+Close}}
\index{socket\+Close@{socket\+Close}!openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c@{openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c}}
\subsubsection[{\texorpdfstring{socket\+Close(int h)}{socketClose(int h)}}]{\setlength{\rightskip}{0pt plus 5cm}static void socket\+Close (
\begin{DoxyParamCaption}
\item[{int}]{h}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{openavb__endpoint__client__osal_8c_a997118c3d9b394cb957b442f0b021114}{}\label{openavb__endpoint__client__osal_8c_a997118c3d9b394cb957b442f0b021114}


openavb\+\_\+endpoint\+\_\+client\+\_\+osal.\+c 파일의 35 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
36 \{
37     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_ae556b1548b3dcb1b8d51811611bcd57e}{AVB\_TRACE\_ENDPOINT});
38     \textcolor{keywordflow}{if} (h != \hyperlink{openavb__endpoint_8h_a47f5b9bb6606fa543966788137fee02a}{AVB\_ENDPOINT\_HANDLE\_INVALID}) \{
39         close(h);
40     \}
41     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_ae556b1548b3dcb1b8d51811611bcd57e}{AVB\_TRACE\_ENDPOINT});
42 \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{openavb__endpoint__client__osal_8c_a997118c3d9b394cb957b442f0b021114_icgraph}
\end{center}
\end{figure}


