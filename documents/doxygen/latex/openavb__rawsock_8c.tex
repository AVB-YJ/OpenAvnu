\hypertarget{openavb__rawsock_8c}{}\section{lib/avtp\+\_\+pipeline/platform/\+Linux/rawsock/openavb\+\_\+rawsock.c 파일 참조}
\label{openavb__rawsock_8c}\index{lib/avtp\+\_\+pipeline/platform/\+Linux/rawsock/openavb\+\_\+rawsock.\+c@{lib/avtp\+\_\+pipeline/platform/\+Linux/rawsock/openavb\+\_\+rawsock.\+c}}
{\ttfamily \#include \char`\"{}sendmmsg\+\_\+rawsock.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}simple\+\_\+rawsock.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ring\+\_\+rawsock.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}openavb\+\_\+rawsock.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}openavb\+\_\+trace.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}openavb\+\_\+log.\+h\char`\"{}}\\*
{\ttfamily \#include $<$malloc.\+h$>$}\\*
openavb\+\_\+rawsock.\+c에 대한 include 의존 그래프
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{openavb__rawsock_8c__incl}
\end{center}
\end{figure}
\subsection*{매크로}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{openavb__rawsock_8c_abcfb21b6495585fe36058f57a9fe58fc}{A\+V\+B\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+NT}~\char`\"{}Raw Socket\char`\"{}
\end{DoxyCompactItemize}
\subsection*{함수}
\begin{DoxyCompactItemize}
\item 
\hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{openavb__rawsock_8c_a6f18910848a4522f50c59b32a8fc3213}{openavb\+Check\+Interface} (const char $\ast$ifname\+\_\+uri, \hyperlink{structif__info__t}{if\+\_\+info\+\_\+t} $\ast$info)
\item 
void $\ast$ \hyperlink{openavb__rawsock_8c_a51a8d60253a8bab7c193b36bf743d12f}{openavb\+Rawsock\+Open} (const char $\ast$ifname\+\_\+uri, \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} rx\+\_\+mode, \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} tx\+\_\+mode, \hyperlink{openavb__types__base__pub_8h_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16} \hyperlink{rawsock__tx_8c_af3d6d4ec5b93edfddc9de51233ae9f7e}{ethertype}, \hyperlink{openavb__types__base__pub_8h_a696390429f2f3b644bde8d0322a24124}{U32} \hyperlink{gstavbsink_8c_ad662aa56c1696f09c0ac6b97abafac6d}{frame\+\_\+size}, \hyperlink{openavb__types__base__pub_8h_a696390429f2f3b644bde8d0322a24124}{U32} num\+\_\+frames)
\end{DoxyCompactItemize}


\subsection{매크로 문서화}
\index{openavb\+\_\+rawsock.\+c@{openavb\+\_\+rawsock.\+c}!A\+V\+B\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+NT@{A\+V\+B\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+NT}}
\index{A\+V\+B\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+NT@{A\+V\+B\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+NT}!openavb\+\_\+rawsock.\+c@{openavb\+\_\+rawsock.\+c}}
\subsubsection[{\texorpdfstring{A\+V\+B\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+NT}{AVB_LOG_COMPONENT}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+V\+B\+\_\+\+L\+O\+G\+\_\+\+C\+O\+M\+P\+O\+N\+E\+NT~\char`\"{}Raw Socket\char`\"{}}\hypertarget{openavb__rawsock_8c_abcfb21b6495585fe36058f57a9fe58fc}{}\label{openavb__rawsock_8c_abcfb21b6495585fe36058f57a9fe58fc}


openavb\+\_\+rawsock.\+c 파일의 46 번째 라인에서 정의되었습니다.



\subsection{함수 문서화}
\index{openavb\+\_\+rawsock.\+c@{openavb\+\_\+rawsock.\+c}!openavb\+Check\+Interface@{openavb\+Check\+Interface}}
\index{openavb\+Check\+Interface@{openavb\+Check\+Interface}!openavb\+\_\+rawsock.\+c@{openavb\+\_\+rawsock.\+c}}
\subsubsection[{\texorpdfstring{openavb\+Check\+Interface(const char $\ast$ifname\+\_\+uri, if\+\_\+info\+\_\+t $\ast$info)}{openavbCheckInterface(const char *ifname_uri, if_info_t *info)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} openavb\+Check\+Interface (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{ifname\+\_\+uri, }
\item[{{\bf if\+\_\+info\+\_\+t} $\ast$}]{info}
\end{DoxyParamCaption}
)}\hypertarget{openavb__rawsock_8c_a6f18910848a4522f50c59b32a8fc3213}{}\label{openavb__rawsock_8c_a6f18910848a4522f50c59b32a8fc3213}


openavb\+\_\+rawsock.\+c 파일의 53 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
54 \{
55     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
56 
57     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* \hyperlink{aaf-talker_8c_ac7b430acaa92a7a26fbcdad47d2efc20}{ifname} = ifname\_uri;
58     \textcolor{keywordtype}{char} proto[IF\_NAMESIZE] = \{0\};
59     \textcolor{keywordtype}{char} *colon = strchr(ifname\_uri, \textcolor{charliteral}{':'});
60     \textcolor{keywordflow}{if} (colon) \{
61         ifname = colon + 1;
62         strncpy(proto, ifname\_uri, colon - ifname\_uri);
63     \}
64 
65     \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_afcf1f0c1d10ae9efe3782eb6cae78355}{AVB\_LOGF\_DEBUG}(\textcolor{stringliteral}{"%s ifname\_uri %s ifname %s proto %s"}, \_\_func\_\_, ifname\_uri, ifname, proto
      );
66 
67     \textcolor{keywordtype}{bool} ret = \hyperlink{simple__rawsock_8c_a4a74553012375bcbfc02684b3381f183}{simpleAvbCheckInterface}(ifname, info);
68 
69     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
70     \textcolor{keywordflow}{return} ret;
71 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{openavb__rawsock_8c_a6f18910848a4522f50c59b32a8fc3213_cgraph}
\end{center}
\end{figure}




이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{openavb__rawsock_8c_a6f18910848a4522f50c59b32a8fc3213_icgraph}
\end{center}
\end{figure}


\index{openavb\+\_\+rawsock.\+c@{openavb\+\_\+rawsock.\+c}!openavb\+Rawsock\+Open@{openavb\+Rawsock\+Open}}
\index{openavb\+Rawsock\+Open@{openavb\+Rawsock\+Open}!openavb\+\_\+rawsock.\+c@{openavb\+\_\+rawsock.\+c}}
\subsubsection[{\texorpdfstring{openavb\+Rawsock\+Open(const char $\ast$ifname\+\_\+uri, bool rx\+\_\+mode, bool tx\+\_\+mode, U16 ethertype, U32 frame\+\_\+size, U32 num\+\_\+frames)}{openavbRawsockOpen(const char *ifname_uri, bool rx_mode, bool tx_mode, U16 ethertype, U32 frame_size, U32 num_frames)}}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ openavb\+Rawsock\+Open (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{ifname\+\_\+uri, }
\item[{{\bf bool}}]{rx\+\_\+mode, }
\item[{{\bf bool}}]{tx\+\_\+mode, }
\item[{{\bf U16}}]{ethertype, }
\item[{{\bf U32}}]{frame\+\_\+size, }
\item[{{\bf U32}}]{num\+\_\+frames}
\end{DoxyParamCaption}
)}\hypertarget{openavb__rawsock_8c_a51a8d60253a8bab7c193b36bf743d12f}{}\label{openavb__rawsock_8c_a51a8d60253a8bab7c193b36bf743d12f}


openavb\+\_\+rawsock.\+c 파일의 74 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
75 \{
76     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_ab2bfc814f0447a6d975e8332be197b85}{AVB\_TRACE\_ENTRY}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
77 
78     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* \hyperlink{aaf-talker_8c_ac7b430acaa92a7a26fbcdad47d2efc20}{ifname} = ifname\_uri;
79 \textcolor{preprocessor}{#if AVB\_FEATURE\_PCAP}
80 \textcolor{preprocessor}{#if AVB\_FEATURE\_IGB}
81     \textcolor{keywordtype}{char} proto[IF\_NAMESIZE] = \textcolor{stringliteral}{"igb"};
82 \textcolor{preprocessor}{#else}
83     \textcolor{keywordtype}{char} proto[IF\_NAMESIZE] = \textcolor{stringliteral}{"pcap"};
84 \textcolor{preprocessor}{#endif}
85 \textcolor{preprocessor}{#else}
86     \textcolor{keywordtype}{char} proto[IF\_NAMESIZE] = \textcolor{stringliteral}{"simple"};
87 \textcolor{preprocessor}{#endif}
88 
89     \textcolor{keywordtype}{char} *colon = strchr(ifname\_uri, \textcolor{charliteral}{':'});
90     \textcolor{keywordflow}{if} (colon) \{
91         ifname = colon + 1;
92         strncpy(proto, ifname\_uri, colon - ifname\_uri);
93         proto[colon - ifname\_uri] = \textcolor{charliteral}{'\(\backslash\)0'};
94     \}
95 
96     \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_afcf1f0c1d10ae9efe3782eb6cae78355}{AVB\_LOGF\_DEBUG}(\textcolor{stringliteral}{"%s ifname\_uri %s ifname %s proto %s"}, \_\_func\_\_, ifname\_uri, ifname, proto
      );
97 
98     \textcolor{keywordtype}{void} *pvRawsock = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
99 
100     \textcolor{keywordflow}{if} (strcmp(proto, \textcolor{stringliteral}{"ring"}) == 0) \{
101 
102         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_afd47d3bbb5f5219dd0a18ebba4ba9b3e}{AVB\_LOG\_INFO}(\textcolor{stringliteral}{"Using *ring* buffer implementation"});
103 
104         \textcolor{comment}{// allocate memory for rawsock object}
105         \hyperlink{structring__rawsock__t}{ring\_rawsock\_t} *rawsock = \hyperlink{_memory_leak_detector_malloc_macros_8h_a7cbb7b79af9d539af55b59dfc3598390}{calloc}(1, \textcolor{keyword}{sizeof}(
      \hyperlink{structring__rawsock__t}{ring\_rawsock\_t}));
106         \textcolor{keywordflow}{if} (!rawsock) \{
107             \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Creating rawsock; malloc failed"});
108             \textcolor{keywordflow}{return} \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
109         \}
110 
111         \textcolor{comment}{// call constructor}
112         pvRawsock = \hyperlink{ring__rawsock_8c_a8c3c41f38f4b4099b092efd78af768f7}{ringRawsockOpen}(rawsock, ifname, rx\_mode, tx\_mode, 
      \hyperlink{avtp__rx_8c_af3d6d4ec5b93edfddc9de51233ae9f7e}{ethertype}, \hyperlink{gstavbsink_8c_ad662aa56c1696f09c0ac6b97abafac6d}{frame\_size}, num\_frames);
113 
114     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (strcmp(proto, \textcolor{stringliteral}{"simple"}) == 0) \{
115 
116         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_afd47d3bbb5f5219dd0a18ebba4ba9b3e}{AVB\_LOG\_INFO}(\textcolor{stringliteral}{"Using *simple* implementation"});
117 
118         \textcolor{comment}{// allocate memory for rawsock object}
119         \hyperlink{structsimple__rawsock__t}{simple\_rawsock\_t} *rawsock = \hyperlink{_memory_leak_detector_malloc_macros_8h_a7cbb7b79af9d539af55b59dfc3598390}{calloc}(1, \textcolor{keyword}{sizeof}(
      \hyperlink{structsimple__rawsock__t}{simple\_rawsock\_t}) + 4 \textcolor{comment}{/* Just in case */});
120         \textcolor{keywordflow}{if} (!rawsock) \{
121             \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Creating rawsock; malloc failed"});
122             \textcolor{keywordflow}{return} \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
123         \}
124 
125         \textcolor{comment}{// call constructor}
126         pvRawsock = \hyperlink{simple__rawsock_8c_a3791f04c920de1731e2c08b009e30fdd}{simpleRawsockOpen}(rawsock, ifname, rx\_mode, tx\_mode, 
      \hyperlink{avtp__rx_8c_af3d6d4ec5b93edfddc9de51233ae9f7e}{ethertype}, \hyperlink{gstavbsink_8c_ad662aa56c1696f09c0ac6b97abafac6d}{frame\_size}, num\_frames);
127     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (strcmp(proto, \textcolor{stringliteral}{"sendmmsg"}) == 0) \{
128 
129         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_afd47d3bbb5f5219dd0a18ebba4ba9b3e}{AVB\_LOG\_INFO}(\textcolor{stringliteral}{"Using *sendmmsg* implementation"});
130 
131         \textcolor{comment}{// allocate memory for rawsock object}
132         \hyperlink{structsendmmsg__rawsock__t}{sendmmsg\_rawsock\_t} *rawsock = \hyperlink{_memory_leak_detector_malloc_macros_8h_a7cbb7b79af9d539af55b59dfc3598390}{calloc}(1, \textcolor{keyword}{sizeof}(
      \hyperlink{structsendmmsg__rawsock__t}{sendmmsg\_rawsock\_t}));
133         \textcolor{keywordflow}{if} (!rawsock) \{
134             \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Creating rawsock; malloc failed"});
135             \textcolor{keywordflow}{return} \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
136         \}
137 
138         \textcolor{comment}{// call constructor}
139         pvRawsock = \hyperlink{sendmmsg__rawsock_8c_abc3aad8ba3050f276a72877f94eff882}{sendmmsgRawsockOpen}(rawsock, ifname, rx\_mode, tx\_mode, 
      \hyperlink{avtp__rx_8c_af3d6d4ec5b93edfddc9de51233ae9f7e}{ethertype}, \hyperlink{gstavbsink_8c_ad662aa56c1696f09c0ac6b97abafac6d}{frame\_size}, num\_frames);
140 \textcolor{preprocessor}{#if AVB\_FEATURE\_PCAP}
141     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (strcmp(proto, \textcolor{stringliteral}{"pcap"}) == 0) \{
142 
143         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_afd47d3bbb5f5219dd0a18ebba4ba9b3e}{AVB\_LOG\_INFO}(\textcolor{stringliteral}{"Using *pcap* implementation"});
144 
145         \textcolor{comment}{// allocate memory for rawsock object}
146         \hyperlink{structpcap__rawsock__t}{pcap\_rawsock\_t} *rawsock = \hyperlink{_memory_leak_detector_malloc_macros_8h_a7cbb7b79af9d539af55b59dfc3598390}{calloc}(1, \textcolor{keyword}{sizeof}(
      \hyperlink{structpcap__rawsock__t}{pcap\_rawsock\_t}));
147         \textcolor{keywordflow}{if} (!rawsock) \{
148             \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Creating rawsock; malloc failed"});
149             \textcolor{keywordflow}{return} \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
150         \}
151 
152         \textcolor{comment}{// call constructor}
153         pvRawsock = \hyperlink{pcap__rawsock_8c_a0a8ccb76a50b33b62200d25875baf6f2}{pcapRawsockOpen}(rawsock, ifname, rx\_mode, tx\_mode, 
      \hyperlink{avtp__rx_8c_af3d6d4ec5b93edfddc9de51233ae9f7e}{ethertype}, \hyperlink{gstavbsink_8c_ad662aa56c1696f09c0ac6b97abafac6d}{frame\_size}, num\_frames);
154 \textcolor{preprocessor}{#if AVB\_FEATURE\_IGB}
155     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (strcmp(proto, \textcolor{stringliteral}{"igb"}) == 0) \{
156 
157         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_afd47d3bbb5f5219dd0a18ebba4ba9b3e}{AVB\_LOG\_INFO}(\textcolor{stringliteral}{"Using *igb* implementation"});
158 
159         \textcolor{comment}{// allocate memory for rawsock object}
160         \hyperlink{structigb__rawsock__t}{igb\_rawsock\_t} *rawsock = \hyperlink{_memory_leak_detector_malloc_macros_8h_a7cbb7b79af9d539af55b59dfc3598390}{calloc}(1, \textcolor{keyword}{sizeof}(
      \hyperlink{structigb__rawsock__t}{igb\_rawsock\_t}));
161         \textcolor{keywordflow}{if} (!rawsock) \{
162             \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_ac8495212c30dbf627b5ae3a9f01f4e2a}{AVB\_LOG\_ERROR}(\textcolor{stringliteral}{"Creating rawsock; malloc failed"});
163             \textcolor{keywordflow}{return} \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
164         \}
165 
166         \textcolor{comment}{// call constructor}
167         pvRawsock = \hyperlink{igb__rawsock_8c_a8b4deaab8f7db94c439b103df97567f2}{igbRawsockOpen}((\hyperlink{structigb__rawsock__t}{igb\_rawsock\_t}*)rawsock, ifname, rx\_mode, 
      tx\_mode, \hyperlink{avtp__rx_8c_af3d6d4ec5b93edfddc9de51233ae9f7e}{ethertype}, \hyperlink{gstavbsink_8c_ad662aa56c1696f09c0ac6b97abafac6d}{frame\_size}, num\_frames);
168 \textcolor{preprocessor}{#endif}
169 \textcolor{preprocessor}{#endif}
170     \} \textcolor{keywordflow}{else} \{
171         \hyperlink{build_2sdk__eavb_2openavb__log__pub_8h_a7965828e6f132ce789a962b917519e24}{AVB\_LOGF\_ERROR}(\textcolor{stringliteral}{"Unknown proto %s specified."}, proto);
172     \}
173 
174     \hyperlink{build_2sdk__eavb_2openavb__trace__pub_8h_a0906ddd9e84cc650a76634fe8ff766d7}{AVB\_TRACE\_EXIT}(\hyperlink{openavb__trace_8h_a8fb2c92eb64f80cb2ecb22d129df5a95}{AVB\_TRACE\_RAWSOCK});
175     \textcolor{keywordflow}{return} pvRawsock;
176 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{openavb__rawsock_8c_a51a8d60253a8bab7c193b36bf743d12f_cgraph}
\end{center}
\end{figure}




이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{openavb__rawsock_8c_a51a8d60253a8bab7c193b36bf743d12f_icgraph}
\end{center}
\end{figure}


