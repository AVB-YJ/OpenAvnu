\hypertarget{class_linux_network_interface}{}\section{Linux\+Network\+Interface 클래스 참조}
\label{class_linux_network_interface}\index{Linux\+Network\+Interface@{Linux\+Network\+Interface}}


Provides a Linux network generic interface.  




{\ttfamily \#include $<$linux\+\_\+hal\+\_\+common.\+hpp$>$}



Linux\+Network\+Interface에 대한 상속 다이어그램 \+: 
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=220pt]{class_linux_network_interface__inherit__graph}
\end{center}
\end{figure}


Linux\+Network\+Interface에 대한 협력 다이어그램\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_linux_network_interface__coll__graph}
\end{center}
\end{figure}
\subsection*{Public 멤버 함수}
\begin{DoxyCompactItemize}
\item 
virtual \hyperlink{avbts__osnet_8hpp_a21b2b4b5e479ef3adfc039ac30c961cd}{net\+\_\+result} \hyperlink{class_linux_network_interface_a16eac0643a26a66fa2b664d4db5d3e42}{send} (\hyperlink{class_link_layer_address}{Link\+Layer\+Address} $\ast$addr, uint16\+\_\+t ether\+Type, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$payload, size\+\_\+t length, \hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} timestamp)
\begin{DoxyCompactList}\small\item\em Sends a packet to a remote address. \end{DoxyCompactList}\item 
virtual \hyperlink{avbts__osnet_8hpp_a21b2b4b5e479ef3adfc039ac30c961cd}{net\+\_\+result} \hyperlink{class_linux_network_interface_acb980fe584d47a71be88f12808edd91c}{nrecv} (\hyperlink{class_link_layer_address}{Link\+Layer\+Address} $\ast$addr, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$payload, size\+\_\+t \&length)
\begin{DoxyCompactList}\small\item\em Receives a packet from a remote address. \end{DoxyCompactList}\item 
void \hyperlink{class_linux_network_interface_aea47eda14c7a467ec4c4796ff1edf7cb}{disable\+\_\+rx\+\_\+queue} ()
\begin{DoxyCompactList}\small\item\em Disables rx socket descriptor rx queue. \end{DoxyCompactList}\item 
void \hyperlink{class_linux_network_interface_ab9f0254cefe0a8d35dcd300a3de79bac}{clear\+\_\+reenable\+\_\+rx\+\_\+queue} ()
\begin{DoxyCompactList}\small\item\em Clears and enables the rx socket descriptor. \end{DoxyCompactList}\item 
virtual void \hyperlink{class_linux_network_interface_acf4cbb5b708d3feb8e970da49d853fae}{get\+Link\+Layer\+Address} (\hyperlink{class_link_layer_address}{Link\+Layer\+Address} $\ast$addr)
\begin{DoxyCompactList}\small\item\em Gets the local link layer address. \end{DoxyCompactList}\item 
\hyperlink{avb__gptp_8h_af6a258d8f3ee5206d682d799316314b1}{bool} \hyperlink{class_linux_network_interface_a5c60a048f947174b7a53a9a7253800b5}{get\+Link\+Speed} (int sd, \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\+\_\+t} $\ast$speed)
\begin{DoxyCompactList}\small\item\em Get speed of network link. \end{DoxyCompactList}\item 
virtual void \hyperlink{class_linux_network_interface_a2d20b70884c94962cd11bd51d92617b4}{watch\+Net\+Link} (\hyperlink{class_common_port}{Common\+Port} $\ast$\hyperlink{linux_2src_2daemon__cl_8cpp_aca059781ed4d0e5fca3b46246d5c5ad3}{p\+Port})
\begin{DoxyCompactList}\small\item\em Watch for net link changes. \end{DoxyCompactList}\item 
virtual unsigned \hyperlink{class_linux_network_interface_a469ba253e35431e728100188397d9d02}{get\+Payload\+Offset} ()
\begin{DoxyCompactList}\small\item\em Gets the payload offset. \end{DoxyCompactList}\item 
\hyperlink{class_linux_network_interface_ab2f5b4dbafcf607004b3ab710d32ac61}{$\sim$\+Linux\+Network\+Interface} ()
\begin{DoxyCompactList}\small\item\em Destroys the network interface. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected 멤버 함수}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_linux_network_interface_ae481d5766c300e764878a69011dea800}{Linux\+Network\+Interface} ()
\begin{DoxyCompactList}\small\item\em Default constructor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private 속성}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_link_layer_address}{Link\+Layer\+Address} \hyperlink{class_linux_network_interface_af3d1546f688fbb9cec0317d152cab1da}{local\+\_\+addr}
\item 
int \hyperlink{class_linux_network_interface_ab2e41169dafb40e1ab917422a2d1145a}{sd\+\_\+event}
\item 
int \hyperlink{class_linux_network_interface_a4dac986db2725a7381738a799374da65}{sd\+\_\+general}
\item 
\hyperlink{class_linux_timestamper}{Linux\+Timestamper} $\ast$ \hyperlink{class_linux_network_interface_a47975f2b80d6d5e6fc426813df74feeb}{timestamper}
\item 
int \hyperlink{class_linux_network_interface_a01e636f8746c84f1cf3d45c4afbfde35}{ifindex}
\item 
\hyperlink{class_ticketing_lock}{Ticketing\+Lock} \hyperlink{class_linux_network_interface_a2485d8ad81138164119a9e8b68642a1d}{net\+\_\+lock}
\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{class_linux_network_interface_af1d8dc20f87a29eb0af128366c47a247}{Linux\+Network\+Interface\+Factory}
\end{DoxyCompactItemize}


\subsection{상세한 설명}
Provides a Linux network generic interface. 

linux\+\_\+hal\+\_\+common.\+hpp 파일의 148 번째 라인에서 정의되었습니다.



\subsection{생성자 \& 소멸자 문서화}
\index{Linux\+Network\+Interface@{Linux\+Network\+Interface}!````~Linux\+Network\+Interface@{$\sim$\+Linux\+Network\+Interface}}
\index{````~Linux\+Network\+Interface@{$\sim$\+Linux\+Network\+Interface}!Linux\+Network\+Interface@{Linux\+Network\+Interface}}
\subsubsection[{\texorpdfstring{$\sim$\+Linux\+Network\+Interface()}{~LinuxNetworkInterface()}}]{\setlength{\rightskip}{0pt plus 5cm}$\sim${\bf Linux\+Network\+Interface} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{class_linux_network_interface_ab2f5b4dbafcf607004b3ab710d32ac61}{}\label{class_linux_network_interface_ab2f5b4dbafcf607004b3ab710d32ac61}


Destroys the network interface. 



linux\+\_\+hal\+\_\+common.\+cpp 파일의 81 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
81                                               \{
82     close( \hyperlink{class_linux_network_interface_ab2e41169dafb40e1ab917422a2d1145a}{sd\_event} );
83     close( \hyperlink{class_linux_network_interface_a4dac986db2725a7381738a799374da65}{sd\_general} );
84 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_linux_network_interface_ab2f5b4dbafcf607004b3ab710d32ac61_cgraph}
\end{center}
\end{figure}


\index{Linux\+Network\+Interface@{Linux\+Network\+Interface}!Linux\+Network\+Interface@{Linux\+Network\+Interface}}
\index{Linux\+Network\+Interface@{Linux\+Network\+Interface}!Linux\+Network\+Interface@{Linux\+Network\+Interface}}
\subsubsection[{\texorpdfstring{Linux\+Network\+Interface()}{LinuxNetworkInterface()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Linux\+Network\+Interface} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}\hypertarget{class_linux_network_interface_ae481d5766c300e764878a69011dea800}{}\label{class_linux_network_interface_ae481d5766c300e764878a69011dea800}


Default constructor. 



linux\+\_\+hal\+\_\+common.\+hpp 파일의 234 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
234 \{\};
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_linux_network_interface_ae481d5766c300e764878a69011dea800_icgraph}
\end{center}
\end{figure}




\subsection{멤버 함수 문서화}
\index{Linux\+Network\+Interface@{Linux\+Network\+Interface}!clear\+\_\+reenable\+\_\+rx\+\_\+queue@{clear\+\_\+reenable\+\_\+rx\+\_\+queue}}
\index{clear\+\_\+reenable\+\_\+rx\+\_\+queue@{clear\+\_\+reenable\+\_\+rx\+\_\+queue}!Linux\+Network\+Interface@{Linux\+Network\+Interface}}
\subsubsection[{\texorpdfstring{clear\+\_\+reenable\+\_\+rx\+\_\+queue()}{clear_reenable_rx_queue()}}]{\setlength{\rightskip}{0pt plus 5cm}void clear\+\_\+reenable\+\_\+rx\+\_\+queue (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{class_linux_network_interface_ab9f0254cefe0a8d35dcd300a3de79bac}{}\label{class_linux_network_interface_ab9f0254cefe0a8d35dcd300a3de79bac}


Clears and enables the rx socket descriptor. 

\begin{DoxyReturn}{반환값}
void 
\end{DoxyReturn}


linux\+\_\+hal\+\_\+common.\+cpp 파일의 146 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
146                                                     \{
147     \textcolor{keyword}{struct }packet\_mreq mr\_8021as;
148     \textcolor{keywordtype}{char} buf[256];
149     \textcolor{keywordtype}{int} \hyperlink{gst__avb__playbin_8c_a6ce68847c12434f60d1b2654a3dc3409}{err};
150 
151     \textcolor{keywordflow}{while}( recvfrom( \hyperlink{class_linux_network_interface_ab2e41169dafb40e1ab917422a2d1145a}{sd\_event}, buf, 256, MSG\_DONTWAIT, \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, 0 ) != -1 );
152 
153     memset( &mr\_8021as, 0, \textcolor{keyword}{sizeof}( mr\_8021as ));
154     mr\_8021as.mr\_ifindex = \hyperlink{class_linux_network_interface_a01e636f8746c84f1cf3d45c4afbfde35}{ifindex};
155     mr\_8021as.mr\_type = PACKET\_MR\_MULTICAST;
156     mr\_8021as.mr\_alen = 6;
157     memcpy( mr\_8021as.mr\_address, \hyperlink{linux__hal__common_8hpp_a10940df49c9c0cbf6ab33c8bf858c3b6}{P8021AS\_MULTICAST}, mr\_8021as.mr\_alen );
158     err = setsockopt
159         ( \hyperlink{class_linux_network_interface_ab2e41169dafb40e1ab917422a2d1145a}{sd\_event}, SOL\_PACKET, PACKET\_ADD\_MEMBERSHIP, &mr\_8021as,
160           \textcolor{keyword}{sizeof}( mr\_8021as ));
161     \textcolor{keywordflow}{if}( err == -1 ) \{
162         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}
163             ( \textcolor{stringliteral}{"Unable to add PTP multicast addresses to port id: %u"},
164               \hyperlink{class_linux_network_interface_a01e636f8746c84f1cf3d45c4afbfde35}{ifindex} );
165         \textcolor{keywordflow}{return};
166     \}
167 
168     \textcolor{keywordflow}{if}( !\hyperlink{class_linux_network_interface_a2485d8ad81138164119a9e8b68642a1d}{net\_lock}.\hyperlink{class_ticketing_lock_ae399421ee39cae4df5ea44bd21e31254}{unlock}() ) \{
169         fprintf( stderr, \textcolor{stringliteral}{"D failed unlock rx lock, %d\(\backslash\)n"}, err );
170     \}
171 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_linux_network_interface_ab9f0254cefe0a8d35dcd300a3de79bac_cgraph}
\end{center}
\end{figure}


\index{Linux\+Network\+Interface@{Linux\+Network\+Interface}!disable\+\_\+rx\+\_\+queue@{disable\+\_\+rx\+\_\+queue}}
\index{disable\+\_\+rx\+\_\+queue@{disable\+\_\+rx\+\_\+queue}!Linux\+Network\+Interface@{Linux\+Network\+Interface}}
\subsubsection[{\texorpdfstring{disable\+\_\+rx\+\_\+queue()}{disable_rx_queue()}}]{\setlength{\rightskip}{0pt plus 5cm}void disable\+\_\+rx\+\_\+queue (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{class_linux_network_interface_aea47eda14c7a467ec4c4796ff1edf7cb}{}\label{class_linux_network_interface_aea47eda14c7a467ec4c4796ff1edf7cb}


Disables rx socket descriptor rx queue. 

\begin{DoxyReturn}{반환값}
void 
\end{DoxyReturn}


linux\+\_\+hal\+\_\+common.\+cpp 파일의 119 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
119                                              \{
120     \textcolor{keyword}{struct }packet\_mreq mr\_8021as;
121     \textcolor{keywordtype}{int} \hyperlink{gst__avb__playbin_8c_a6ce68847c12434f60d1b2654a3dc3409}{err};
122 
123     \textcolor{keywordflow}{if}( !\hyperlink{class_linux_network_interface_a2485d8ad81138164119a9e8b68642a1d}{net\_lock}.\hyperlink{class_ticketing_lock_a27addfbd7031de7dc72d73e9e89449bd}{lock}() ) \{
124         fprintf( stderr, \textcolor{stringliteral}{"D rx lock failed\(\backslash\)n"} );
125         \_exit(0);
126     \}
127 
128     memset( &mr\_8021as, 0, \textcolor{keyword}{sizeof}( mr\_8021as ));
129     mr\_8021as.mr\_ifindex = \hyperlink{class_linux_network_interface_a01e636f8746c84f1cf3d45c4afbfde35}{ifindex};
130     mr\_8021as.mr\_type = PACKET\_MR\_MULTICAST;
131     mr\_8021as.mr\_alen = 6;
132     memcpy( mr\_8021as.mr\_address, \hyperlink{linux__hal__common_8hpp_a10940df49c9c0cbf6ab33c8bf858c3b6}{P8021AS\_MULTICAST}, mr\_8021as.mr\_alen );
133     err = setsockopt
134         ( \hyperlink{class_linux_network_interface_ab2e41169dafb40e1ab917422a2d1145a}{sd\_event}, SOL\_PACKET, PACKET\_DROP\_MEMBERSHIP, &mr\_8021as,
135           \textcolor{keyword}{sizeof}( mr\_8021as ));
136     \textcolor{keywordflow}{if}( err == -1 ) \{
137         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}
138             ( \textcolor{stringliteral}{"Unable to add PTP multicast addresses to port id: %u"},
139               \hyperlink{class_linux_network_interface_a01e636f8746c84f1cf3d45c4afbfde35}{ifindex} );
140         \textcolor{keywordflow}{return};
141     \}
142 
143     \textcolor{keywordflow}{return};
144 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=309pt]{class_linux_network_interface_aea47eda14c7a467ec4c4796ff1edf7cb_cgraph}
\end{center}
\end{figure}


\index{Linux\+Network\+Interface@{Linux\+Network\+Interface}!get\+Link\+Layer\+Address@{get\+Link\+Layer\+Address}}
\index{get\+Link\+Layer\+Address@{get\+Link\+Layer\+Address}!Linux\+Network\+Interface@{Linux\+Network\+Interface}}
\subsubsection[{\texorpdfstring{get\+Link\+Layer\+Address(\+Link\+Layer\+Address $\ast$addr)}{getLinkLayerAddress(LinkLayerAddress *addr)}}]{\setlength{\rightskip}{0pt plus 5cm}virtual void get\+Link\+Layer\+Address (
\begin{DoxyParamCaption}
\item[{{\bf Link\+Layer\+Address} $\ast$}]{addr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{class_linux_network_interface_acf4cbb5b708d3feb8e970da49d853fae}{}\label{class_linux_network_interface_acf4cbb5b708d3feb8e970da49d853fae}


Gets the local link layer address. 


\begin{DoxyParams}{매개변수}
{\em addr} & \mbox{[}out\mbox{]} Pointer to the \hyperlink{class_link_layer_address}{Link\+Layer\+Address} object \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
void 
\end{DoxyReturn}


\hyperlink{class_o_s_network_interface_afa6f02e622bb5f5f1cbf9b0b21b50fe1}{O\+S\+Network\+Interface}를 구현.



linux\+\_\+hal\+\_\+common.\+hpp 파일의 201 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
201                                                                \{
202         *addr = \hyperlink{class_linux_network_interface_af3d1546f688fbb9cec0317d152cab1da}{local\_addr};
203     \}
\end{DoxyCode}
\index{Linux\+Network\+Interface@{Linux\+Network\+Interface}!get\+Link\+Speed@{get\+Link\+Speed}}
\index{get\+Link\+Speed@{get\+Link\+Speed}!Linux\+Network\+Interface@{Linux\+Network\+Interface}}
\subsubsection[{\texorpdfstring{get\+Link\+Speed(int sd, uint32\+\_\+t $\ast$speed)}{getLinkSpeed(int sd, uint32_t *speed)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} get\+Link\+Speed (
\begin{DoxyParamCaption}
\item[{int}]{sd, }
\item[{{\bf uint32\+\_\+t} $\ast$}]{speed}
\end{DoxyParamCaption}
)}\hypertarget{class_linux_network_interface_a5c60a048f947174b7a53a9a7253800b5}{}\label{class_linux_network_interface_a5c60a048f947174b7a53a9a7253800b5}


Get speed of network link. 


\begin{DoxyParams}[1]{매개변수}
\mbox{\tt in}  & {\em sd} & Open socket descriptor \\
\hline
\mbox{\tt out}  & {\em speed} & Link speed in kb/sec \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
false on error 
\end{DoxyReturn}


linux\+\_\+hal\+\_\+common.\+cpp 파일의 261 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
262 \{
263     \textcolor{keyword}{struct }ifreq ifr;
264     \textcolor{keyword}{struct }ethtool\_cmd edata;
265 
266     ifr.ifr\_ifindex = \hyperlink{class_linux_network_interface_a01e636f8746c84f1cf3d45c4afbfde35}{ifindex};
267     \textcolor{keywordflow}{if}( ioctl( sd, SIOCGIFNAME, &ifr ) == -1 )
268     \{
269         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}
270             ( \textcolor{stringliteral}{"%s: SIOCGIFNAME failed: %s"}, \_\_PRETTY\_FUNCTION\_\_,
271               strerror( errno ));
272         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
273     \}
274 
275     ifr.ifr\_data = (\textcolor{keywordtype}{char} *) &edata;
276     edata.cmd = ETHTOOL\_GSET;
277     \textcolor{keywordflow}{if}( ioctl( sd, SIOCETHTOOL, &ifr ) == -1 )
278     \{
279         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}
280             ( \textcolor{stringliteral}{"%s: SIOCETHTOOL failed: %s"}, \_\_PRETTY\_FUNCTION\_\_,
281               strerror( errno ));
282         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
283     \}
284 
285     \textcolor{keywordflow}{switch} (ethtool\_cmd\_speed(&edata))
286     \{
287     \textcolor{keywordflow}{default}:
288         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}( \textcolor{stringliteral}{"%s: Unknown/Unsupported Speed!"},
289                 \_\_PRETTY\_FUNCTION\_\_ );
290         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
291     \textcolor{keywordflow}{case} \hyperlink{kmod_2igb_2e1000__defines_8h_a336e90e6c7a7d8bc7925752a13faf849}{SPEED\_100}:
292         *speed = \hyperlink{gptp__cfg_8hpp_ad245f9b93c7c5e8f4f5dcde5abae05f2}{LINKSPEED\_100MB};
293         \textcolor{keywordflow}{break};
294     \textcolor{keywordflow}{case} \hyperlink{kmod_2igb_2e1000__defines_8h_a4a779d35380578e71d9b3015e3441ab1}{SPEED\_1000}:
295         *speed = \hyperlink{gptp__cfg_8hpp_a42bd5d531a29e5c8a1be5ded1cf27cb3}{LINKSPEED\_1G};
296         \textcolor{keywordflow}{break};
297     \textcolor{keywordflow}{case} \hyperlink{kmod_2igb_2e1000__defines_8h_a591d4f62d20b4ae6439fc540848e6148}{SPEED\_2500}:
298         *speed = \hyperlink{gptp__cfg_8hpp_a04d7f11f48d2211749798f9ef954b535}{LINKSPEED\_2\_5G};
299         \textcolor{keywordflow}{break};
300     \textcolor{keywordflow}{case} \hyperlink{kcompat__ethtool_8c_a8faae1c4e8d606cc1edf9131252d9fbc}{SPEED\_10000}:
301         *speed = \hyperlink{gptp__cfg_8hpp_a3e9e2077d7d742e4cfd0de60f0789b0b}{LINKSPEED\_10G};
302         \textcolor{keywordflow}{break};
303     \}
304     \hyperlink{gptp__log_8hpp_a9bcf107d6f77d335b92bbc4825ea85a3}{GPTP\_LOG\_STATUS}( \textcolor{stringliteral}{"Link Speed: %d kb/sec"}, *speed );
305 
306     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
307 \}
\end{DoxyCode}


이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=269pt]{class_linux_network_interface_a5c60a048f947174b7a53a9a7253800b5_icgraph}
\end{center}
\end{figure}


\index{Linux\+Network\+Interface@{Linux\+Network\+Interface}!get\+Payload\+Offset@{get\+Payload\+Offset}}
\index{get\+Payload\+Offset@{get\+Payload\+Offset}!Linux\+Network\+Interface@{Linux\+Network\+Interface}}
\subsubsection[{\texorpdfstring{get\+Payload\+Offset()}{getPayloadOffset()}}]{\setlength{\rightskip}{0pt plus 5cm}virtual unsigned get\+Payload\+Offset (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{class_linux_network_interface_a469ba253e35431e728100188397d9d02}{}\label{class_linux_network_interface_a469ba253e35431e728100188397d9d02}


Gets the payload offset. 

\begin{DoxyReturn}{반환값}
payload offset 
\end{DoxyReturn}


\hyperlink{class_o_s_network_interface_a7a0710f80e693b0d4008d8501aaffcdc}{O\+S\+Network\+Interface}를 구현.



linux\+\_\+hal\+\_\+common.\+hpp 파일의 223 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
223                                         \{
224         \textcolor{keywordflow}{return} 0;
225     \}
\end{DoxyCode}
\index{Linux\+Network\+Interface@{Linux\+Network\+Interface}!nrecv@{nrecv}}
\index{nrecv@{nrecv}!Linux\+Network\+Interface@{Linux\+Network\+Interface}}
\subsubsection[{\texorpdfstring{nrecv(\+Link\+Layer\+Address $\ast$addr, uint8\+\_\+t $\ast$payload, size\+\_\+t \&length)}{nrecv(LinkLayerAddress *addr, uint8_t *payload, size_t &length)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf net\+\_\+result} nrecv (
\begin{DoxyParamCaption}
\item[{{\bf Link\+Layer\+Address} $\ast$}]{addr, }
\item[{{\bf uint8\+\_\+t} $\ast$}]{payload, }
\item[{size\+\_\+t \&}]{length}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{class_linux_network_interface_acb980fe584d47a71be88f12808edd91c}{}\label{class_linux_network_interface_acb980fe584d47a71be88f12808edd91c}


Receives a packet from a remote address. 


\begin{DoxyParams}{매개변수}
{\em addr} & \mbox{[}in\mbox{]} Remote link layer address \\
\hline
{\em payload} & \mbox{[}out\mbox{]} Data buffer \\
\hline
{\em length} & \mbox{[}out\mbox{]} Size of received data buffer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
net\+\_\+succeed in case of successful reception, net\+\_\+trfail in case there is an error on the transmit side, net\+\_\+fatal if error on reception 
\end{DoxyReturn}


\hyperlink{class_o_s_network_interface_a180931fa9d850cc342bc0ecd7b04e12a}{O\+S\+Network\+Interface}를 구현.



linux\+\_\+hal\+\_\+generic.\+cpp 파일의 56 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
57 \{
58     fd\_set readfds;
59     \textcolor{keywordtype}{int} \hyperlink{gst__avb__playbin_8c_a6ce68847c12434f60d1b2654a3dc3409}{err};
60     \textcolor{keyword}{struct }msghdr \hyperlink{maap__log__linux_8c_a0c7e58a50354c4a4d6dad428d0e47029}{msg};
61     \textcolor{keyword}{struct }cmsghdr *cmsg;
62     \textcolor{keyword}{struct }\{
63         \textcolor{keyword}{struct }cmsghdr cm;
64         \textcolor{keywordtype}{char} control[256];
65     \} control;
66     \textcolor{keyword}{struct }sockaddr\_ll remote;
67     \textcolor{keyword}{struct }iovec sgentry;
68     \hyperlink{avbts__osnet_8hpp_a21b2b4b5e479ef3adfc039ac30c961cd}{net\_result} ret = \hyperlink{avbts__osnet_8hpp_a21b2b4b5e479ef3adfc039ac30c961cda349eff10b7ad8aef2477575f9306e579}{net\_succeed};
69     \textcolor{keywordtype}{bool} got\_net\_lock;
70 
71     \hyperlink{class_linux_timestamper_generic}{LinuxTimestamperGeneric} *gtimestamper;
72 
73     \textcolor{keyword}{struct }timeval \hyperlink{aaf-listener_8c_a869c60cb165af7b6177060c00c5c416c}{timeout} = \{ 0, 16000 \}; \textcolor{comment}{// 16 ms}
74 
75     \textcolor{keywordflow}{if}( !\hyperlink{class_linux_network_interface_a2485d8ad81138164119a9e8b68642a1d}{net\_lock}.\hyperlink{class_ticketing_lock_a27addfbd7031de7dc72d73e9e89449bd}{lock}( &got\_net\_lock )) \{
76         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}(\textcolor{stringliteral}{"A Failed to lock mutex"});
77         \textcolor{keywordflow}{return} \hyperlink{avbts__osnet_8hpp_a21b2b4b5e479ef3adfc039ac30c961cda2ab09e0547baba0a6c07a8d53e1529a5}{net\_fatal};
78     \}
79     \textcolor{keywordflow}{if}( !got\_net\_lock ) \{
80         \textcolor{keywordflow}{return} \hyperlink{avbts__osnet_8hpp_a21b2b4b5e479ef3adfc039ac30c961cda02bf20698d895d3c6a6db8926645d69b}{net\_trfail};
81     \}
82 
83     FD\_ZERO( &readfds );
84     FD\_SET( \hyperlink{class_linux_network_interface_ab2e41169dafb40e1ab917422a2d1145a}{sd\_event}, &readfds );
85 
86     err = select( \hyperlink{class_linux_network_interface_ab2e41169dafb40e1ab917422a2d1145a}{sd\_event}+1, &readfds, \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, &timeout );
87     \textcolor{keywordflow}{if}( err == 0 ) \{
88         ret = \hyperlink{avbts__osnet_8hpp_a21b2b4b5e479ef3adfc039ac30c961cda02bf20698d895d3c6a6db8926645d69b}{net\_trfail};
89         \textcolor{keywordflow}{goto} \hyperlink{mrp_validate_8c_a5992b274cfdcacdbc1fa8347fd01ebde}{done};
90     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( err == -1 ) \{
91         \textcolor{keywordflow}{if}( err == EINTR ) \{
92             \textcolor{comment}{// Caught signal}
93             \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}(\textcolor{stringliteral}{"select() recv signal"});
94             ret = \hyperlink{avbts__osnet_8hpp_a21b2b4b5e479ef3adfc039ac30c961cda02bf20698d895d3c6a6db8926645d69b}{net\_trfail};
95             \textcolor{keywordflow}{goto} \hyperlink{mrp_validate_8c_a5992b274cfdcacdbc1fa8347fd01ebde}{done};
96         \} \textcolor{keywordflow}{else} \{
97             \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}(\textcolor{stringliteral}{"select() failed"});
98             ret = \hyperlink{avbts__osnet_8hpp_a21b2b4b5e479ef3adfc039ac30c961cda2ab09e0547baba0a6c07a8d53e1529a5}{net\_fatal};
99             \textcolor{keywordflow}{goto} \hyperlink{mrp_validate_8c_a5992b274cfdcacdbc1fa8347fd01ebde}{done};
100     \}
101     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !FD\_ISSET( \hyperlink{class_linux_network_interface_ab2e41169dafb40e1ab917422a2d1145a}{sd\_event}, &readfds )) \{
102         ret = \hyperlink{avbts__osnet_8hpp_a21b2b4b5e479ef3adfc039ac30c961cda02bf20698d895d3c6a6db8926645d69b}{net\_trfail};
103         \textcolor{keywordflow}{goto} \hyperlink{mrp_validate_8c_a5992b274cfdcacdbc1fa8347fd01ebde}{done};
104     \}
105 
106     memset( &\hyperlink{maap__log__linux_8c_a0c7e58a50354c4a4d6dad428d0e47029}{msg}, 0, \textcolor{keyword}{sizeof}( \hyperlink{maap__log__linux_8c_a0c7e58a50354c4a4d6dad428d0e47029}{msg} ));
107 
108     \hyperlink{maap__log__linux_8c_a0c7e58a50354c4a4d6dad428d0e47029}{msg}.msg\_iov = &sgentry;
109     \hyperlink{maap__log__linux_8c_a0c7e58a50354c4a4d6dad428d0e47029}{msg}.msg\_iovlen = 1;
110 
111     sgentry.iov\_base = payload;
112     sgentry.iov\_len = length;
113 
114     memset( &remote, 0, \textcolor{keyword}{sizeof}(remote));
115     \hyperlink{maap__log__linux_8c_a0c7e58a50354c4a4d6dad428d0e47029}{msg}.msg\_name = (caddr\_t) &remote;
116     \hyperlink{maap__log__linux_8c_a0c7e58a50354c4a4d6dad428d0e47029}{msg}.msg\_namelen = \textcolor{keyword}{sizeof}( remote );
117     \hyperlink{maap__log__linux_8c_a0c7e58a50354c4a4d6dad428d0e47029}{msg}.msg\_control = &control;
118     \hyperlink{maap__log__linux_8c_a0c7e58a50354c4a4d6dad428d0e47029}{msg}.msg\_controllen = \textcolor{keyword}{sizeof}(control);
119 
120     err = recvmsg( \hyperlink{class_linux_network_interface_ab2e41169dafb40e1ab917422a2d1145a}{sd\_event}, &\hyperlink{maap__log__linux_8c_a0c7e58a50354c4a4d6dad428d0e47029}{msg}, 0 );
121     \textcolor{keywordflow}{if}( err < 0 ) \{
122         \textcolor{keywordflow}{if}( errno == ENOMSG ) \{
123             \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}(\textcolor{stringliteral}{"Got ENOMSG: %s:%d"}, \_\_FILE\_\_, \_\_LINE\_\_);
124             ret = \hyperlink{avbts__osnet_8hpp_a21b2b4b5e479ef3adfc039ac30c961cda02bf20698d895d3c6a6db8926645d69b}{net\_trfail};
125             \textcolor{keywordflow}{goto} \hyperlink{mrp_validate_8c_a5992b274cfdcacdbc1fa8347fd01ebde}{done};
126         \}
127         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}(\textcolor{stringliteral}{"recvmsg() failed: %s"}, strerror(errno));
128         ret = \hyperlink{avbts__osnet_8hpp_a21b2b4b5e479ef3adfc039ac30c961cda2ab09e0547baba0a6c07a8d53e1529a5}{net\_fatal};
129         \textcolor{keywordflow}{goto} \hyperlink{mrp_validate_8c_a5992b274cfdcacdbc1fa8347fd01ebde}{done};
130     \}
131     *addr = \hyperlink{class_link_layer_address}{LinkLayerAddress}( remote.sll\_addr );
132 
133     gtimestamper = \textcolor{keyword}{dynamic\_cast<}\hyperlink{class_linux_timestamper_generic}{LinuxTimestamperGeneric} *\textcolor{keyword}{>}(
      \hyperlink{class_linux_network_interface_a47975f2b80d6d5e6fc426813df74feeb}{timestamper});
134     \textcolor{keywordflow}{if}( err > 0 && !(payload[0] & 0x8) && gtimestamper != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} ) \{
135         \textcolor{comment}{/* Retrieve the timestamp */}
136         cmsg = CMSG\_FIRSTHDR(&\hyperlink{maap__log__linux_8c_a0c7e58a50354c4a4d6dad428d0e47029}{msg});
137         \textcolor{keywordflow}{while}( cmsg != \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} ) \{
138             \textcolor{keywordflow}{if}
139                 ( cmsg->cmsg\_level == SOL\_SOCKET &&
140                   cmsg->cmsg\_type == SO\_TIMESTAMPING ) \{
141                 \textcolor{keyword}{struct }timespec *ts\_device, *ts\_system;
142                 \hyperlink{class_timestamp}{Timestamp} device, system;
143                 ts\_system = ((\textcolor{keyword}{struct }timespec *) CMSG\_DATA(cmsg)) + 1;
144                 system = \hyperlink{linux__hal__common_8cpp_aca59dd57dc39771609459e65457e0740}{tsToTimestamp}( ts\_system );
145                 ts\_device = ts\_system + 1; device = \hyperlink{linux__hal__common_8cpp_aca59dd57dc39771609459e65457e0740}{tsToTimestamp}( ts\_device );
146                 gtimestamper->\hyperlink{class_linux_timestamper_generic_a502ddb4d27b9cf57a9612fe74def2404}{pushRXTimestamp}( &device );
147                 \textcolor{keywordflow}{break};
148             \}
149             cmsg = CMSG\_NXTHDR(&\hyperlink{maap__log__linux_8c_a0c7e58a50354c4a4d6dad428d0e47029}{msg},cmsg);
150         \}
151     \}
152 
153     length = \hyperlink{gst__avb__playbin_8c_a6ce68847c12434f60d1b2654a3dc3409}{err};
154 
155  \hyperlink{mrp_validate_8c_a5992b274cfdcacdbc1fa8347fd01ebde}{done}:
156     \textcolor{keywordflow}{if}( !\hyperlink{class_linux_network_interface_a2485d8ad81138164119a9e8b68642a1d}{net\_lock}.\hyperlink{class_ticketing_lock_ae399421ee39cae4df5ea44bd21e31254}{unlock}()) \{
157         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}(\textcolor{stringliteral}{"A Failed to unlock, %d"}, err);
158         \textcolor{keywordflow}{return} \hyperlink{avbts__osnet_8hpp_a21b2b4b5e479ef3adfc039ac30c961cda2ab09e0547baba0a6c07a8d53e1529a5}{net\_fatal};
159     \}
160 
161     \textcolor{keywordflow}{return} ret;
162 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_linux_network_interface_acb980fe584d47a71be88f12808edd91c_cgraph}
\end{center}
\end{figure}




이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_linux_network_interface_acb980fe584d47a71be88f12808edd91c_icgraph}
\end{center}
\end{figure}


\index{Linux\+Network\+Interface@{Linux\+Network\+Interface}!send@{send}}
\index{send@{send}!Linux\+Network\+Interface@{Linux\+Network\+Interface}}
\subsubsection[{\texorpdfstring{send(\+Link\+Layer\+Address $\ast$addr, uint16\+\_\+t ether\+Type, uint8\+\_\+t $\ast$payload, size\+\_\+t length, bool timestamp)}{send(LinkLayerAddress *addr, uint16_t etherType, uint8_t *payload, size_t length, bool timestamp)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf net\+\_\+result} send (
\begin{DoxyParamCaption}
\item[{{\bf Link\+Layer\+Address} $\ast$}]{addr, }
\item[{uint16\+\_\+t}]{ether\+Type, }
\item[{{\bf uint8\+\_\+t} $\ast$}]{payload, }
\item[{size\+\_\+t}]{length, }
\item[{{\bf bool}}]{timestamp}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{class_linux_network_interface_a16eac0643a26a66fa2b664d4db5d3e42}{}\label{class_linux_network_interface_a16eac0643a26a66fa2b664d4db5d3e42}


Sends a packet to a remote address. 


\begin{DoxyParams}{매개변수}
{\em addr} & \mbox{[}in\mbox{]} Remote link layer address \\
\hline
{\em ether\+Type} & \mbox{[}in\mbox{]} The Ether\+Type of the message in host order \\
\hline
{\em payload} & \mbox{[}in\mbox{]} Data buffer \\
\hline
{\em length} & Size of data buffer \\
\hline
{\em timestamp} & T\+R\+UE if to use the event socket with the P\+TP multicast address. F\+A\+L\+SE if to use a general socket. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
net\+\_\+fatal if error, net\+\_\+success if success 
\end{DoxyReturn}


\hyperlink{class_o_s_network_interface_a6008109206a5bd3bb0d9b850fb0da452}{O\+S\+Network\+Interface}를 구현.



linux\+\_\+hal\+\_\+common.\+cpp 파일의 87 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
87                                                                                                 \{
88     sockaddr\_ll *remote = \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
89     \textcolor{keywordtype}{int} \hyperlink{gst__avb__playbin_8c_a6ce68847c12434f60d1b2654a3dc3409}{err};
90     remote = \textcolor{keyword}{new} \textcolor{keyword}{struct }sockaddr\_ll;
91     memset( remote, 0, \textcolor{keyword}{sizeof}( *remote ));
92     remote->sll\_family = AF\_PACKET;
93     remote->sll\_protocol = \hyperlink{linux_2src_2platform_8cpp_aa89fc0aa7465274c200da69771d2a043}{PLAT\_htons}( etherType );
94     remote->sll\_ifindex = \hyperlink{class_linux_network_interface_a01e636f8746c84f1cf3d45c4afbfde35}{ifindex};
95     remote->sll\_halen = \hyperlink{openavb__avdecc__pub_8h_a9822d89774e0d6ddaa06503950130423}{ETH\_ALEN};
96     addr->\hyperlink{class_link_layer_address_a1e2896b540d2ea6182d351332737db91}{toOctetArray}( remote->sll\_addr );
97 
98     \textcolor{keywordflow}{if}( timestamp ) \{
99 \textcolor{preprocessor}{#ifndef ARCH\_INTELCE}
100         \hyperlink{class_linux_network_interface_a2485d8ad81138164119a9e8b68642a1d}{net\_lock}.\hyperlink{class_ticketing_lock_a27addfbd7031de7dc72d73e9e89449bd}{lock}();
101 \textcolor{preprocessor}{#endif}
102         err = sendto
103             ( \hyperlink{class_linux_network_interface_ab2e41169dafb40e1ab917422a2d1145a}{sd\_event}, payload, length, 0, (sockaddr *) remote,
104               \textcolor{keyword}{sizeof}( *remote ));
105     \} \textcolor{keywordflow}{else} \{
106         err = sendto
107             ( \hyperlink{class_linux_network_interface_a4dac986db2725a7381738a799374da65}{sd\_general}, payload, length, 0, (sockaddr *) remote,
108               \textcolor{keyword}{sizeof}( *remote ));
109     \}
110     \textcolor{keyword}{delete} remote;
111     \textcolor{keywordflow}{if}( err == -1 ) \{
112         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}( \textcolor{stringliteral}{"Failed to send: %s(%d)"}, strerror(errno), errno );
113         \textcolor{keywordflow}{return} \hyperlink{avbts__osnet_8hpp_a21b2b4b5e479ef3adfc039ac30c961cda2ab09e0547baba0a6c07a8d53e1529a5}{net\_fatal};
114     \}
115     \textcolor{keywordflow}{return} \hyperlink{avbts__osnet_8hpp_a21b2b4b5e479ef3adfc039ac30c961cda349eff10b7ad8aef2477575f9306e579}{net\_succeed};
116 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=287pt]{class_linux_network_interface_a16eac0643a26a66fa2b664d4db5d3e42_cgraph}
\end{center}
\end{figure}




이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=275pt]{class_linux_network_interface_a16eac0643a26a66fa2b664d4db5d3e42_icgraph}
\end{center}
\end{figure}


\index{Linux\+Network\+Interface@{Linux\+Network\+Interface}!watch\+Net\+Link@{watch\+Net\+Link}}
\index{watch\+Net\+Link@{watch\+Net\+Link}!Linux\+Network\+Interface@{Linux\+Network\+Interface}}
\subsubsection[{\texorpdfstring{watch\+Net\+Link(\+Common\+Port $\ast$p\+Port)}{watchNetLink(CommonPort *pPort)}}]{\setlength{\rightskip}{0pt plus 5cm}void watch\+Net\+Link (
\begin{DoxyParamCaption}
\item[{{\bf Common\+Port} $\ast$}]{p\+Port}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\hypertarget{class_linux_network_interface_a2d20b70884c94962cd11bd51d92617b4}{}\label{class_linux_network_interface_a2d20b70884c94962cd11bd51d92617b4}


Watch for net link changes. 



\hyperlink{class_o_s_network_interface_afc43662e3774645bd8443dc68e5e6ea2}{O\+S\+Network\+Interface}를 구현.



linux\+\_\+hal\+\_\+common.\+cpp 파일의 309 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
310 \{
311     fd\_set netLinkFD;
312     \textcolor{keywordtype}{int} netLinkSocket;
313     \textcolor{keywordtype}{int} inetSocket;
314     \textcolor{keyword}{struct }sockaddr\_nl addr;
315 
316     \hyperlink{class_ether_port}{EtherPort} *pPort =
317         \textcolor{keyword}{dynamic\_cast<}\hyperlink{class_ether_port}{EtherPort} *\textcolor{keyword}{>}(iPort);
318     \textcolor{keywordflow}{if}( pPort == \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
319     \{
320         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}(\textcolor{stringliteral}{"NETLINK socket open error"});
321         \textcolor{keywordflow}{return};
322     \}
323 
324     netLinkSocket = socket (AF\_NETLINK, SOCK\_RAW, NETLINK\_ROUTE);
325     \textcolor{keywordflow}{if} (netLinkSocket < 0) \{
326         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}(\textcolor{stringliteral}{"NETLINK socket open error"});
327         \textcolor{keywordflow}{return};
328     \}
329 
330     memset((\textcolor{keywordtype}{void} *) &addr, 0, \textcolor{keyword}{sizeof} (addr));
331 
332     addr.nl\_family = AF\_NETLINK;
333     addr.nl\_pid = getpid ();
334     addr.nl\_groups = RTMGRP\_LINK;
335 
336     \textcolor{keywordflow}{if} (bind (netLinkSocket, (\textcolor{keyword}{struct} sockaddr *) &addr, \textcolor{keyword}{sizeof} (addr)) < 0) \{
337         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}(\textcolor{stringliteral}{"Socket bind failed"});
338         close (netLinkSocket);
339         \textcolor{keywordflow}{return};
340     \}
341 
342     \textcolor{comment}{/*}
343 \textcolor{comment}{     * Open an INET family socket to be passed to getLinkSpeed() which calls}
344 \textcolor{comment}{     * ioctl() because NETLINK sockets do not support ioctl(). Since we will}
345 \textcolor{comment}{     * enter an infinite loop, there are no apparent close() calls for the}
346 \textcolor{comment}{     * open sockets, but they will be closed on process termination.}
347 \textcolor{comment}{     */}
348     inetSocket = socket (AF\_INET, SOCK\_STREAM, 0);
349     \textcolor{keywordflow}{if} (inetSocket < 0) \{
350         \hyperlink{gptp__log_8hpp_afefbb1009717c128012bfeed94842987}{GPTP\_LOG\_ERROR}(\textcolor{stringliteral}{"watchNetLink error opening socket: %s"}, strerror(errno));
351         close (netLinkSocket);
352         \textcolor{keywordflow}{return};
353     \}
354 
355     \hyperlink{linux__hal__common_8cpp_a28c50a89d3f2652ec9fe1b533043a959}{x\_initLinkUpStatus}(pPort, \hyperlink{class_linux_network_interface_a01e636f8746c84f1cf3d45c4afbfde35}{ifindex});
356     \textcolor{keywordflow}{if}( pPort->getLinkUpState() )
357     \{
358         \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\_t} link\_speed;
359         \hyperlink{class_linux_network_interface_a5c60a048f947174b7a53a9a7253800b5}{getLinkSpeed}( inetSocket, &link\_speed );
360         pPort->setLinkSpeed((\hyperlink{parse_8c_a37994e3b11c72957c6f454c6ec96d43d}{int32\_t}) link\_speed );
361     \} \textcolor{keywordflow}{else}
362     \{
363         pPort->setLinkSpeed( \hyperlink{gptp__cfg_8hpp_a8b3f08c4bbdb0c6071d0c950ff4d99e5}{INVALID\_LINKSPEED} );
364     \}
365 
366     \textcolor{keywordflow}{while} (1) \{
367         FD\_ZERO(&netLinkFD);
368         FD\_CLR(netLinkSocket, &netLinkFD);
369         FD\_SET(netLinkSocket, &netLinkFD);
370 
371         \textcolor{comment}{// Wait forever for a net link event}
372         \textcolor{keywordtype}{int} retval = select(FD\_SETSIZE, &netLinkFD, \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \hyperlink{openavb__types__base__pub_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
373         \textcolor{keywordflow}{if} (retval == -1)
374             ; \textcolor{comment}{// Error on select. We will ignore and keep going}
375         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (retval) \{
376             \textcolor{keywordtype}{bool} prev\_link\_up = pPort->getLinkUpState();
377             \hyperlink{linux__hal__common_8cpp_aa4cf76f24b5f699c50850d7c1cce3023}{x\_readEvent}(netLinkSocket, pPort, \hyperlink{class_linux_network_interface_a01e636f8746c84f1cf3d45c4afbfde35}{ifindex});
378 
379             \textcolor{comment}{// Don't do anything else if link state is the same}
380             \textcolor{keywordflow}{if}( prev\_link\_up == pPort->getLinkUpState() )
381                 \textcolor{keywordflow}{continue};
382             \textcolor{keywordflow}{if}( pPort->getLinkUpState() )
383             \{
384                 \hyperlink{parse_8c_a6eb1e68cc391dd753bc8ce896dbb8315}{uint32\_t} link\_speed;
385                 \hyperlink{class_linux_network_interface_a5c60a048f947174b7a53a9a7253800b5}{getLinkSpeed}( inetSocket, &link\_speed );
386                 pPort->setLinkSpeed((\hyperlink{parse_8c_a37994e3b11c72957c6f454c6ec96d43d}{int32\_t}) link\_speed );
387             \} \textcolor{keywordflow}{else}
388             \{
389                 pPort->setLinkSpeed( \hyperlink{gptp__cfg_8hpp_a8b3f08c4bbdb0c6071d0c950ff4d99e5}{INVALID\_LINKSPEED} );
390             \}
391         \}
392         \textcolor{keywordflow}{else} \{
393             ; \textcolor{comment}{// Would be timeout but Won't happen because we wait forever}
394         \}
395     \}
396 \}
\end{DoxyCode}


이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_linux_network_interface_a2d20b70884c94962cd11bd51d92617b4_cgraph}
\end{center}
\end{figure}




\subsection{Friend, 그리고 관련된 함수 문서화}
\index{Linux\+Network\+Interface@{Linux\+Network\+Interface}!Linux\+Network\+Interface\+Factory@{Linux\+Network\+Interface\+Factory}}
\index{Linux\+Network\+Interface\+Factory@{Linux\+Network\+Interface\+Factory}!Linux\+Network\+Interface@{Linux\+Network\+Interface}}
\subsubsection[{\texorpdfstring{Linux\+Network\+Interface\+Factory}{LinuxNetworkInterfaceFactory}}]{\setlength{\rightskip}{0pt plus 5cm}friend class {\bf Linux\+Network\+Interface\+Factory}\hspace{0.3cm}{\ttfamily [friend]}}\hypertarget{class_linux_network_interface_af1d8dc20f87a29eb0af128366c47a247}{}\label{class_linux_network_interface_af1d8dc20f87a29eb0af128366c47a247}


linux\+\_\+hal\+\_\+common.\+hpp 파일의 149 번째 라인에서 정의되었습니다.



\subsection{필드 문서화}
\index{Linux\+Network\+Interface@{Linux\+Network\+Interface}!ifindex@{ifindex}}
\index{ifindex@{ifindex}!Linux\+Network\+Interface@{Linux\+Network\+Interface}}
\subsubsection[{\texorpdfstring{ifindex}{ifindex}}]{\setlength{\rightskip}{0pt plus 5cm}int ifindex\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{class_linux_network_interface_a01e636f8746c84f1cf3d45c4afbfde35}{}\label{class_linux_network_interface_a01e636f8746c84f1cf3d45c4afbfde35}


linux\+\_\+hal\+\_\+common.\+hpp 파일의 155 번째 라인에서 정의되었습니다.

\index{Linux\+Network\+Interface@{Linux\+Network\+Interface}!local\+\_\+addr@{local\+\_\+addr}}
\index{local\+\_\+addr@{local\+\_\+addr}!Linux\+Network\+Interface@{Linux\+Network\+Interface}}
\subsubsection[{\texorpdfstring{local\+\_\+addr}{local_addr}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Link\+Layer\+Address} local\+\_\+addr\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{class_linux_network_interface_af3d1546f688fbb9cec0317d152cab1da}{}\label{class_linux_network_interface_af3d1546f688fbb9cec0317d152cab1da}


linux\+\_\+hal\+\_\+common.\+hpp 파일의 151 번째 라인에서 정의되었습니다.

\index{Linux\+Network\+Interface@{Linux\+Network\+Interface}!net\+\_\+lock@{net\+\_\+lock}}
\index{net\+\_\+lock@{net\+\_\+lock}!Linux\+Network\+Interface@{Linux\+Network\+Interface}}
\subsubsection[{\texorpdfstring{net\+\_\+lock}{net_lock}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ticketing\+Lock} net\+\_\+lock\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{class_linux_network_interface_a2485d8ad81138164119a9e8b68642a1d}{}\label{class_linux_network_interface_a2485d8ad81138164119a9e8b68642a1d}


linux\+\_\+hal\+\_\+common.\+hpp 파일의 157 번째 라인에서 정의되었습니다.

\index{Linux\+Network\+Interface@{Linux\+Network\+Interface}!sd\+\_\+event@{sd\+\_\+event}}
\index{sd\+\_\+event@{sd\+\_\+event}!Linux\+Network\+Interface@{Linux\+Network\+Interface}}
\subsubsection[{\texorpdfstring{sd\+\_\+event}{sd_event}}]{\setlength{\rightskip}{0pt plus 5cm}int sd\+\_\+event\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{class_linux_network_interface_ab2e41169dafb40e1ab917422a2d1145a}{}\label{class_linux_network_interface_ab2e41169dafb40e1ab917422a2d1145a}


linux\+\_\+hal\+\_\+common.\+hpp 파일의 152 번째 라인에서 정의되었습니다.

\index{Linux\+Network\+Interface@{Linux\+Network\+Interface}!sd\+\_\+general@{sd\+\_\+general}}
\index{sd\+\_\+general@{sd\+\_\+general}!Linux\+Network\+Interface@{Linux\+Network\+Interface}}
\subsubsection[{\texorpdfstring{sd\+\_\+general}{sd_general}}]{\setlength{\rightskip}{0pt plus 5cm}int sd\+\_\+general\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{class_linux_network_interface_a4dac986db2725a7381738a799374da65}{}\label{class_linux_network_interface_a4dac986db2725a7381738a799374da65}


linux\+\_\+hal\+\_\+common.\+hpp 파일의 153 번째 라인에서 정의되었습니다.

\index{Linux\+Network\+Interface@{Linux\+Network\+Interface}!timestamper@{timestamper}}
\index{timestamper@{timestamper}!Linux\+Network\+Interface@{Linux\+Network\+Interface}}
\subsubsection[{\texorpdfstring{timestamper}{timestamper}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Linux\+Timestamper}$\ast$ timestamper\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{class_linux_network_interface_a47975f2b80d6d5e6fc426813df74feeb}{}\label{class_linux_network_interface_a47975f2b80d6d5e6fc426813df74feeb}


linux\+\_\+hal\+\_\+common.\+hpp 파일의 154 번째 라인에서 정의되었습니다.



이 클래스에 대한 문서화 페이지는 다음의 파일들로부터 생성되었습니다.\+:\begin{DoxyCompactItemize}
\item 
daemons/gptp/linux/src/\hyperlink{linux__hal__common_8hpp}{linux\+\_\+hal\+\_\+common.\+hpp}\item 
daemons/gptp/linux/src/\hyperlink{linux__hal__common_8cpp}{linux\+\_\+hal\+\_\+common.\+cpp}\item 
daemons/gptp/linux/src/\hyperlink{linux__hal__generic_8cpp}{linux\+\_\+hal\+\_\+generic.\+cpp}\item 
daemons/gptp/linux/src/\hyperlink{linux__hal__intelce_8cpp}{linux\+\_\+hal\+\_\+intelce.\+cpp}\end{DoxyCompactItemize}
