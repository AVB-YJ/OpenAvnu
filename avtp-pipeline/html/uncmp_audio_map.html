<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Open-AVB AVTP Pipeline SDK: Uncompressed audio Mapping</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="stc_logo_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Open-AVB AVTP Pipeline SDK
   &#160;<span id="projectnumber">1.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Table&#160;of&#160;Contents</span></a></li>
      <li class="current"><a href="pages.html"><span>Topics</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Uncompressed audio Mapping </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Description</h1>
<p>Uncompressed audio mapping module conforming to AVB 61883-6 encapsulation.</p>
<h1>Mapping module configuration parameters</h1>
<table class="doxtable">
<tr>
<th>Name </th><th>Description  </th></tr>
<tr>
<td>map_nv_item_count </td><td>The number of media queue elements to hold. </td></tr>
<tr>
<td>map_nv_tx_rate or map_nv_tx_interval </td><td>Transmit interval in frames per second. 0 = default for talker class. <br/>
 The transmit rate for the mapping module should be set according to the sample rate, so that the transmit interval meets the suggested values in 1722a <ul>
<li>
sample rate which are multiple of 8000Hz <ul>
<li>
8000 for class <b>A</b></li>
<li>
4000 for class <b>B</b></li>
</ul>
</li>
<li>
sample rate which are multiple of 44100Hz<ul>
<li>
7350 for class <b>A</b> </li>
<li>
3675 for class <b>B</b></li>
</ul>
</li>
</ul>
</td></tr>
<tr>
<td>map_nv_packing_factor</td><td>How many frames of audio to accept in one media queue item </td></tr>
<tr>
<td>map_nv_audio_mcr </td><td>Media clock recovery,<ul>
<li>
0 - No Media Clock Recovery default option</li>
<li>
1 - MCR done using AVTP timestamps </li>
<li>
2 - MCR using Clock Reference Stream</li>
</ul>
</td></tr>
</table>
<h1>Notes</h1>
<p>There are additional parameters that have to be set by intf module during configuration process to make everything calulated properly inside mapping. Those variables have to be set before <em>map_gen_init_cb</em> is being called. One of the approaches might be setting them during reading of the ini configuration and setting of the interface parameters.</p>
<p>Fields of a structure <a class="el" href="structmedia__q__pub__map__uncmp__audio__info__t.html" title="Contains detailed information of the audio format. ">media_q_pub_map_uncmp_audio_info_t</a> that have to be set during interface configuration: </p>
<table class="doxtable">
<tr>
<th>Name </th><th>Description  </th></tr>
<tr>
<td>audioRate </td><td>Rate of the audio <a class="el" href="openavb__audio__pub_8h.html#a6070f1cfbb6824de6f0b2524cd306903">avb_audio_rate_t</a> </td></tr>
<tr>
<td>audioType </td><td>How the data is organized - what is the data type of samples <a class="el" href="openavb__audio__pub_8h.html#a680efa0db2b29a63c5a0e8f11975682f">avb_audio_type_t</a> </td></tr>
<tr>
<td>audioBitDepth </td><td>What is the bit depth of audio <a class="el" href="openavb__audio__pub_8h.html#ae64ee32f6ac9a6b2cf607f46ee4160bd">avb_audio_bit_depth_t</a> </td></tr>
<tr>
<td>audioChannels </td><td>How many channels there are <a class="el" href="openavb__audio__pub_8h.html#a8cc6b9a1352da050ead620139f49acc4">avb_audio_channels_t</a> </td></tr>
<tr>
<td>sparseMode </td><td>Timestamping mode <a class="el" href="openavb__map__uncmp__audio__pub_8h.html#af4359f8edef6a32baf92eb80ec13176a">avb_audio_sparse_mode_t</a> (not used in this mapping module) </td></tr>
</table>
<p>Below you can find description of how to set up those variables in interfaces</p>
<ul>
<li><a class="el" href="wav_file_intf.html">wav file interface</a></li>
<li><a class="el" href="alsa_intf.html">alsa interface</a></li>
</ul>
<p><b>Note</b>: If one of those fields will not be set, mapping module will not configure media queue correctly.</p>
<p><b>Note</b>: Both the talker and listner must be configured with matching sample parameters. If the received data does not match the configured parameters on the listener, the stream will still be setup and data will still flow - but no audio will be played. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 30 2015 08:29:35 for Open-AVB AVTP Pipeline SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
